{"version":3,"sources":["webpack:///webpack/bootstrap 3a17346e3b48b16ae8db","webpack:///./src/app/index.js","webpack:///./src/modules/simple-grid/index.js","webpack:///./src/modules/util/index.js","webpack:///./src/modules/core/index.js","webpack:///./~/element-class/index.js","webpack:///./src/modules/dirty-clean/index.js","webpack:///./src/modules/range-util/index.js","webpack:///./src/modules/pass-through/index.js","webpack:///./~/capitalize/index.js","webpack:///./~/escape-stack/src/index.js","webpack:///./src/modules/event-loop/index.js","webpack:///./src/modules/mousewheel/index.js","webpack:///./src/modules/debounce/index.js","webpack:///./src/modules/listeners/index.js","webpack:///./src/modules/decorators/index.js","webpack:///./src/modules/position-range/index.js","webpack:///./src/modules/add-dirty-props/index.js","webpack:///./src/modules/cell-classes/index.js","webpack:///./src/modules/row-model/index.js","webpack:///./src/modules/abstract-row-col-model/index.js","webpack:///./src/modules/no-op/index.js","webpack:///./src/modules/col-model/index.js","webpack:///./src/modules/simple-data-model/index.js","webpack:///./src/modules/virtual-pixel-cell-model/index.js","webpack:///./src/modules/cell-scroll-model/index.js","webpack:///./src/modules/cell-mouse-model/index.js","webpack:///./src/modules/custom-event/index.js","webpack:///./src/modules/cell-keyboard-model/index.js","webpack:///./src/modules/fps/index.js","webpack:///./~/time-now/index.js","webpack:///./src/modules/view-port/index.js","webpack:///./src/modules/view-layer/index.js","webpack:///./src/modules/col-reorder/index.js","webpack:///./src/modules/ctrl-or-cmd/index.js","webpack:///./~/key/lib/key.js","webpack:///./~/key/lib/ref.js","webpack:///./~/key/lib/code/special.js","webpack:///./~/key/lib/code/arrow.js","webpack:///./~/key/lib/code/punctuation.js","webpack:///./~/key/lib/code/alnum.js","webpack:///./~/key/lib/code/brand.js","webpack:///./src/modules/edit-model/index.js","webpack:///./~/click-off/src/index.js","webpack:///./src/modules/navigation-model/index.js","webpack:///./src/modules/pixel-scroll-model/index.js","webpack:///./src/modules/show-hidden-cols/index.js","webpack:///./src/modules/col-resize/index.js","webpack:///./src/modules/header-decorators/index.js","webpack:///./src/modules/copy-paste/index.js","webpack:///./src/modules/tsv/index.js","webpack:///./~/inner-text-shim/index.js"],"names":["makeSimpleGrid","require","debounce","elem","document","getElementsByClassName","numRows","numCols","grid","undefined","allowEdit","snapToCell","colModel","get","width","build","navigationModel","minRow","pixelScrollModel","maxIsAllTheWayFor","height","fps","logging","c","length","hidden","r","rowModel","row","children","s","Math","floor","random","subRow","create","dataRow","dataLayer","push","builder","createBuilder","createElement","ctx","viewLayer","setTextContent","data","formatted","expansionColDescriptor","a","style","cursor","color","eventLoop","bind","view","toVirtual","viewRow","expanded","update","virtualRow","textContent","headerRow","isBuiltActionable","div","innerHTML","firstChild","virtualCol","util","module","exports","varyHeights","varyWidths","fixedRows","fixedCols","preSetupFn","headerRows","headerCols","opts","rows","cols","header","fixed","isArray","dataCol","col","dataModel","setHeader","set","add","clamp","num","min","max","returnNaN","NaN","isNumber","number","isNaN","isElement","node","nodeName","prop","attr","find","value","Object","prototype","toString","call","position","t","l","b","h","w","top","left","bottom","right","position3D","x","y","transform","elementClass","dirtyClean","rangeUtil","passThrough","capitalize","escapeStack","GridMarker","userSuppliedEscapeStack","defineProperty","v","addEscapeHandler","decorators","cellClasses","virtualPixelCellModel","cellScrollModel","cellMouseModel","cellKeyboardModel","viewPort","addUtilsToCore","disableReorder","colReorder","editModel","showHiddenCols","colResize","copyPaste","drawRequested","requestDraw","isRunning","draw","addExitListener","setupTextareaForContainer","textarea","container","addEventListener","select","focused","fire","remove","widthResetTimeout","addInterceptor","e","type","button","zIndex","clearTimeout","setTimeout","appendChild","getAttribute","tabIndex","focus","createFocusTextArea","setAttribute","maxWidth","maxHeight","overflow","background","border","boxShadow","classList","iterateRange","args","getArgs","arguments","range","rowFn","cellFn","rowResult","rowloop","next","colloop","result","iterateWhileHidden","step","start","i","count","addToDimension","dim","spaceName","getter","idx","prev","indexes","from","to","reverse","iterate","fn","some","addToSpace","space","up","down","toView","virtual","toData","toRealCol","toRealRow","viewCol","toVirtualCol","toVirtualRow","timeouts","timeout","destroyed","id","apply","window","intervals","interval","setInterval","forEach","clearInterval","sizeToContainer","setContainer","scrollTop","scrollLeft","makeDirtyClean","eventIsOnCells","destroy","_grid","dirty","unbindDrawHandler","listenForDraw","api","setClean","isDirty","isClean","setDirty","disable","enable","intersect","range1","range2","range2Start","range1Start","range1End","range2End","resultStart","resultEnd","union","createFromPoints","r1","c1","r2","c2","equal","mousewheel","listeners","EVENTS","GRID_EVENTS","eloop","handlersByName","domUnbindFns","unbindAll","unbindMouseWheelFn","mainLoop","name","bindToDomElement","slice","unbind","keys","key","getHandlers","handlers","listener","unbindFn","removeEventListener","splice","indexOf","getHandlerFromArgs","handler","filter","arg","Array","_eventLoopIdx","_eventLoopUnbound","scheduleHandlerCleanUp","loopWith","pointerEvents","bindOnce","bindOnceHandler","event","interceptors","exitListeners","addListener","loop","gridStopBubbling","bodyFn","logTargets","console","log","target","currentTarget","isOuterLoopRunning","notify","stopBubbling","EVENT_NAMES","getDelta","xaxis","wheelDelta","delta","wheelDeltaY","wheelDeltaX","detail","axis","deltaX","deltaY","normalizedListener","normalizeWheelEvent","normalize","newEvent","preventDefault","defaultPrevented","delay","f","debounced","canceled","cancel","positionRange","aliveDecorators","deadDecorators","decorator","_decoratorDirtyClean","index","getAlive","popAllDead","oldDead","u","thisDirtyClean","units","render","postRender","addDirtyProps","parentDirtyClean","propOpts","_positionRangeDirtyClean","watchedProperties","map","propName","onDirty","preDirty","dirtyCleans","obj","props","val","enumerable","_val","oldVal","isChanged","descriptors","cachedClassMatrix","descriptor","addOrRemoveCachedClass","_cellClassDirtyClean","getAll","getCachedClasses","vRow","vCol","className","classPreDirty","classOnDirty","class","regnerateCache","isRemove","noop","lengthName","defaultSize","numFixed","numHeaders","builderDirtyClean","selected","setDescriptorsDirty","eventOptional","fireSelectionChange","updateDescriptorIndices","oldSelected","sort","change","addDragReadyClass","dragReadyClass","removeDragReadyClass","areBuildersDirty","toAdd","action","addHeaders","includeHeaders","subtract","dontUpdateIndex","clear","removed","move","fromIndexes","after","toValue","compareNumbers","fromIndex","removedDescriptors","spliceArgs","concat","excludeHeaders","dataIndex","virtualIndex","dontFire","changes","hasDescriptor","warn","selectable","deselect","selectedMap","reduce","selectedIndex","array","selectedKey","toggleSelect","clearSelected","getSelected","allSelected","_fixed","expandedClass","exp","Infinity","cellData","headerData","sortedCol","ascending","internalSet","datum","replace","split","rowDescriptor","getCopyData","getHeader","toggleSort","retVal","compareMethod","val1","val2","dataRow1","dataRow2","model","getRow","topPx","sumLength","getCol","leftPx","clampRowOrCol","virtualRowCol","rowOrCol","maxRowCol","clampRow","clampCol","virtualRowStart","virtualRowEnd","heightOrWidth","virtualColStart","virtualColEnd","end","lengthModel","lengthFn","totalHeight","totalWidth","fixedHeight","fixedWidth","sizeChangeListener","scrollTo","fromPixelModel","maxRow","maxCol","lastRow","lastCol","convertVirtualToScroll","virtualCoord","getScrollToRowOrCol","heightWidth","currentScroll","targetScroll","lengthToCell","scrollIntoView","newRow","newCol","customEvent","PROPS_TO_COPY_FROM_MOUSE_EVENTS","scrollInterval","_annotateEvent","annotateEvent","_annotateEventInternal","_annotateEventFromViewCoords","realRow","realCol","toGridY","clientY","toGridX","clientX","getRowByTop","getColByLeft","gridX","gridY","lastMoveRow","lastMoveCol","setupDragEventForMouseDown","createAndFireCustomMouseEvent","calculateColScrollDiff","colDiff","getBoundingClientRect","innerWidth","calculateRowScrollDiff","rowDiff","innerHeight","downEvent","lastDragRow","lastDragCol","dragStarted","unbindAutoScrollDrag","lastX","lastY","unbindMove","which","handleMouseUp","annotateDragStart","dragStart","onlyFixedRows","onlyFixedCols","enableAutoScroll","newRowDiff","newColDiff","unbindUp","dragEnd","createCustomEventFromMouseEvent","originalEvent","drag","dispatchEvent","bubbles","cancelable","createEvent","initCustomEvent","_annotateEventFromDataCoords","timeNow","frames","totalTime","totalFrames","totalWindowTime","lastLoopTime","filteredFrameTime","filterStrength","belowThresholdCount","numCalcs","filteredAverage","requestId","addFrameToWindow","frameLength","windowSize","shift","cancelAnimationFrame","threshold","markFrameTime","nowTime","allAverages","getMovingAverage","getAllTimeAverage","getLast","getFilteredAverage","isBelowThreshold","slowCount","intervalId","percentBelowThreshold","toFixed","fpsMeasure","requestAnimationFrame","getFirstClientRect","getClientRects","getFixed","oldWidth","oldHeight","offsetWidth","offsetHeight","calculateMaxLengths","isWidthChange","isHeightChange","isSizeChange","_onResize","_resize","shortDebouncedResize","convertRealToVirtual","coord","coordIsVirtual","getVirtualRowColUnsafe","realCoord","getVirtualRowColClamped","viewCoord","getRealRowColClamped","maxViewPortIndex","rowIsInView","getLengthBetweenViewCoords","colIsInView","clampY","clampX","startCoord","endCoord","inclusive","rowOrColCap","clampFn","pos","isInNonfixedArea","isInFixedArea","exclusiveOffset","fixedEndCoord","getTopOrLeft","getRowTop","viewPortCoord","getColLeft","viewPortCol","toPx","realCellRange","getRowOrColFromPosition","topOrLeft","returnVirtual","viewMax","summedLength","getBorderWidth","newSum","getVirtualRowByTop","getVirtualColByLeft","getRowHeight","viewPortRow","getColWidth","intersectRowsOrCols","intersection","fixedRange","virtualRange","fixedIntersection","scrollRange","scrollIntersection","resultRange","totalLength","lengthMethod","windowLength","maxSize","fixedLength","windowStartIndex","maxLength","lengthOfIindex","iterateCells","optionalRowFn","optionalMaxRow","optionalMaxCol","root","cellContainerTL","cellContainerTR","cellContainerBL","cellContainerBR","decoratorContainer","decoratorContainerTL","decoratorContainerTR","decoratorContainerBL","decoratorContainerBR","borderWidth","hoveredFixedRow","hoveredRow","GRID_CELL_CONTAINER_BASE_CLASS","GRID_VIEW_ROOT_CLASS","CELL_CLASS","cells","nonFixed","builtCols","builtRows","rowHeaderClasses","colHeaderClasses","fixedColClasses","fixedRowClasses","makeCellContainer","cellContainer","makeDecoratorContainer","cleanup","offsetContainerForPixelScroll","modTopPixels","offsetTop","modLeftPixels","offsetLeft","decoratorTopOffset","decoratorLeftOffset","scrollVert","scrollHorz","boundingBox","marginTop","marginLeft","measureBorderWidth","jsGridCell","oldClass","computedStyle","getComputedStyle","borderWidthProp","getPropertyValue","parseInt","drawRequestedId","_draw","rebuilt","_buildCells","builtColsDirty","_buildCols","builtRowsDirty","_buildRows","cellsPositionOrSizeChanged","_drawCellClasses","drawingCells","_drawCells","drawingDecorators","_drawDecorators","isOffsetDirty","bWidth","totalVisibleCellWidth","lastVirtualCol","lastVirtualRow","widths","lefts","virtualCols","positionRow","display","drawCell","cell","hasRowBuilder","cellChild","builtElem","notSameElem","removeChild","drawRow","doToAllCellContainers","clearCellContainer","getCellContainer","fixedRow","fixedCol","buildRow","buildCells","buildDivCell","boxSizing","destroyRenderedElems","oldElems","oldElem","destroyEvent","previouslyBuiltCols","previousElement","previouslyBuiltRows","setPosition","positionDecorator","bounding","positionCellDecoratorFromViewCellRange","realPxRange","createRangeForDescriptor","hasBeenRendered","decElement","parent","parentElement","removeDecorators","renderedElement","classes","join","contains","renderedColElement","renderedRowElement","isTargetInElem","text","nodeType","nodeValue","destroyPreviouslyBuilt","built","querySelectorAll","ctrlOrCmd","wasSelectedAtMousedown","isTargetingColHeader","_onMousedown","colDescriptor","_onDragStart","startCol","_targetCol","_renderedElem","_dragRects","dragRect","colOffset","_unbindKeyDown","removeDecoratorsAndUnbind","_unbindDrag","moveAfter","_unbindDragEnd","targetCol","removedDecs","navigator","userAgent","match","ctrlKey","metaKey","clickOff","editing","_defaultDecorator","element","typedText","renderedElem","_hydrateOpts","getEditor","isActionMode","editTriggers","saveTriggers","cancelTriggers","save","closePromise","headers","optsHasTrigger","trigger","triggerField","optsHasEditTrigger","optsHasCancelTrigger","optsHasSaveTrigger","getOptsForCol","editOptions","_interceptor","editCell","is","code","special","enter","backspace","deleteSelection","altKey","tab","saveEdit","then","handleTabEvent","shiftKey","setFocus","ranges","getAllSelectedRanges","dataChanges","setEditing","prevEditing","isTyping","savePromise","editor","Promise","resolve","currentEditor","trim","removeEscapeStackHandler","cancelEdit","removeClickOffHandler","listen","getClickOffElement","onClick","isInMe","reject","_closeEditor","dataResult","arrow","checkboxModeFor","otherSelections","focusClass","focusDecorator","focusDefaultRender","dontClearSelection","dontSetSelection","changed","clearOtherSelections","setSelectionToFocus","seekNextEdge","newIndex","startedDefined","isForwardEdge","isBackwardEdge","goForward","isEdgeToSeek","navFrom","isSeek","isLeftwardEdge","isRightwardEdge","isUpwardEdge","isDownwardEdge","cellHasValue","_navFrom","newFocus","newSelection","selection","navFromRow","navFromCol","newRowCol","setSelectionFromPoints","isNavableMouseEvent","isCheckboxModeForRowCol","colSelectable","isCheckboxMode","ctrlOrCmdPressed","fromRow","fromCol","toRow","toCol","wasSelected","selectFromFocusToCell","focusRow","focusCol","headerSelectionRange","createHeaderSelectionRange","prevSelections","findFullRowOrColSelections","selectAll","prevSelection","removeFullRowOrColFromSelection","setSelection","selectionIsFocus","addSelection","findSelectionByRange","getAllSelections","addOrSetSelection","newSelections","bottomRow","removeSelection","syncSelectionToHeaders","createAndAddSelectionDecorator","_rowSelectionClasses","_colSelectionClasses","handleRowColSelectionChange","decoratorsField","selectionDecorator","defaultRender","maybeSelectHeaderFromSelection","selections","lastSelection","pop","dontClearOthers","startRow","unbindDrag","unbindDragEnd","_selectionDecorator","selectionRange","clearSelection","clearSelectionFromModelChange","pixelDirtyClean","offsetDirtyClean","maxScroll","scrollBarWidth","intentionAngle","scrollHeight","scrollWidth","setScrollSize","cacheMaxScroll","sizeScrollBars","updatePixelOffsets","getMaxScroll","checkAngle","side1","side2","angle","abs","atan","handleMouseWheel","getScrollElementFromTarget","notifyListeners","otherTop","dontNotify","positionScrollBars","getScrollPositionFromReal","scrollBarRealClickCoord","vertHorz","scrollBarTopClick","scrollRatio","getMaxScrollBarCoord","scrollCoord","makeScrollBarDecorator","isHorz","xOrY","gridCoordField","layerCoordField","viewPortClampFn","scrollBarElem","scrollBarOffset","gridCoord","stopPropagation","vertScrollBar","horzScrollBar","scrollLength","viewScrollHeightOrWidth","getViewScrollHeightOrWidth","firstScrollableCell","_getMaxScroll","getScrollRatioFromVirtualScrollCoords","scroll","getRealScrollBarPosition","maxScrollBarScroll","scrollBarCoord","_getRealScrollBarPosition","_getScrollPositionFromReal","calcScrollBarRealTop","calcScrollBarRealLeft","getScrollableViewWidth","getScrollableViewHeight","scrollableViewHeight","scrollableViewWidth","stopParent","excludeStaticParent","overflowRegex","scrollParent","test","overflowY","overflowX","ownerDocument","_decorators","setColShowing","doWhileHidden","inc","createDecorator","headerDecorator","webkitTransform","removeProperty","maybeRemoveDecorator","decCol","showingCol","rightSide","annotateDecorator","_dragLine","minX","getDecoratorLeft","newWidth","dataIdx","makeDecorator","firstRect","ensureDecoratorPerCol","isNeeded","tsv","innerText","getCopyPasteRange","copyTable","tableBody","tsvData","gotNull","td","JSON","stringify","clipboardData","setData","outerHTML","makePasteDataChange","paste","getData","pasteData","parse","pasteHtml","tempDiv","table","querySelector","whiteSpace","tr","gridData","error","singlePasteValue","pasteValue","maybeSelectText","maybeSelectTextInner","_maybeSelectText","string","DSVToArray","strData","strDelimiter","objPattern","RegExp","arrData","arrMatches","exec","strMatchedDelimiter","strMatchedValue"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3a17346e3b48b16ae8db","'use strict';\n\nvar makeSimpleGrid = require('../modules/simple-grid');\nvar debounce = require('../modules/debounce');\n// require('../scss/grid.scss');\n\n\nvar elem = document.getElementsByClassName('grid-app-container')[0];\n\nvar numRows = 1000;\nvar numCols = 100;\n\nvar grid = makeSimpleGrid(numRows, numCols, [30], [50, 100, 400, 90], 1, 3, undefined, 1, 1, {\n  allowEdit: true,\n  snapToCell: false\n});\ngrid.colModel.get(0).width = 60;\ngrid.colModel.get(2).width = 60;\ngrid.build(elem);\ngrid.navigationModel.minRow = 1;\ngrid.pixelScrollModel.maxIsAllTheWayFor.height = true;\ngrid.fps.logging = true;\n\n//hide columsn for testing\nfor (var c = 0; c < grid.colModel.length(); c++) {\n  if (c > 4 && c % 5 === 0) {\n    grid.colModel.get(c).hidden = true;\n  }\n}\n\nfor (var r = 0; r < grid.rowModel.length(); r++) {\n  var row = grid.rowModel.get(r);\n  row.children = [];\n  for (var s = 0; s < Math.floor(Math.random() * 5) + 1; s++) {\n    var subRow = grid.rowModel.create();\n    subRow.dataRow = s;\n    subRow.dataLayer = 1;\n    row.children.push(subRow);\n  }\n}\n\nvar builder = grid.colModel.createBuilder(function () {\n  return document.createElement('a');\n}, function (elem, ctx) {\n  grid.viewLayer.setTextContent(elem, ctx.data.formatted);\n  return elem;\n});\n\nvar expansionColDescriptor = grid.colModel.get(0);\nexpansionColDescriptor.builder = grid.colModel.createBuilder(function (ctx) {\n  var a = document.createElement('a');\n  a.style.cursor = \"pointer\";\n  a.style.color = \"#aaa\";\n  grid.eventLoop.bind('click', a, function () {\n    var row = grid.rowModel.get(grid.view.row.toVirtual(ctx.viewRow));\n    row.expanded = !row.expanded;\n  });\n  return a;\n}, function update(elem, ctx) {\n  var row = grid.rowModel.get(ctx.virtualRow);\n  if (!row.children) {\n    elem.textContent = '';\n  } else {\n    elem.textContent = \">\"\n  }\n  return elem;\n});\ngrid.colModel.get(0).width = 30;\n// grid.colModel.get(1).builder = builder;\ngrid.colModel.get(2).builder = builder;\n\nvar headerRow = grid.rowModel.get(0);\nheaderRow.isBuiltActionable = false;\nheaderRow.builder = grid.rowModel.createBuilder(function () {\n  var div = document.createElement('div');\n  div.innerHTML = '<div><div></div><div style=\"color:#777;text-transform: capitalize;\"></div></div>';\n  return div.firstChild;\n}, function (elem, ctx) {\n  if (ctx.virtualCol === 0) {\n    return elem;\n  }\n  elem.children[0].textContent = ctx.data.formatted;\n  elem.children[1].textContent = 'header' + ctx.virtualCol;\n  return elem;\n});\n\nheaderRow.height = 40;\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/index.js","var util = require('../util');\n\nmodule.exports = function(numRows, numCols, varyHeights, varyWidths, fixedRows, fixedCols, preSetupFn, headerRows, headerCols, opts) {\n\n    var grid = require('../core')(opts);\n\n    if (preSetupFn) {\n        preSetupFn(grid);\n    }\n\n    headerRows = headerRows || 0;\n    headerCols = headerCols || 0;\n\n    if (numRows) {\n        var rows = [];\n        var cols = [];\n        for (var r = 0; r < numRows + headerRows; r++) {\n            var row = grid.rowModel.create();\n            var dataRow = r - headerRows;\n            row.dataRow = dataRow;\n            if (r < headerRows) {\n                row.dataRow = r;\n                row.header = true;\n            } else if (r < fixedRows + headerRows) { // returns false for undefined luckily\n                row.fixed = true;\n            }\n            if (util.isArray(varyHeights)) {\n                row.height = varyHeights[r % varyHeights.length];\n            }\n            rows.push(row);\n            if (numCols) {\n                for (var c = 0; c < numCols + headerCols || 0; c++) {\n                    var dataCol = c - headerCols;\n                    if (r === 0) {\n                        var col = grid.colModel.create();\n                        col.dataCol = dataCol;\n                        if (c < headerCols) {\n                            col.dataCol = c;\n                            col.header = true;\n                        } else if (c < fixedCols + headerCols) {\n                            col.fixed = true;\n                        }\n                        if (varyWidths) {\n                            if (util.isArray(varyWidths)) {\n                                col.width = varyWidths[c % varyWidths.length];\n                            } else {\n                                col.width = Math.random() * 10 + 101;\n                            }\n\n                        }\n                        cols.push(col);\n                    }\n                    if (c < headerCols || r < headerRows) {\n                        grid.dataModel.setHeader(r, c, [r, c]);\n                    } else {\n                        grid.dataModel.set(dataRow, dataCol, [dataRow, dataCol]);\n                    }\n                }\n            }\n        }\n        grid.rowModel.add(rows);\n        grid.colModel.add(cols);\n    }\n\n    return grid;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/simple-grid/index.js","var util = {\n    clamp: function (num, min, max, returnNaN) {\n        if (num > max) {\n            return returnNaN ? NaN : max;\n        }\n        if (num < min) {\n            return returnNaN ? NaN : min;\n        }\n        return num;\n    },\n    isNumber: function (number) {\n        return typeof number === 'number' && !isNaN(number);\n    },\n    isElement: function (node) {\n        return !!(node &&\n            (node.nodeName || // we are a direct element\n                (node.prop && node.attr && node.find))); // we have an on and find method part of jquery API\n    },\n    isArray: function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n    },\n    position: function (elem, t, l, b, r, h, w) {\n        if (t != null) {\n            elem.style.top = t + 'px';\n        }\n        if (l != null) {\n            elem.style.left = l + 'px';\n        }\n        if (b != null) {\n            elem.style.bottom = b + 'px';\n        }\n        if (r != null) {\n            elem.style.right = r + 'px';\n        }\n        if (h != null) {\n            elem.style.height = h + 'px';\n        }\n        if (w != null) {\n            elem.style.width = w + 'px';\n        }\n        elem.style.position = 'absolute';\n    },\n    position3D: function (elem, t, l) {\n        var x = '0';\n        var y = '0';\n        if (l != null) {\n            x = l + 'px';\n        }\n        if (t != null) {\n            y = t + 'px';\n        }\n        elem.style.transform = 'translate3d(' + x + ',' + y + ',0)';\n    }\n};\nmodule.exports = util;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/util/index.js","var elementClass = require('element-class');\nvar dirtyClean = require('../dirty-clean');\nvar util = require('../util');\nvar rangeUtil = require('../range-util');\nvar passThrough = require('../pass-through');\nvar capitalize = require('capitalize');\nvar escapeStack = require('escape-stack');\n\nmodule.exports = function (opts) {\n    function GridMarker() {\n\n    }\n    var grid = new GridMarker();\n    grid.opts = opts || {};\n    var userSuppliedEscapeStack;\n    Object.defineProperty(grid, 'escapeStack', {\n        get: function () {\n            return userSuppliedEscapeStack || escapeStack(true);\n        },\n        set: function (v) {\n            userSuppliedEscapeStack = {\n                // support old method for now\n                add: v.addEscapeHandler || v.add\n            };\n        }\n    });\n\n    // the order here matters because some of these depend on each other\n    grid.eventLoop = require('../event-loop')(grid);\n    grid.decorators = require('../decorators')(grid);\n    grid.cellClasses = require('../cell-classes')(grid);\n    grid.rowModel = require('../row-model')(grid);\n    grid.colModel = require('../col-model')(grid);\n    grid.dataModel = require('../simple-data-model')(grid);\n    grid.virtualPixelCellModel = require('../virtual-pixel-cell-model')(grid);\n    grid.cellScrollModel = require('../cell-scroll-model')(grid);\n    grid.cellMouseModel = require('../cell-mouse-model')(grid);\n    grid.cellKeyboardModel = require('../cell-keyboard-model')(grid);\n    grid.fps = require('../fps')(grid);\n\n    grid.viewPort = require('../view-port')(grid);\n\n    addUtilsToCore(); // this has to happen here for things not to break, view layer will add cell classes and that cache requires the utils\n\n\n    grid.viewLayer = require('../view-layer')(grid);\n\n    // things with logic that also register decorators (slightly less core than the other models)\n    if (!(opts && opts.col && opts.col.disableReorder)) {\n        grid.colReorder = require('../col-reorder')(grid);\n    }\n    if (opts && opts.allowEdit) {\n        grid.editModel = require('../edit-model')(grid);\n    }\n    grid.navigationModel = require('../navigation-model')(grid);\n    grid.pixelScrollModel = require('../pixel-scroll-model')(grid);\n    grid.showHiddenCols = require('../show-hidden-cols')(grid);\n    grid.colResize = require('../col-resize')(grid);\n    grid.copyPaste = require('../copy-paste')(grid);\n\n    var drawRequested = false;\n    grid.requestDraw = function () {\n        if (!grid.eventLoop.isRunning) {\n            grid.viewLayer.draw();\n        } else {\n            drawRequested = true;\n        }\n    };\n\n    grid.eventLoop.bind('grid-draw', function () {\n        drawRequested = false;\n    });\n\n    grid.eventLoop.addExitListener(function () {\n        if (drawRequested) {\n            grid.viewLayer.draw();\n        }\n    });\n\n    function setupTextareaForContainer(textarea, container) {\n        textarea.addEventListener('focus', function () {\n            if (container) {\n                elementClass(container).add('focus');\n            }\n            textarea.select();\n            grid.focused = true;\n            grid.eventLoop.fire('grid-focus');\n        });\n\n        textarea.addEventListener('blur', function () {\n            if (container) {\n                elementClass(container).remove('focus');\n            }\n            grid.focused = false;\n            grid.eventLoop.fire('grid-blur');\n        });\n\n        var widthResetTimeout;\n        grid.eventLoop.addInterceptor(function (e) {\n            if (e.type !== 'mousedown' || e.button !== 2) {\n                return;\n            }\n            textarea.style.width = '100%';\n            textarea.style.height = '100%';\n            textarea.style.zIndex = 1;\n            clearTimeout(widthResetTimeout);\n            widthResetTimeout = setTimeout(function () {\n                textarea.style.zIndex = 0;\n                textarea.style.width = '0px';\n                textarea.style.height = '1px';\n            }, 1);\n        });\n\n        container.appendChild(textarea);\n        if (!container.getAttribute('tabIndex')) {\n            container.tabIndex = -1;\n        }\n        container.addEventListener('focus', function () {\n            if (textarea) {\n                textarea.focus();\n            }\n        });\n    }\n\n\n    function createFocusTextArea() {\n        var textarea = document.createElement('textarea');\n        textarea.setAttribute('dts', 'grid-textarea');\n        util.position(textarea, 0, 0);\n        textarea.style.width = '0px';\n        textarea.style.height = '1px';\n        textarea.style.maxWidth = '100%';\n        textarea.style.maxHeight = '100%';\n        textarea.style.zIndex = 0;\n        textarea.style.overflow = 'hidden';\n\n        textarea.style.background = 'transparent';\n        textarea.style.color = 'transparent';\n        textarea.style.border = 'none';\n        textarea.style.boxShadow = 'none';\n        textarea.style.cursor = 'default';\n        textarea.classList.add('grid-textarea');\n        textarea.setAttribute('ondragstart', 'return false;');\n\n        return textarea;\n    }\n\n    function addUtilsToCore() {\n        function iterateRange() {\n            // expects to be called with the space as its this\n            var args = rangeUtil.getArgs(arguments);\n            var range = args.range;\n            var rowFn = args.rowFn;\n            var cellFn = args.cellFn;\n            var rowResult;\n            rowloop: for (var r = range.top; r < range.top + range.height; r = this.row.next(r)) {\n                rowResult = undefined;\n                if (rowFn) {\n                    rowResult = rowFn(r);\n                }\n                colloop: for (var c = range.left; c < range.left + range.width; c = this.col.next(c)) {\n                    if (cellFn) {\n                        var result = cellFn(r, c, rowResult);\n                        if (result === false) {\n                            break rowloop;\n                        } else if (result === true) {\n                            break colloop;\n                        }\n                    }\n                }\n            }\n        }\n\n        function iterateWhileHidden(step, start) {\n            step = step || 1;\n            for (var i = start + step; i < this.count() && i >= 0; i += step) {\n                if (!this.get(i).hidden) {\n                    return i;\n                }\n            }\n        }\n\n        function addToDimension(dim, spaceName, getter) {\n            //convert whatever space to virtual and use the row or col virtual getter\n            dim.get = function (idx) {\n                return getter(this.toVirtual(idx));\n            }.bind(dim);\n            dim.next = iterateWhileHidden.bind(dim, 1);\n            dim.prev = iterateWhileHidden.bind(dim, -1);\n            dim.clamp = function (idx) {\n                return util.clamp(idx, 0, this.count() - 1);\n            }.bind(dim);\n            dim.indexes = function () {\n                var opts;\n                opts = arguments[0];\n                opts = opts || {};\n                opts.from = opts.from || 0;\n                var count = this.count();\n                opts.to = opts.to + 1 || (opts.length && opts.length + opts.from) || count;\n                var indexes = [];\n                for (var idx = Math.max(opts.from, 0); idx < Math.min(opts.to, count); idx = opts.reverse ? this.prev(idx) : this.next(idx)) {\n                    indexes.push(idx);\n                }\n                return indexes;\n            };\n\n            dim.iterate = function () {\n                var opts;\n                var fn;\n                if (arguments.length === 2) {\n                    opts = arguments[0];\n                    fn = arguments[1];\n                } else {\n                    fn = arguments[0];\n                }\n                dim.indexes(opts).some(function (idx) {\n                    return fn(idx);\n                });\n            };\n\n            // have data to data be passthrough for example\n            dim['to' + capitalize(spaceName)] = passThrough;\n\n            return dim;\n        }\n\n        function addToSpace(spaceName) {\n            var space = grid[spaceName];\n            space.iterate = iterateRange.bind(space);\n            addToDimension(space.col, spaceName, function (idx) {\n                return grid.colModel.get(idx);\n            });\n            addToDimension(space.row, spaceName, function (idx) {\n                return grid.rowModel.get(idx);\n            });\n            space.up = space.row.prev;\n            space.down = space.row.next;\n            space.left = space.col.prev;\n            space.right = space.col.next;\n        }\n\n\n        grid.data = {\n            col: {\n                toVirtual: function (dataCol) {\n                    return grid.colModel.toVirtual(dataCol);\n                },\n                toView: function (dataCol) {\n                    return grid.virtual.col.toView(this.toVirtual(dataCol));\n                },\n                count: function () {\n                    return grid.colModel.length();\n                }\n            },\n            row: {\n                toVirtual: function (dataRow) {\n                    return grid.rowModel.toVirtual(dataRow);\n                },\n                toView: function (dataRow) {\n                    return grid.virtual.row.toView(this.toVirtual(dataRow));\n                },\n                count: function () {\n                    return grid.rowModel.length();\n                }\n            }\n        };\n        addToSpace('data');\n\n        grid.virtual = {\n            col: {\n                toData: function (virtualCol) {\n                    return grid.colModel.toData(virtualCol);\n                },\n                toView: function (virtualCol) {\n                    return grid.viewPort.toRealCol(virtualCol);\n                },\n                count: function () {\n                    return grid.colModel.length(true);\n                }\n            },\n            row: {\n                toData: function (virtualRow) {\n                    return grid.rowModel.toData(virtualRow);\n                },\n                toView: function (virtualRow) {\n                    return grid.viewPort.toRealRow(virtualRow);\n                },\n                count: function () {\n                    return grid.rowModel.length(true);\n                }\n            }\n        };\n        addToSpace('virtual');\n\n        grid.view = {\n            col: {\n                toData: function (viewCol) {\n                    return grid.virtual.col.toData(this.toVirtual(viewCol));\n                },\n                toVirtual: function (viewCol) {\n                    return grid.viewPort.toVirtualCol(viewCol);\n                },\n                count: function () {\n                    return grid.viewPort.cols;\n                }\n            },\n            row: {\n                toData: function (viewRow) {\n                    return grid.virtual.row.toData(this.toVirtual(viewRow));\n                },\n                toVirtual: function (viewRow) {\n                    return grid.viewPort.toVirtualRow(viewRow);\n                },\n                count: function () {\n                    return grid.viewPort.rows;\n                }\n            }\n        };\n        addToSpace('view');\n\n        timeouts = [];\n        grid.timeout = function () {\n            if (grid.destroyed) {\n                return;\n            }\n            var id = setTimeout.apply(window, arguments);\n            timeouts.push(id);\n            return id;\n        };\n        intervals = [];\n        grid.interval = function () {\n            if (grid.destroyed) {\n                return;\n            }\n            var id = setInterval.apply(window, arguments);\n            intervals.push(id);\n            return id;\n        };\n    }\n\n    var intervals;\n    var timeouts;\n    grid.eventLoop.bind('grid-destroy', function () {\n        intervals.forEach(function (id) {\n            clearInterval(id);\n        });\n\n        timeouts.forEach(function (id) {\n            clearTimeout(id);\n        });\n    });\n\n    grid.build = function (container) {\n        grid.container = container;\n        setupTextareaForContainer(grid.textarea, container);\n        grid.viewPort.sizeToContainer(container);\n        grid.viewLayer.build(container);\n        grid.eventLoop.setContainer(container);\n        container.style.overflow = 'hidden';\n        // the container should never actually scroll, but the browser does automatically sometimes so let's reset it when that happens\n        container.addEventListener('scroll', function () {\n            container.scrollTop = 0;\n            container.scrollLeft = 0;\n        });\n    };\n\n    grid.makeDirtyClean = function () {\n        return dirtyClean(grid);\n    };\n\n    grid.eventIsOnCells = grid.viewLayer.eventIsOnCells;\n\n    grid.textarea = createFocusTextArea();\n\n    grid.destroy = function () {\n        grid.eventLoop.fire('grid-destroy');\n    };\n\n    return grid;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/core/index.js","module.exports = function(opts) {\n  return new ElementClass(opts)\n}\n\nfunction ElementClass(opts) {\n  if (!(this instanceof ElementClass)) return new ElementClass(opts)\n  var self = this\n  if (!opts) opts = {}\n\n  // similar doing instanceof HTMLElement but works in IE8\n  if (opts.nodeType) opts = {el: opts}\n\n  this.opts = opts\n  this.el = opts.el || document.body\n  if (typeof this.el !== 'object') this.el = document.querySelector(this.el)\n}\n\nElementClass.prototype.add = function(className) {\n  var el = this.el\n  if (!el) return\n  if (el.className === \"\") return el.className = className\n  var classes = el.className.split(' ')\n  if (classes.indexOf(className) > -1) return classes\n  classes.push(className)\n  el.className = classes.join(' ')\n  return classes\n}\n\nElementClass.prototype.remove = function(className) {\n  var el = this.el\n  if (!el) return\n  if (el.className === \"\") return\n  var classes = el.className.split(' ')\n  var idx = classes.indexOf(className)\n  if (idx > -1) classes.splice(idx, 1)\n  el.className = classes.join(' ')\n  return classes\n}\n\nElementClass.prototype.has = function(className) {\n  var el = this.el\n  if (!el) return\n  var classes = el.className.split(' ')\n  return classes.indexOf(className) > -1\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/element-class/index.js\n// module id = 5\n// module chunks = 0","module.exports = function (_grid) {\n    var grid = _grid;\n    var dirty = true;\n\n    var unbindDrawHandler;\n\n    function listenForDraw() {\n        if (!unbindDrawHandler) {\n            unbindDrawHandler = grid.eventLoop.bind('grid-draw', function () {\n                api.setClean();\n            });\n        }\n    }\n\n\n    var api = {\n        isDirty: function () {\n            return dirty;\n        },\n        isClean: function () {\n            return !dirty;\n        },\n        setDirty: function () {\n            dirty = true;\n            // when things are initalizing sometimes this doesn't exist yet\n            // we have to hope that at the end of initialization the grid will call request draw itself\n            if (grid.requestDraw) {\n                grid.requestDraw();\n            }\n        },\n        setClean: function () {\n            dirty = false;\n        },\n        disable: function () {\n            if (unbindDrawHandler) {\n                unbindDrawHandler();\n                unbindDrawHandler = null;\n            }\n        },\n        enable: function () {\n            listenForDraw();\n        }\n    };\n\n    api.enable();\n\n    return api;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/dirty-clean/index.js","module.exports = {\n    //takes a point and a length as the ranges in array form\n    intersect: function(range1, range2) {\n        var range2Start = range2[0];\n        var range1Start = range1[0];\n        var range1End = range1Start + range1[1] - 1;\n        var range2End = range2Start + range2[1] - 1;\n        if (range2Start > range1End || range2End < range1Start) {\n            return null;\n        }\n        var resultStart = (range1Start > range2Start ? range1Start : range2Start);\n        var resultEnd = (range1End < range2End ? range1End : range2End);\n        return [\n            resultStart,\n            resultEnd - resultStart + 1\n        ];\n    },\n    //takes a point and a length as the ranges in array form\n    union: function(range1, range2) {\n        if (!range1) {\n            return range2;\n        }\n        if (!range2) {\n            return range1;\n        }\n        var range2Start = range2[0];\n        var range2End = range2Start + range2[1] - 1;\n        var range1Start = range1[0];\n        var range1End = range1Start + range1[1] - 1;\n        var resultStart = (range1Start < range2Start ? range1Start : range2Start);\n        return [\n            resultStart, (range1End > range2End ? range1End : range2End) - resultStart + 1\n        ];\n    },\n\n    //takes two row, col points and creates a normal position range\n    createFromPoints: function(r1, c1, r2, c2) {\n        var range = {};\n        if (r1 < r2) {\n            range.top = r1;\n            range.height = r2 - r1 + 1;\n        } else {\n            range.top = r2;\n            range.height = r1 - r2 + 1;\n        }\n\n        if (c1 < c2) {\n            range.left = c1;\n            range.width = c2 - c1 + 1;\n        } else {\n            range.left = c2;\n            range.width = c1 - c2 + 1;\n        }\n        return range;\n    },\n    iterate: function() {\n        var args = this.getArgs(arguments);\n        var range = args.range;\n        var cellFn = args.cellFn;\n        var rowFn = args.rowFn;\n        for (var r = range.top; r < range.top + range.height; r++) {\n            var rowResult;\n            if (rowFn) {\n                rowResult = rowFn(r);\n            }\n            for (var c = range.left; c < range.left + range.width; c++) {\n                if (cellFn) {\n                    cellFn(r, c, rowResult);\n                }\n            }\n        }\n    },\n    getArgs: function(args) {\n        var range = args[0];\n        var cellFn;\n        var rowFn;\n        if (args.length === 2) {\n            cellFn = args[1];\n        } else if (args.length === 3) {\n            cellFn = args[2];\n            rowFn = args[1];\n        }\n        return {\n            range: range,\n            cellFn: cellFn,\n            rowFn: rowFn\n        };\n    },\n    equal: function(r1, r2) {\n        return r1.top === r2.top && r1.left === r2.left && r1.width === r2.width && r1.height === r2.height;\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/range-util/index.js","module.exports = function () {\n    return arguments[0];\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/pass-through/index.js","module.exports = function (string) {\n  return string.charAt(0).toUpperCase() + string.substring(1);\n}\n\nmodule.exports.words = function (string) {\n  return string.replace(/(^|\\W)(\\w)/g, function (m) {\n    return m.toUpperCase()\n  })\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/capitalize/index.js\n// module id = 9\n// module chunks = 0","var globalStack;\n\nfunction makeStack() {\n    var stack = [];\n\n    // in order to capture escape event first\n    document.body.addEventListener('keydown', function(e) {\n\n        var key = e.keyCode ? e.keyCode : e.which;\n        // yup i hard coded 27 sorry suckas\n        if (key === 27) {\n            while (!!stack.length && !(stack.pop())(e)) {}\n        }\n    }, true);\n\n    function addEscapeHandler(handler) {\n        stack.push(handler);\n        return function() {\n            removeEscapeHandler(handler);\n        };\n    }\n\n    function removeEscapeHandler(handler) {\n        var index = stack.indexOf(handler);\n        if (index !== -1) {\n            stack.splice(index, 1);\n        }\n    }\n    return {\n        add: addEscapeHandler\n    };\n}\n\nmodule.exports = function(global) {\n    if (!global) {\n        return makeStack();\n    }\n\n    if (!globalStack) {\n        globalStack = makeStack();\n    }\n    return globalStack;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/escape-stack/src/index.js\n// module id = 10\n// module chunks = 0","var mousewheel = require('../mousewheel');\nvar debounce = require('../debounce');\nvar util = require('../util');\nvar listeners = require('../listeners');\n\nvar EVENTS = ['click', 'mousedown', 'mouseup', 'mousemove', 'dblclick', 'keydown', 'keypress', 'keyup', 'copy', 'paste'];\n\nvar GRID_EVENTS = ['grid-drag-start', 'grid-drag', 'grid-cell-drag', 'grid-drag-end', 'grid-cell-mouse-move'];\n\nvar eventLoop = function () {\n    var eloop = {\n        isRunning: false\n    };\n\n    var handlersByName = {};\n    var domUnbindFns = [];\n\n    var unbindAll;\n\n    eloop.setContainer = function (container) {\n        var unbindMouseWheelFn = mousewheel.bind(container, mainLoop);\n\n        EVENTS.forEach(function (name) {\n            bindToDomElement(container, name, mainLoop);\n        });\n\n        GRID_EVENTS.forEach(function (name) {\n            bindToDomElement(window, name, mainLoop);\n        });\n\n        unbindAll = function () {\n            unbindMouseWheelFn();\n\n            // have to copy the array since the unbind will actually remove itself from the array which modifies it mid iteration\n            domUnbindFns.slice(0).forEach(function (unbind) {\n                unbind();\n            });\n\n            Object.keys(handlersByName).forEach(function (key) {\n                handlersByName[key] = [];\n            });\n        };\n    };\n\n    function getHandlers(name) {\n        var handlers = handlersByName[name];\n        if (!handlers) {\n            handlers = handlersByName[name] = [];\n        }\n        return handlers;\n    }\n\n    function bindToDomElement(elem, name, listener) {\n        elem.addEventListener(name, listener);\n        var unbindFn = function () {\n            elem.removeEventListener(name, listener);\n            domUnbindFns.splice(domUnbindFns.indexOf(unbindFn), 1);\n        };\n        domUnbindFns.push(unbindFn);\n        return unbindFn;\n    }\n\n    function getHandlerFromArgs(args) {\n        var handler = args.filter(function (arg) {\n            return typeof arg === 'function';\n        })[0];\n        return handler;\n    }\n\n    eloop.bind = function () {\n        var args = Array.prototype.slice.call(arguments, 0);\n        var name = args.filter(function (arg) {\n            return typeof arg === 'string';\n        })[0];\n        var handler = getHandlerFromArgs(args);\n        if (!handler || !name) {\n            throw 'cannot bind without at least name and function';\n        }\n\n\n        var elem = args.filter(function (arg) {\n            return util.isElement(arg) || arg === window || arg === document;\n        })[0];\n\n        if (!elem) {\n\n            handler._eventLoopIdx = getHandlers(name).push(handler) - 1;\n            handler._eventLoopUnbound = false;\n            return function () {\n                if (handler._eventLoopUnbound) {\n                    return;\n                }\n                handler._eventLoopUnbound = true;\n                var handlers = getHandlers(name);\n                handlers[handler._eventLoopIdx] = null;\n                // release the memory but do the expensive work later all at once\n                scheduleHandlerCleanUp();\n            };\n        } else {\n            var listener = loopWith(handler);\n            // make sure the elem can receive events\n            if (elem.style) {\n                elem.style.pointerEvents = 'auto';\n            }\n            return bindToDomElement(elem, name, listener);\n        }\n    };\n\n    eloop.bindOnce = function () {\n        var args = Array.prototype.slice.call(arguments, 0);\n        var handler = getHandlerFromArgs(args);\n        args.splice(args.indexOf(handler), 1, function bindOnceHandler(e) {\n            unbind();\n            handler(e);\n        });\n        var unbind = eloop.bind.apply(this, args);\n        return unbind;\n    };\n\n    eloop.fire = function (event) {\n        event = typeof event === 'string' ? {\n            type: event\n        } : event;\n        mainLoop(event);\n    };\n\n    var interceptors = listeners();\n    var exitListeners = listeners();\n\n    eloop.addInterceptor = interceptors.addListener;\n    eloop.addExitListener = exitListeners.addListener;\n\n    function loopWith(fn) {\n        return function (e) {\n            loop(e, fn);\n        };\n    }\n\n    var scheduleHandlerCleanUp = debounce(function () {\n        Object.keys(handlersByName).forEach(function (type) {\n            var i = 0;\n            handlersByName[type] = handlersByName[type].filter(function (handler) {\n                if (!!handler) {\n                    handler._eventLoopIdx = i;\n                    i++;\n                }\n                return !!handler;\n            });\n        });\n    }, 1);\n\n    var mainLoop = loopWith(function (e) {\n        // have to copy the array because handlers can unbind themselves which modifies the array\n        // we use some so that we can break out of the loop if need be\n        getHandlers(e.type).slice(0).some(function (handler) {\n            if (!handler) {\n                return;\n            }\n            handler(e);\n            if (e.gridStopBubbling) {\n                return true;\n            }\n        });\n    });\n\n    function loop(e, bodyFn) {\n        if (eloop.logTargets) {\n            console.log('target', e.target, 'currentTarget', e.currentTarget);\n        }\n        var isOuterLoopRunning = eloop.isRunning;\n        eloop.isRunning = true;\n        interceptors.notify(e);\n        if (!e.gridStopBubbling) {\n            bodyFn(e);\n        }\n\n        if (!isOuterLoopRunning) {\n            eloop.isRunning = false;\n            exitListeners.notify(e);\n        }\n    }\n\n    eloop.bind('grid-destroy', function () {\n        unbindAll();\n        eloop.destroyed = true;\n    });\n\n    eloop.stopBubbling = function (e) {\n        e.gridStopBubbling = true;\n        return e;\n    };\n\n    return eloop;\n};\n\n\neventLoop.EVENTS = EVENTS;\neventLoop.GRID_EVENTS = GRID_EVENTS;\nmodule.exports = eventLoop;\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/event-loop/index.js","var EVENT_NAMES = ['mousewheel', 'wheel', 'DOMMouseScroll'];\n\nvar api = {\n    getDelta: function(event, xaxis) {\n        if (event.wheelDelta) { //for everything but firefox\n            var delta = event.wheelDeltaY;\n            if (xaxis) {\n                delta = event.wheelDeltaX;\n            }\n            return delta;\n\n        } else if (event.detail) { //for firefox pre version 17\n            if (event.axis && ((event.axis === 1 && xaxis) || (event.axis === 2 && !xaxis))) {\n                return -1 * event.detail * 12;\n            }\n        } else if (event.deltaX || event.deltaY) {\n            if (xaxis) {\n                return -1 * event.deltaX;\n            } else {\n                return -1 * event.deltaY;\n            }\n        }\n        return 0;\n    },\n\n    //binds a cross browser normalized mousewheel event, and returns a function that will unbind the listener;\n    bind: function(elem, listener) {\n        var normalizedListener = function(e) {\n            listener(normalizeWheelEvent(e));\n        };\n\n        EVENT_NAMES.forEach(function(name) {\n            elem.addEventListener(name, normalizedListener);\n        });\n\n        return function() {\n            EVENT_NAMES.forEach(function(name) {\n                elem.removeEventListener(name, normalizedListener);\n            });\n        };\n\n    },\n    normalize: normalizeWheelEvent\n};\n\nfunction normalizeWheelEvent(e) {\n    var deltaX = api.getDelta(e, true);\n    var deltaY = api.getDelta(e);\n    var newEvent = Object.create(e, {\n        deltaY: {\n            value: deltaY\n        },\n        deltaX: {\n            value: deltaX\n        },\n        type: {\n            value: 'mousewheel'\n        },\n        target: {\n            value: e.target\n        },\n        currentTarget: {\n            value: e.currentTarget\n        }\n    });\n\n    newEvent.preventDefault = function() {\n        newEvent.defaultPrevented = true;\n        if (e && e.preventDefault) {\n            e.preventDefault();\n        }\n    };\n    return newEvent;\n}\n\nmodule.exports = api;\n\n\n// WEBPACK FOOTER //\n// ./src/modules/mousewheel/index.js","module.exports = function(fn, delay) {\n    var f = function debounced() {\n        if (f.timeout) {\n            clearTimeout(f.timeout);\n            f.timeout = undefined;\n        }\n        if (!f.canceled) {\n            f.timeout = setTimeout(fn, delay);\n        }\n        f.cancel = function() {\n            clearTimeout(f.timeout);\n            f.timeout = undefined;\n            f.canceled = true;\n        };\n    };\n    return f;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/debounce/index.js","/*\n A simple package for creating a list of listeners that can be added to and notified\n */\n\nmodule.exports = function () {\n    var listeners = [];\n    return {\n        //returns a removal function to unbind the listener\n        addListener: function (fn) {\n            listeners.push(fn);\n            return function () {\n                listeners.splice(listeners.indexOf(fn), 1);\n            };\n        },\n        notify: function (e) {\n            listeners.forEach(function (listener) {\n                listener(e);\n            });\n        }\n    };\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/listeners/index.js","var util = require('../util');\nvar makeDirtyClean = require('../dirty-clean');\nvar positionRange = require('../position-range');\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n\n    var dirtyClean = makeDirtyClean(grid);\n\n    var aliveDecorators = [];\n    var deadDecorators = [];\n\n    var decorators = {\n        add: function (decorators) {\n            if (!util.isArray(decorators)) {\n                decorators = [decorators];\n            }\n            decorators.forEach(function (decorator) {\n                aliveDecorators.push(decorator);\n                if (decorator._decoratorDirtyClean) {\n                    decorator._decoratorDirtyClean.enable();\n                }\n            });\n            dirtyClean.setDirty();\n        },\n        remove: function (decorators) {\n            if (!util.isArray(decorators)) {\n                decorators = [decorators];\n            }\n            decorators.forEach(function (decorator) {\n                var index = aliveDecorators.indexOf(decorator);\n                if (index !== -1) {\n                    aliveDecorators.splice(index, 1);\n                    deadDecorators.push(decorator);\n                    if (decorator._decoratorDirtyClean) {\n                        decorator._decoratorDirtyClean.disable();\n                    }\n                    dirtyClean.setDirty();\n                }\n            });\n        },\n        getAlive: function () {\n            return aliveDecorators.slice(0);\n        },\n        popAllDead: function () {\n            var oldDead = deadDecorators;\n            deadDecorators = [];\n            return oldDead;\n        },\n        isDirty: dirtyClean.isDirty,\n        create: function (t, l, h, w, u, s) {\n            var thisDirtyClean = makeDirtyClean(grid);\n            var decorator = {\n                _decoratorDirtyClean: thisDirtyClean\n            };\n\n            //mixin the position range functionality\n            positionRange(decorator, thisDirtyClean, dirtyClean);\n            decorator.top = t;\n            decorator.left = l;\n            decorator.height = h;\n            decorator.width = w;\n            decorator.units = u || decorator.units;\n            decorator.space = s || decorator.space;\n\n            //they can override but we should have an empty default to prevent npes\n            decorator.render = function () {\n                var div = document.createElement('div');\n                div.style.position = 'absolute';\n                div.style.top = '0px';\n                div.style.left = '0px';\n                div.style.bottom = '0px';\n                div.style.right = '0px';\n                if (decorator.postRender) {\n                    decorator.postRender(div);\n                }\n                return div;\n            };\n            return decorator;\n\n        }\n\n    };\n\n\n    return decorators;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/decorators/index.js","var addDirtyProps = require('../add-dirty-props');\nmodule.exports = function (range, dirtyClean, parentDirtyClean, propOpts) {\n    range = range || {}; // allow mixin functionality\n    range.isDirty = dirtyClean.isDirty;\n    range._positionRangeDirtyClean = dirtyClean;\n\n    var watchedProperties = ['top', 'left', 'height', 'width', 'units', 'space'];\n    if (propOpts) {\n        watchedProperties = watchedProperties.map(function (propName) {\n            return {\n                name: propName,\n                onDirty: propOpts.onDirty,\n                preDirty: propOpts.preDirty\n            };\n        });\n    }\n    var dirtyCleans = [dirtyClean];\n    if (parentDirtyClean) {\n        dirtyCleans.push(parentDirtyClean);\n    }\n\n    addDirtyProps(range, watchedProperties, dirtyCleans);\n    // defaults\n    range.units = 'cell';\n    range.space = 'data';\n\n    return range;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/position-range/index.js","module.exports = function(obj, props, dirtyCleans) {\n    props.forEach(function(prop) {\n        var val;\n        var name = prop.name || prop;\n        Object.defineProperty(obj, name, {\n            enumerable: true,\n            get: function() {\n                return val;\n            },\n            set: function(_val) {\n                var oldVal = val;\n                var isChanged = _val !== oldVal\n                if (isChanged && prop.preDirty) {\n                    prop.preDirty();\n                }\n                val = _val;\n\n                if (isChanged) {\n                    dirtyCleans.forEach(function(dirtyClean) {\n                        dirtyClean.setDirty();\n                    });\n                    if (prop.onDirty) {\n                        prop.onDirty(_val, oldVal);\n                    }\n                }\n            }\n        });\n    });\n    return obj;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/add-dirty-props/index.js","var positionRange = require('../position-range');\nvar makeDirtyClean = require('../dirty-clean');\nvar addDirtyProps = require('../add-dirty-props');\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n\n    var dirtyClean = makeDirtyClean(grid);\n    var descriptors = [];\n    var cachedClassMatrix = [];\n\n    var api = {\n        add: function (descriptor) {\n            descriptors.push(descriptor);\n            addOrRemoveCachedClass(descriptor);\n            if (descriptor._cellClassDirtyClean) {\n                descriptor._cellClassDirtyClean.enable();\n            }\n            dirtyClean.setDirty();\n        },\n        remove: function (descriptor) {\n            var index = descriptors.indexOf(descriptor);\n            if (index !== -1) {\n                descriptors.splice(index, 1);\n                addOrRemoveCachedClass(descriptor, true);\n                if (descriptor._cellClassDirtyClean) {\n                    descriptor._cellClassDirtyClean.disable();\n                }\n                dirtyClean.setDirty();\n            }\n        },\n        getAll: function () {\n            return descriptors.slice(0);\n        },\n        getCachedClasses: function (vRow, vCol) {\n            return cachedClassMatrix[vRow] && cachedClassMatrix[vRow][vCol] || [];\n        },\n        create: function (top, left, className, height, width, space) {\n            var thisDirtyClean = makeDirtyClean(grid);\n            var descriptor = {\n                _cellClassDirtyClean: thisDirtyClean\n            };\n            // mixins\n\n            function classPreDirty() {\n                addOrRemoveCachedClass(descriptor, true);\n            }\n\n            function classOnDirty() {\n                addOrRemoveCachedClass(descriptor);\n            }\n\n            positionRange(descriptor, thisDirtyClean, dirtyClean, {\n                preDirty: classPreDirty,\n                onDirty: classOnDirty\n            });\n            addDirtyProps(descriptor, [{\n                name: 'class',\n                preDirty: classPreDirty,\n                onDirty: classOnDirty\n            }], [thisDirtyClean, dirtyClean]);\n\n            // all of these are optional\n            descriptor.top = top;\n            descriptor.left = left;\n            // default to single cell ranges\n            descriptor.height = height || 1;\n            descriptor.width = width || 1;\n            descriptor.class = className;\n            descriptor.space = space || descriptor.space;\n            return descriptor;\n        },\n        isDirty: dirtyClean.isDirty\n    };\n\n    function regnerateCache() {\n        cachedClassMatrix = [];\n        api.getAll().forEach(function (descriptor) {\n            addOrRemoveCachedClass(descriptor);\n        })\n    }\n\n    grid.eventLoop.bind('grid-row-change', regnerateCache);\n    grid.eventLoop.bind('grid-col-change', regnerateCache);\n\n    function addOrRemoveCachedClass(descriptor, isRemove) {\n        for (var r = descriptor.top; r < Math.min(descriptor.top + descriptor.height, grid.rowModel.length(true)); r++) {\n            for (var c = descriptor.left; c < Math.min(descriptor.left + descriptor.width, grid.colModel.length(true)); c++) {\n                var vRow = grid[descriptor.space].row.toVirtual(r);\n                var vCol = grid[descriptor.space].col.toVirtual(c);\n                var cols = cachedClassMatrix[vRow];\n                if (!cols) {\n                    cols = cachedClassMatrix[vRow] = [];\n                }\n                var cellClasses = cols[vCol];\n                if (!cellClasses) {\n                    if (!isRemove) {\n                        cols[vCol] = [descriptor.class];\n                    }\n                    continue;\n                }\n\n                if (!isRemove) {\n                    if (cellClasses.indexOf(descriptor.class) === -1) {\n                        cellClasses.push(descriptor.class);\n                    }\n                } else {\n                    var index = cellClasses.indexOf(descriptor.class);\n                    if (index !== -1) {\n                        cellClasses.splice(index, 1);\n                    }\n                }\n            }\n        }\n    }\n\n\n    return api;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cell-classes/index.js","module.exports = function (_grid) {\n    var grid = _grid;\n\n    var api = require('../abstract-row-col-model')(grid, 'row', 'height', 30);\n\n    return api;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/row-model/index.js","var addDirtyProps = require('../add-dirty-props');\nvar util = require('../util');\nvar noop = require('../no-op');\nvar passThrough = require('../pass-through');\nvar debounce = require('../debounce');\n\nmodule.exports = function (_grid, name, lengthName, defaultSize) {\n    var grid = _grid;\n\n    var descriptors = [];\n    var numFixed = 0;\n    var numHeaders = 0;\n    var makeDirtyClean = require('../dirty-clean');\n    var dirtyClean = makeDirtyClean(grid);\n    var builderDirtyClean = makeDirtyClean(grid);\n    var selected = [];\n\n    function setDescriptorsDirty(eventOptional) {\n        var event = eventOptional || {};\n        event.type = 'grid-' + name + '-change';\n        grid.eventLoop.fire(event);\n        dirtyClean.setDirty();\n        builderDirtyClean.setDirty();\n    }\n\n    var fireSelectionChange = debounce(function () {\n        grid.eventLoop.fire('grid-' + name + '-selection-change');\n    }, 1);\n\n    function updateDescriptorIndices() {\n        var oldSelected = selected;\n        selected = [];\n        descriptors.forEach(function (descriptor, i) {\n            descriptor.index = i;\n            if (descriptor.selected) {\n                selected.push(i);\n            }\n        });\n        if (selected.length !== oldSelected.length) {\n            fireSelectionChange();\n            return;\n        }\n        selected.sort();\n        oldSelected.sort();\n        var change = oldSelected.some(function (idx, i) {\n            return idx !== selected[i];\n        });\n        if (change) {\n            fireSelectionChange();\n        }\n    }\n\n    function addDragReadyClass(descriptor, index) {\n        if (!descriptor || !(index >= 0)) {\n            return;\n        }\n        var top = name === 'row' ? index : -1;\n        var left = name === 'row' ? -1 : index;\n        var dragReadyClass = grid.cellClasses.create(top, left, 'grid-col-drag-ready');\n        grid.cellClasses.add(dragReadyClass);\n        descriptor.dragReadyClass = dragReadyClass;\n    }\n\n    function removeDragReadyClass(descriptor) {\n        if (!descriptor || !descriptor.dragReadyClass) {\n            return;\n        }\n        grid.cellClasses.remove(descriptor.dragReadyClass);\n        descriptor.dragReadyClass = undefined;\n    }\n\n    var api = {\n        areBuildersDirty: builderDirtyClean.isDirty,\n        isDirty: dirtyClean.isDirty,\n        defaultSize: defaultSize,\n        add: function (toAdd) {\n            if (!toAdd) {\n                return;\n            }\n\n            if (!util.isArray(toAdd)) {\n                toAdd = [toAdd];\n            }\n            toAdd.forEach(function (descriptor) {\n                if (descriptor.header) {\n                    descriptors.splice(numHeaders, 0, descriptor);\n                    numFixed++;\n                    numHeaders++;\n                } else {\n                    // if the column is fixed and the last one added is fixed (we only allow fixed at the beginning for now)\n                    if (descriptor.fixed) {\n                        if (!descriptors.length || descriptors[descriptors.length - 1].fixed) {\n                            numFixed++;\n                        } else {\n                            throw 'Cannot add a fixed column after an unfixed one';\n                        }\n                    }\n                    descriptors.push(descriptor);\n                }\n            });\n            updateDescriptorIndices();\n            setDescriptorsDirty({\n                action: 'add',\n                descriptors: toAdd\n            });\n        },\n        addHeaders: function (toAdd) {\n            if (!toAdd) {\n                return;\n            }\n\n            if (!util.isArray(toAdd)) {\n                toAdd = [toAdd];\n            }\n            toAdd.forEach(function (header) {\n                header.header = true;\n            });\n            api.add(toAdd);\n        },\n        header: function (index) {\n            return descriptors[index];\n        },\n        get: function (index) {\n            return descriptors[index];\n        },\n        length: function (includeHeaders) {\n            var subtract = includeHeaders ? 0 : numHeaders;\n            return descriptors.length - subtract;\n        },\n        remove: function (descriptor, dontUpdateIndex) {\n            var index = descriptors.indexOf(descriptor);\n            if (index !== -1) {\n                descriptors.splice(index, 1);\n                if (descriptor.header) {\n                    numFixed--;\n                    numHeaders--;\n                } else if (descriptor.fixed) {\n                    numFixed--;\n                }\n            }\n            if (!dontUpdateIndex) {\n                updateDescriptorIndices();\n                setDescriptorsDirty({\n                    action: 'remove',\n                    descriptors: [descriptor]\n                });\n            }\n        },\n        clear: function (includeHeaders) {\n            var removed;\n            if (includeHeaders) {\n                removed = descriptors;\n                descriptors = [];\n                numFixed = 0;\n                numHeaders = 0;\n            } else {\n                removed = descriptors.slice(numHeaders);\n                descriptors = descriptors.slice(0, numHeaders);\n                numFixed = numHeaders;\n            }\n            updateDescriptorIndices();\n            if (removed && removed.length) {\n                setDescriptorsDirty({\n                    action: 'remove',\n                    descriptors: removed\n                });\n            }\n        },\n        move: function (fromIndexes, target, after) {\n            if (!util.isArray(fromIndexes)) {\n                fromIndexes = [fromIndexes];\n            }\n\n            if (fromIndexes.length === 1) {\n                // the single move case is easier and doesn't require the after hint\n                var from = fromIndexes[0];\n                descriptors.splice(target, 0, descriptors.splice(from, 1)[0]);\n                setDescriptorsDirty({\n                    action: 'move',\n                    descriptors: [api.get(from), api.get(target)]\n                });\n            } else {\n                while (fromIndexes.indexOf(target) !== -1 && target !== -1) {\n                    target--;\n                    after = true;\n                }\n\n                var toValue = descriptors[target];\n                var removed = fromIndexes.sort(function compareNumbers(a, b) {\n                    return b - a;\n                }).map(function (fromIndex) {\n                    var removedDescriptors = descriptors.splice(fromIndex, 1);\n                    return removedDescriptors[0];\n\n                });\n                removed.reverse();\n                var spliceArgs = [descriptors.indexOf(toValue) + (after ? 1 : 0), 0].concat(removed);\n                descriptors.splice.apply(descriptors, spliceArgs);\n                updateDescriptorIndices();\n                setDescriptorsDirty({\n                    action: 'move',\n                    descriptors: removed.concat(toValue)\n                });\n            }\n        },\n        numHeaders: function () {\n            return numHeaders;\n        },\n        numFixed: function (excludeHeaders) {\n            return numFixed - (excludeHeaders ? numHeaders : 0);\n        },\n        toVirtual: function (dataIndex) {\n            return dataIndex + api.numHeaders();\n        },\n        toData: function (virtualIndex) {\n            return virtualIndex - api.numHeaders();\n        },\n\n        select: function (indexes, dontFire) {\n            if (!util.isArray(indexes)) {\n                indexes = [indexes];\n            }\n            var changes = indexes.filter(function (idx) {\n                var hasDescriptor = !!api[name](idx);\n                if (!hasDescriptor) {\n                    console.warn('Tried to select index that had no descriptor', idx);\n                }\n                return hasDescriptor;\n            }).map(function (idx) {\n                var descriptor = api[name](idx);\n                if (!descriptor.selected && descriptor.selectable !== false) {\n                    addDragReadyClass(descriptor, idx);\n                    descriptor.selected = true;\n                    selected.push(idx);\n                    return idx;\n                }\n            });\n            if (changes.length && !dontFire) {\n                fireSelectionChange();\n            }\n        },\n        deselect: function (indexes, dontFire) {\n            if (!util.isArray(indexes)) {\n                indexes = [indexes];\n            }\n            var selectedMap = selected.reduce(function (map, selectedIndex) {\n                map[selectedIndex] = selectedIndex;\n                return map;\n            }, {});\n            var changes = indexes.filter(function (idx) {\n                var hasDescriptor = !!api[name](idx);\n                if (!hasDescriptor) {\n                    console.warn('Tried to deselect index that had no descriptor', idx);\n                }\n                return hasDescriptor;\n            }).map(function (idx) {\n                var descriptor = api[name](idx);\n                removeDragReadyClass(descriptor);\n                if (descriptor.selected) {\n                    descriptor.selected = false;\n                    selectedMap[idx] = false;\n                    return idx;\n                }\n            });\n            selected = Object.keys(selectedMap)\n                .reduce(function (array, selectedKey) {\n                    var idx = selectedMap[selectedKey];\n                    if (idx !== false) {\n                        array.push(idx)\n                    }\n                    return array;\n                }, []);\n\n            if (changes.length && !dontFire) {\n                fireSelectionChange();\n            }\n        },\n        toggleSelect: function (index) {\n            var descriptor = api[name](index);\n            if (descriptor.selected) {\n                api.deselect(index);\n            } else {\n                api.select(index);\n            }\n        },\n        clearSelected: function () {\n            // have to make a copy or we are iterating the same array we're removing from yikes.\n            return api.deselect(api.getSelected().slice(0));\n        },\n        getSelected: function () {\n            return selected;\n        },\n        allSelected: function () {\n            return api.getSelected().length === api.length();\n        },\n        create: function (builder) {\n            var descriptor = {};\n            var fixed = false;\n            Object.defineProperty(descriptor, 'fixed', {\n                enumerable: true,\n                get: function () {\n                    return descriptor.header || fixed;\n                },\n                set: function (_fixed) {\n                    fixed = _fixed;\n                }\n            });\n            var expanded = false;\n            var expandedClass;\n\n            Object.defineProperty(descriptor, 'expanded', {\n                get: function () {\n                    return expanded;\n                },\n                set: function (exp) {\n                    if (!descriptor.children) {\n                        return;\n                    }\n                    expanded = exp;\n                    // we never look for changes to the children, if you need to change it, remove and add the row again\n                    if (expanded) {\n                        var spliceArgs = [descriptor.index + 1, 0].concat(descriptor.children)\n                        descriptors.splice.apply(descriptors, spliceArgs);\n                        updateDescriptorIndices();\n                        setDescriptorsDirty({\n                            action: 'add',\n                            descriptors: descriptor.children\n                        });\n                        var top = name === 'row' ? descriptor.index : 0;\n                        var left = name === 'col' ? descriptor.index : 0;\n                        var height = name === 'row' ? 1 : Infinity;\n                        var width = name === 'col' ? 1 : Infinity;\n                        expandedClass = grid.cellClasses.create(top, left, 'grid-expanded', height, width, 'virtual');\n                        grid.cellClasses.add(expandedClass);\n\n                    } else {\n                        descriptors.splice(descriptor.index + 1, descriptor.children.length);\n                        updateDescriptorIndices();\n                        setDescriptorsDirty({\n                            action: 'remove',\n                            descriptors: [descriptor.children]\n                        });\n                        if (expandedClass) {\n                            grid.cellClasses.remove(expandedClass);\n                        }\n                    }\n                }\n            });\n\n            descriptor.isBuiltActionable = true;\n\n            addDirtyProps(descriptor, ['builder'], [builderDirtyClean]);\n            descriptor.builder = builder;\n\n            return addDirtyProps(descriptor, [{\n                name: lengthName,\n                onDirty: function () {\n                    setDescriptorsDirty({\n                        action: 'size',\n                        descriptors: [descriptor]\n                    });\n                }\n            }, {\n                name: 'hidden',\n                onDirty: function () {\n                    setDescriptorsDirty({\n                        action: 'hide',\n                        descriptors: [descriptor]\n                    });\n                }\n            }], [dirtyClean]);\n        },\n        createBuilder: function (render, update) {\n            return {\n                render: render || noop,\n                update: update || passThrough\n            };\n        }\n\n    };\n\n    // basically height or width\n    api[lengthName] = function (index) {\n        var descriptor = descriptors[index];\n        if (!descriptor) {\n            return NaN;\n        }\n\n\n        if (descriptor.hidden) {\n            return 0;\n        }\n\n        return descriptor[lengthName] || api.defaultSize;\n    };\n\n    // row or col get\n    api[name] = function (index) {\n        return descriptors[index + numHeaders];\n    };\n\n    return api;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/abstract-row-col-model/index.js","module.exports = function(){\n    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/modules/no-op/index.js","module.exports = function (_grid) {\n    var grid = _grid;\n\n    var api = require('../abstract-row-col-model')(grid, 'col', 'width', 100);\n\n    return api;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/col-model/index.js","var util = require('../util');\n\nmodule.exports = function(_grid) {\n    var grid = _grid;\n\n    var cellData = [];\n    var headerData = [];\n    var sortedCol;\n    var ascending;\n    var dirtyClean = require('../dirty-clean')(grid);\n    var internalSet = function(data, r, c, datum) {\n        if (!data[r]) {\n            data[r] = [];\n        }\n        data[r][c] = {\n            value: datum\n        };\n        dirtyClean.setDirty();\n    };\n\n    var api = {\n        isDirty: dirtyClean.isDirty,\n        set: function(r, c, datum) {\n            var data = arguments[0];\n            if (!util.isArray(data)) {\n                if (typeof datum === 'string') {\n                    datum = datum.replace('[rR]', '').replace('[cC]', '').split(' ');\n                }\n                data = [{\n                    row: r,\n                    col: c,\n                    value: datum\n\n                }];\n            }\n            data.forEach(function(change) {\n                internalSet(cellData, change.row, change.col, change.value);\n            });\n        },\n        setHeader: function(r, c, datum) {\n            internalSet(headerData, r, c, datum);\n        },\n        get: function(r, c) {\n            var rowDescriptor = grid.rowModel.row(r);\n            if (!rowDescriptor) {\n                return {\n                    formatted: ''\n                };\n            }\n            var dataRow = cellData[rowDescriptor.dataRow];\n            var datum = dataRow && dataRow[grid.colModel.col(c).dataCol];\n            var value = datum && datum.value;\n            var formatted = value;\n            if (Array.isArray(value)) {\n                formatted = (rowDescriptor.dataLayer ? ' s' + rowDescriptor.dataLayer + ' ' : '') + 'r' + value[0] + ' c' + value[1];\n            }\n            return {\n                value: value,\n                formatted: formatted || ''\n            };\n        },\n        getCopyData: function(r, c) {\n            return api.get(r, c).formatted;\n        },\n        getHeader: function(r, c) {\n            var dataRow = headerData[grid.rowModel.get(r).dataRow];\n\n            var datum = dataRow && dataRow[grid.colModel.get(c).dataCol];\n            var value = datum && datum.value;\n            return {\n                value: value,\n                formatted: value && 'hr' + value[0] + ' hc' + value[1] || ''\n            };\n        },\n\n        toggleSort: function(c) {\n            var retVal = -1;\n            var compareMethod = function(val1, val2) {\n                return val1 < (val2) ? retVal : -1 * retVal;\n            };\n            if (c === sortedCol) {\n                if (ascending) {\n                    retVal = 1;\n                }\n                ascending = !ascending;\n            } else {\n                sortedCol = c;\n                ascending = true;\n            }\n            cellData.sort(function(dataRow1, dataRow2) {\n                if (!dataRow1 || !dataRow1[c]) {\n                    return retVal;\n                }\n                if (!dataRow2 || !dataRow2[c]) {\n                    return retVal * -1;\n                }\n                return compareMethod(dataRow1[c].value, dataRow2[c].value);\n            });\n            dirtyClean.setDirty();\n        }\n    };\n\n    return api;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/simple-data-model/index.js","var util = require('../util');\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n    var model = {};\n\n    //all pixels are assumed to be in the virtual world, no real world pixels are dealt with here :)\n    model.getRow = function (topPx) {\n        if (topPx < 0) {\n            return NaN;\n        }\n        var sumLength = 0;\n        for (var r = 0; r < grid.rowModel.length(true); r++) {\n            sumLength += grid.rowModel.height(r);\n            if (topPx < sumLength) {\n                return r;\n            }\n        }\n        return NaN;\n    };\n\n    //yes these are very similar but there will be differences\n    model.getCol = function (leftPx) {\n        if (leftPx < 0) {\n            return NaN;\n        }\n        var sumLength = 0;\n        for (var c = 0; c < grid.colModel.length(true); c++) {\n            sumLength += grid.colModel.width(c);\n            if (leftPx < sumLength) {\n                return c;\n            }\n        }\n        return NaN;\n    };\n\n\n    function clampRowOrCol(virtualRowCol, rowOrCol) {\n        var maxRowCol = grid[rowOrCol + 'Model'].length(true) - 1;\n        return util.clamp(virtualRowCol, 0, maxRowCol);\n    }\n\n    model.clampRow = function (virtualRow) {\n        return clampRowOrCol(virtualRow, 'row');\n    };\n\n    model.clampCol = function (virtualCol) {\n        return clampRowOrCol(virtualCol, 'col');\n    };\n\n    //for now these just call through to the row and column model, but very likely it will need to include some other calculations\n    model.height = function (virtualRowStart, virtualRowEnd) {\n        return heightOrWidth(virtualRowStart, virtualRowEnd, 'row');\n    };\n\n    model.width = function (virtualColStart, virtualColEnd) {\n        return heightOrWidth(virtualColStart, virtualColEnd, 'col');\n    };\n\n    function heightOrWidth(start, end, rowOrCol) {\n        var length = 0;\n        if (end < start) {\n            return 0;\n        }\n        end = util.isNumber(end) ? end : start;\n        end = clampRowOrCol(end, rowOrCol);\n        start = clampRowOrCol(start, rowOrCol);\n        var lengthModel = grid[rowOrCol + 'Model'];\n        var lengthFn = lengthModel.width || lengthModel.height;\n        for (var i = start; i <= end; i++) {\n            length += lengthFn(i);\n        }\n        return length;\n    }\n\n    model.totalHeight = function () {\n        return model.height(0, grid.rowModel.length(true) - 1);\n    };\n\n    model.totalWidth = function () {\n        return model.width(0, grid.colModel.length(true) - 1);\n    };\n\n    model.fixedHeight = function () {\n        return model.height(0, grid.rowModel.numFixed() - 1);\n    };\n\n    model.fixedWidth = function () {\n        return model.width(0, grid.colModel.numFixed() - 1);\n    };\n\n    function sizeChangeListener() {\n        //for now we don't cache anything about this so we just notify\n        grid.eventLoop.fire('grid-virtual-pixel-cell-change');\n    }\n\n    grid.eventLoop.bind('grid-col-change', sizeChangeListener);\n    grid.eventLoop.bind('grid-row-change', sizeChangeListener);\n\n    return model;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/virtual-pixel-cell-model/index.js","var util = require('../util');\n\nmodule.exports = function(_grid) {\n    var grid = _grid;\n    var dirtyClean = require('../dirty-clean')(grid);\n\n\n    var row;\n    var model = {\n        col: 0\n    };\n    Object.defineProperty(model, 'row', {\n        enumerable: true,\n        get: function() {\n            return row;\n        },\n        set: function(r) {\n            row = r;\n        }\n    });\n    model.row = 0;\n\n    model.isDirty = dirtyClean.isDirty;\n\n    grid.eventLoop.bind('grid-row-change', function(e) {\n        switch (e.action) {\n            case 'remove':\n                model.scrollTo(0, model.col);\n                break;\n        }\n    });\n\n    model.scrollTo = function(r, c, dontFire, fromPixelModel) {\n        if (isNaN(r) || isNaN(c)) {\n            return;\n        }\n        var maxRow = (grid.rowModel.length() || 1) - 1;\n        var maxCol = (grid.colModel.length() || 1) - 1;\n        var lastRow = model.row;\n        var lastCol = model.col;\n        model.row = util.clamp(r, 0, maxRow);\n        model.col = util.clamp(c, 0, maxCol);\n        if (lastRow !== model.row || lastCol !== model.col) {\n            dirtyClean.setDirty();\n\n            if (!dontFire) {\n                grid.eventLoop.fire('grid-cell-scroll');\n            }\n\n            if (!fromPixelModel) {\n                var top = grid.virtualPixelCellModel.height(grid.rowModel.numFixed(), model.row + grid.rowModel.numFixed() - 1);\n                var left = grid.virtualPixelCellModel.width(grid.colModel.numFixed(), model.col + grid.colModel.numFixed() - 1);\n                grid.pixelScrollModel.scrollTo(top, left, true);\n            }\n        }\n    };\n\n    function convertVirtualToScroll(virtualCoord, rowOrCol) {\n        return virtualCoord - grid[rowOrCol + 'Model'].numFixed();\n    }\n\n    function getScrollToRowOrCol(virtualCoord, rowOrCol, heightWidth) {\n        var currentScroll = model[rowOrCol];\n        var scrollTo = currentScroll;\n        if (grid.viewPort[rowOrCol + 'IsInView'](virtualCoord)) {\n            return scrollTo;\n        }\n\n        var targetScroll = convertVirtualToScroll(virtualCoord, rowOrCol);\n        if (targetScroll < currentScroll) {\n            scrollTo = targetScroll;\n        } else if (targetScroll > currentScroll) {\n            var lengthToCell = grid.virtualPixelCellModel[heightWidth](0, virtualCoord);\n            var numFixed = grid[rowOrCol + 'Model'].numFixed();\n            scrollTo = 0;\n            for (var i = numFixed; i < virtualCoord && lengthToCell > grid.viewPort[heightWidth]; i++) {\n                lengthToCell -= grid.virtualPixelCellModel[heightWidth](i);\n                scrollTo = i - (numFixed - 1);\n            }\n        }\n\n        return scrollTo;\n    }\n\n    //for now assumes data space\n    model.scrollIntoView = function(dataRow, dataCol) {\n        dataRow = grid.virtual.row.clamp(grid.data.row.toVirtual(dataRow));\n        dataCol = grid.virtual.col.clamp(grid.data.col.toVirtual(dataCol));\n        var newRow = getScrollToRowOrCol(dataRow, 'row', 'height');\n        var newCol = getScrollToRowOrCol(dataCol, 'col', 'width');\n        model.scrollTo(newRow, newCol);\n    };\n\n\n    return model;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cell-scroll-model/index.js","var customEvent = require('../custom-event');\n\nvar PROPS_TO_COPY_FROM_MOUSE_EVENTS = ['clientX', 'clientY', 'gridX', 'gridY', 'layerX', 'layerY', 'row', 'col', 'realRow', 'realCol', 'virtualRow', 'virtualCol'];\n\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n\n    var model = {};\n\n    var scrollInterval;\n\n    model._annotateEvent = function annotateEvent(e) {\n        /*eslint-disable no-fallthrough*/\n        switch (e.type) {\n            case 'click':\n            case 'dblclick':\n            case 'mousedown':\n            case 'mousemove':\n            case 'mouseup':\n                model._annotateEventInternal(e);\n                break;\n        }\n        /*eslint-enable no-fallthrough*/\n    };\n\n    model._annotateEventFromViewCoords = function (e, viewRow, viewCol) {\n        e.realRow = viewRow;\n        e.realCol = viewCol;\n        e.virtualRow = grid.view.row.toVirtual(e.realRow);\n        e.virtualCol = grid.view.col.toVirtual(e.realCol);\n        e.row = grid.virtual.row.toData(e.virtualRow);\n        e.col = grid.virtual.col.toData(e.virtualCol);\n        return e;\n    };\n\n    model._annotateEventInternal = function (e) {\n        var y = grid.viewPort.toGridY(e.clientY);\n        var x = grid.viewPort.toGridX(e.clientX);\n        var viewRow = grid.viewPort.getRowByTop(y);\n        var viewCol = grid.viewPort.getColByLeft(x);\n        model._annotateEventFromViewCoords(e, viewRow, viewCol);\n        e.gridX = x;\n        e.gridY = y;\n    };\n\n    var lastMoveRow;\n    var lastMoveCol;\n    grid.eventLoop.addInterceptor(function (e) {\n        model._annotateEvent(e);\n        if (e.type === 'mousedown') {\n            if (e.currentTarget === grid.container) {\n                setupDragEventForMouseDown(e);\n            }\n        } else if (e.type === 'mousemove') {\n            if (e.row !== lastMoveRow || e.col !== lastMoveCol) {\n                createAndFireCustomMouseEvent('grid-cell-mouse-move', e);\n                lastMoveRow = e.row;\n                lastMoveCol = e.col;\n            }\n        }\n    });\n\n    function calculateColScrollDiff(e) {\n        var colDiff = 0;\n        if (e.clientX > (grid.container && grid.container.getBoundingClientRect().right || window.innerWidth)) {\n            colDiff = 1;\n        } else if (grid.viewPort.toGridX(e.clientX) < grid.virtualPixelCellModel.fixedWidth()) {\n            colDiff = -1;\n        }\n        return colDiff;\n    }\n\n    function calculateRowScrollDiff(e) {\n        var rowDiff = 0;\n        if (e.clientY > (grid.container && grid.container.getBoundingClientRect().bottom || window.innerHeight)) {\n            rowDiff = 1;\n        } else if (grid.viewPort.toGridY(e.clientY) < grid.virtualPixelCellModel.fixedHeight()) {\n            rowDiff = -1;\n        }\n        return rowDiff;\n    }\n\n    function setupDragEventForMouseDown(downEvent) {\n        var lastDragRow = downEvent.row;\n        var lastDragCol = downEvent.col;\n        var dragStarted = false;\n        var unbindAutoScrollDrag;\n        var lastX = downEvent.clientX;\n        var lastY = downEvent.clientY;\n        var unbindMove = grid.eventLoop.bind('mousemove', window, function (e) {\n\n\n            if (dragStarted && !e.which) {\n                // got a move event without mouse down which means we somehow missed the mouseup\n                console.log('mousemove unbind, how on earth do these happen?');\n                handleMouseUp(e);\n                return;\n            }\n\n            if (!dragStarted) {\n                if (lastX === e.clientX && lastY === e.clientY) {\n                    console.warn('Got a mouse move event with ', e.clientX, ',', e.clientY, ' when the last position was ', lastX, ',', lastY);\n                }\n                createAndFireCustomMouseEvent('grid-drag-start', downEvent, function annotateDragStart(dragStart) {\n                    var onlyFixedRows = !calculateRowScrollDiff(e);\n                    var onlyFixedCols = !calculateColScrollDiff(e);\n                    dragStart.enableAutoScroll = function () {\n                        if (unbindAutoScrollDrag) {\n                            unbindAutoScrollDrag();\n                        }\n                        unbindAutoScrollDrag = grid.eventLoop.bind('grid-drag', function (e) {\n                            // if it gets here then we will try to auto scroll\n                            var newRowDiff = calculateRowScrollDiff(e);\n                            onlyFixedRows = !newRowDiff;\n                            var rowDiff = onlyFixedRows ? 0 : newRowDiff;\n\n\n                            var newColDiff = calculateColScrollDiff;\n                            onlyFixedCols = !newColDiff;\n                            var colDiff = onlyFixedCols ? 0 : newColDiff(e);\n\n                            clearInterval(scrollInterval);\n                            if (rowDiff || colDiff) {\n                                scrollInterval = grid.interval(function () {\n                                    grid.cellScrollModel.scrollTo(grid.cellScrollModel.row + rowDiff, grid.cellScrollModel.col + colDiff);\n                                }, 100);\n                            }\n\n                        });\n                    };\n                });\n                dragStarted = true;\n            }\n\n            createAndFireCustomMouseEvent('grid-drag', e);\n\n            if (e.row !== lastDragRow || e.col !== lastDragCol) {\n                createAndFireCustomMouseEvent('grid-cell-drag', e);\n\n                lastDragRow = e.row;\n                lastDragCol = e.col;\n            }\n\n        });\n\n        var unbindUp = grid.eventLoop.bind('mouseup', window, handleMouseUp);\n\n        function handleMouseUp(e) {\n            clearInterval(scrollInterval);\n            unbindMove();\n            unbindUp();\n            if (unbindAutoScrollDrag) {\n                unbindAutoScrollDrag();\n            }\n\n            var dragEnd = createCustomEventFromMouseEvent('grid-drag-end', e);\n\n            // row, col, x, and y should inherit\n            grid.eventLoop.fire(dragEnd);\n        }\n    }\n\n    function createCustomEventFromMouseEvent(type, e) {\n        var event = customEvent(type, true, true);\n        PROPS_TO_COPY_FROM_MOUSE_EVENTS.forEach(function (prop) {\n            event[prop] = e[prop];\n        });\n        event.originalEvent = e;\n        return event;\n    }\n\n    function createAndFireCustomMouseEvent(type, e, annotateEvent) {\n        var drag = createCustomEventFromMouseEvent(type, e);\n        if (annotateEvent) {\n            drag = annotateEvent(drag) || drag;\n        }\n        if (e.target) {\n            e.target.dispatchEvent(drag);\n        } else {\n            grid.eventLoop.fire(drag);\n        }\n        return drag;\n    }\n\n    return model;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cell-mouse-model/index.js","module.exports = function (name, bubbles, cancelable, detail) {\n    var event = document.createEvent('CustomEvent');  // MUST be 'CustomEvent'\n    event.initCustomEvent(name, bubbles, cancelable, detail);\n    return event;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/custom-event/index.js","var customEvent = require('../custom-event');\n\nmodule.exports = function(_grid) {\n    var grid = _grid;\n\n    var model = {};\n\n    model._annotateEvent = function annotateEvent(e) {\n        /*eslint-disable no-fallthrough*/\n        switch (e.type) {\n            case 'keydown':\n            case 'keypress':\n            case 'keyup':\n                model._annotateEventInternal(e);\n                break;\n        }\n        /*eslint-enable no-fallthrough*/\n    };\n\n    model._annotateEventFromDataCoords = function(e, dataRow, dataCol) {\n        e.realRow = grid.data.row.toView(dataRow);\n        e.realCol = grid.data.col.toView(dataCol);\n        e.virtualRow = grid.data.row.toVirtual(dataRow);\n        e.virtualCol = grid.data.col.toVirtual(dataCol);\n        e.row = dataRow;\n        e.col = dataCol;\n        return e;\n    };\n\n    model._annotateEventInternal = function(e) {\n        var dataRow = grid.navigationModel.focus.row;\n        var dataCol = grid.navigationModel.focus.col;\n        model._annotateEventFromDataCoords(e, dataRow, dataCol);\n    };\n\n    grid.eventLoop.addInterceptor(model._annotateEvent);\n\n    return model;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/cell-keyboard-model/index.js","var timeNow = require('time-now');\n\nmodule.exports = function (grid) {\n\n    var frames = [];\n    var totalTime = 0;\n    var totalFrames = 0;\n    var totalWindowTime = 0;\n    var lastLoopTime;\n    var filteredFrameTime = 0;\n    var filterStrength = 20;\n    var belowThresholdCount = 0;\n    var numCalcs = 0;\n    var filteredAverage;\n    var requestId;\n\n    function addFrameToWindow(frameLength) {\n        if (typeof frameLength !== 'number' || isNaN(frameLength)) {\n            console.warn('passed non number to fps.addFrame()');\n            return;\n        }\n        if (frames.length > fps.windowSize) {\n            totalWindowTime -= frames.shift();\n        }\n        totalWindowTime += frameLength;\n        totalTime += frameLength;\n        totalFrames++;\n        frames.push(frameLength);\n    }\n\n\n    grid.eventLoop.bind('grid-destroy', function () {\n        if (requestId) {\n            cancelAnimationFrame(requestId);\n            requestId = null;\n        }\n    });\n\n    var fps = {\n        threshold: 20,\n        markFrameTime: function () {\n            var nowTime = timeNow();\n            if (lastLoopTime) {\n                var frameLength = nowTime - lastLoopTime;\n                filteredFrameTime += (frameLength - filteredFrameTime) / filterStrength;\n                filteredAverage = 1000 / filteredFrameTime;\n                if (filteredAverage < fps.threshold) {\n                    belowThresholdCount++;\n                }\n                if (fps.allAverages) {\n                    addFrameToWindow(1000 / frameLength);\n                }\n                numCalcs++;\n            }\n            lastLoopTime = nowTime;\n        },\n        windowSize: 60,\n        getMovingAverage: function () {\n            return totalWindowTime / frames.length;\n        },\n        getAllTimeAverage: function () {\n            return totalTime / totalFrames;\n        },\n        getLast: function () {\n            return frames[frames.length - 1];\n        },\n        getFilteredAverage: function () {\n            return filteredAverage;\n        },\n        isBelowThreshold: function () {\n\n        },\n        logging: false,\n        slowCount: 0\n    };\n\n    fps.intervalId = setInterval(function () {\n        fps.percentBelowThreshold = belowThresholdCount / numCalcs * 100;\n        if (fps.percentBelowThreshold > 50) {\n            fps.slowCount++;\n        }\n        if (fps.logging) {\n            console.log('percent below threshold', fps.percentBelowThreshold.toFixed(1), 'filtered average', fps.getFilteredAverage());\n        }\n        belowThresholdCount = 0;\n        numCalcs = 0;\n    }, 1000);\n\n    function fpsMeasure() {\n        if (grid.destroyed) {\n            return;\n        }\n        requestId = requestAnimationFrame(fpsMeasure);\n        fps.markFrameTime();\n    }\n    fpsMeasure();\n\n    return fps;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/fps/index.js","'use strict';\n\nmodule.exports = (function() {\n  var perf = window && window.performance;\n  if (perf && perf.now) {\n    return perf.now.bind(perf);\n  } else {\n    return function() {\n      return new Date().getTime();\n    };\n  }\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/time-now/index.js\n// module id = 30\n// module chunks = 0","var util = require('../util');\nvar rangeUtil = require('../range-util');\nvar capitalize = require('capitalize');\nvar addDirtyProps = require('../add-dirty-props');\nvar debounce = require('../debounce');\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n    var dirtyClean = require('../dirty-clean')(grid);\n    var container;\n\n    var viewPort = addDirtyProps({}, ['rows', 'cols', 'width', 'height'], [dirtyClean]);\n    viewPort.rows = 0;\n    viewPort.cols = 0;\n    viewPort.isDirty = dirtyClean.isDirty;\n\n    // these probably trigger reflow so we may need to think about caching the value and updating it at on draws or something\n    function getFirstClientRect() {\n        return container && container.getClientRects && container.getClientRects() && container.getClientRects()[0] || {};\n    }\n\n    Object.defineProperty(viewPort, 'top', {\n        enumerable: true,\n        get: function () {\n            return getFirstClientRect().top || 0;\n        }\n    });\n\n    Object.defineProperty(viewPort, 'left', {\n        enumerable: true,\n        get: function () {\n            return getFirstClientRect().left || 0;\n        }\n    });\n\n    viewPort.toGridX = function (clientX) {\n        return clientX - viewPort.left;\n    };\n\n    viewPort.toGridY = function (clientY) {\n        return clientY - viewPort.top;\n    };\n\n\n    var fixed = {\n        rows: 0,\n        cols: 0\n    };\n\n    function getFixed(rowOrCol) {\n        return fixed[rowOrCol + 's'];\n    }\n\n    viewPort.sizeToContainer = function (elem) {\n        container = elem;\n        var oldWidth = viewPort.width;\n        var oldHeight = viewPort.height;\n        viewPort.width = elem.offsetWidth;\n        viewPort.height = elem.offsetHeight;\n        viewPort.rows = calculateMaxLengths(viewPort.height, grid.rowModel);\n        viewPort.cols = calculateMaxLengths(viewPort.width, grid.colModel);\n        var event = {};\n        event.type = 'grid-viewport-change';\n        event.isWidthChange = oldWidth !== viewPort.width;\n        event.isHeightChange = oldHeight !== viewPort.height;\n        event.isSizeChange = event.isWidthChange || event.isHeightChange;\n        grid.eventLoop.fire(event);\n    };\n\n    viewPort._onResize = debounce(function () {\n        viewPort._resize();\n    }, 200);\n\n    grid.eventLoop.bind('grid-destroy', function () {\n        clearTimeout(viewPort._onResize.timeout);\n        clearTimeout(shortDebouncedResize.timeout);\n    });\n\n    viewPort._resize = function () {\n        if (container) {\n            viewPort.sizeToContainer(container);\n        }\n    };\n\n    var shortDebouncedResize = debounce(function () {\n        viewPort._resize();\n    }, 1);\n\n    viewPort.shortDebouncedResize = shortDebouncedResize;\n\n\n    grid.eventLoop.bind('resize', window, function () {\n        //we don't bind the handler directly so that tests can mock it out\n        viewPort._onResize();\n    });\n\n    grid.eventLoop.bind('grid-row-change', function () {\n        fixed.rows = grid.rowModel.numFixed();\n        shortDebouncedResize();\n    });\n\n    grid.eventLoop.bind('grid-col-change', function () {\n        fixed.cols = grid.colModel.numFixed();\n        shortDebouncedResize();\n    });\n\n    function convertRealToVirtual(coord, rowOrCol, coordIsVirtual) {\n        // could cache this on changes i.e. row-change or col-change events\n        var numFixed = getFixed(rowOrCol);\n        if (coord < numFixed) {\n            return coord;\n        }\n        return coord + (coordIsVirtual ? -1 : 1) * grid.cellScrollModel[rowOrCol];\n    }\n\n    // converts a viewport row or column to a real row or column\n    // clamps it if the column would be outside the range\n    function getVirtualRowColUnsafe(realCoord, rowOrCol) {\n        return convertRealToVirtual(realCoord, rowOrCol);\n    }\n\n    function getVirtualRowColClamped(viewCoord, rowOrCol) {\n        var virtualRowCol = getVirtualRowColUnsafe(viewCoord, rowOrCol);\n        return grid.virtualPixelCellModel['clamp' + capitalize(rowOrCol)](virtualRowCol);\n    }\n\n    viewPort.toVirtualRow = function (r) {\n        return getVirtualRowColClamped(r, 'row');\n    };\n\n    viewPort.toVirtualCol = function (c) {\n        return getVirtualRowColClamped(c, 'col');\n    };\n\n    function getRealRowColClamped(virtualCoord, rowOrCol) {\n        var numFixed = getFixed(rowOrCol);\n        if (virtualCoord < numFixed) {\n            return virtualCoord;\n        }\n        var maxViewPortIndex = viewPort[rowOrCol + 's'] - 1;\n        return util.clamp(virtualCoord - grid.cellScrollModel[rowOrCol], numFixed, maxViewPortIndex, true);\n    }\n\n    viewPort.rowIsInView = function (virtualRow) {\n        var realRow = viewPort.toRealRow(virtualRow);\n        return !isNaN(realRow) && getLengthBetweenViewCoords(0, realRow, 'row', 'height', true) < viewPort.height;\n    };\n\n    viewPort.colIsInView = function (virtualCol) {\n        var realCol = viewPort.toRealCol(virtualCol);\n        return !isNaN(realCol) && getLengthBetweenViewCoords(0, realCol, 'col', 'width', true) < viewPort.width;\n    };\n\n\n    // default unclamped cause that seems to be the more likely use case converting this direction\n    viewPort.toRealRow = function (virtualRow) {\n        return getRealRowColClamped(virtualRow, 'row');\n    };\n\n    viewPort.toRealCol = function (virtualCol) {\n        return getRealRowColClamped(virtualCol, 'col');\n    };\n\n    viewPort.clampRow = function (r) {\n        return util.clamp(r, 0, viewPort.rows - 1);\n    };\n\n    viewPort.clampCol = function (c) {\n        return util.clamp(c, 0, viewPort.cols - 1);\n    };\n\n    viewPort.clampY = function (y) {\n        return util.clamp(y, 0, viewPort.height);\n    };\n\n    viewPort.clampX = function (x) {\n        return util.clamp(x, 0, viewPort.width);\n    };\n\n    function getLengthBetweenViewCoords(startCoord, endCoord, rowOrCol, heightOrWidth, inclusive) {\n        var rowOrColCap = capitalize(rowOrCol);\n        var toVirtual = viewPort['toVirtual' + rowOrColCap];\n        var lengthFn = grid.virtualPixelCellModel[heightOrWidth];\n        var clampFn = viewPort['clamp' + rowOrColCap];\n        var pos = 0;\n        var numFixed = getFixed(rowOrCol);\n        var isInNonfixedArea = endCoord >= numFixed;\n        var isInFixedArea = startCoord < numFixed;\n        var exclusiveOffset = (inclusive ? 0 : 1);\n        if (isInFixedArea) {\n            var fixedEndCoord = (isInNonfixedArea ? numFixed - 1 : endCoord - exclusiveOffset);\n            pos += lengthFn(startCoord, fixedEndCoord);\n        }\n        if (isInNonfixedArea) {\n            pos += lengthFn((isInFixedArea ? toVirtual(numFixed) : toVirtual(startCoord)), toVirtual(clampFn(endCoord)) - exclusiveOffset);\n        }\n        return pos;\n    }\n\n    function getTopOrLeft(endCoord, rowOrCol, heightOrWidth) {\n        return getLengthBetweenViewCoords(0, endCoord, rowOrCol, heightOrWidth);\n    }\n\n    viewPort.getRowTop = function (viewPortCoord) {\n        return getTopOrLeft(viewPortCoord, 'row', 'height');\n    };\n\n    viewPort.getColLeft = function (viewPortCol) {\n        return getTopOrLeft(viewPortCol, 'col', 'width');\n    };\n\n    viewPort.toPx = function (realCellRange) {\n        return {\n            top: viewPort.getRowTop(realCellRange.top),\n            left: viewPort.getColLeft(realCellRange.left),\n            height: getLengthBetweenViewCoords(realCellRange.top, realCellRange.top + realCellRange.height - 1, 'row', 'height', true),\n            width: getLengthBetweenViewCoords(realCellRange.left, realCellRange.left + realCellRange.width - 1, 'col', 'width', true)\n        };\n    };\n\n    function getRowOrColFromPosition(pos, rowOrCol, heightOrWidth, topOrLeft, returnVirtual) {\n        // we could do this slighly faster with binary search to get log(n) instead of n, but will only do it if we actually need to optimize this\n        var rowOrColCap = capitalize(rowOrCol);\n        var viewMax = viewPort[rowOrCol + 's'];\n        var toVirtual = viewPort['toVirtual' + rowOrColCap];\n        var lengthFn = grid.virtualPixelCellModel[heightOrWidth];\n        var fixed = grid.virtualPixelCellModel['fixed' + capitalize(heightOrWidth)]();\n        var summedLength = grid.viewLayer.getBorderWidth() + (pos <= fixed ? 0 : grid.pixelScrollModel['offset' + capitalize(topOrLeft)]);\n        for (var i = 0; i < viewMax; i++) {\n            var virtual = toVirtual(i);\n            var length = lengthFn(virtual);\n            var newSum = summedLength + length;\n            if (newSum >= pos) {\n                return returnVirtual ? virtual : i;\n            }\n            summedLength = newSum;\n        }\n        return NaN;\n    }\n\n    viewPort.getVirtualRowByTop = function (top) {\n        return getRowOrColFromPosition(top, 'row', 'height', 'top', true);\n    };\n\n    viewPort.getVirtualColByLeft = function (left) {\n        return getRowOrColFromPosition(left, 'col', 'width', 'left', true);\n    };\n\n    viewPort.getRowByTop = function (top) {\n        return getRowOrColFromPosition(top, 'row', 'height', 'top');\n    };\n\n    viewPort.getColByLeft = function (left) {\n        return getRowOrColFromPosition(left, 'col', 'width', 'left');\n    };\n\n    viewPort.getRowHeight = function (viewPortRow) {\n        return grid.virtualPixelCellModel.height(viewPort.toVirtualRow(viewPort.clampRow(viewPortRow)));\n    };\n\n    viewPort.getColWidth = function (viewPortCol) {\n        return grid.virtualPixelCellModel.width(viewPort.toVirtualCol(viewPort.clampCol(viewPortCol)));\n    };\n\n    function intersectRowsOrCols(intersection, range, topOrLeft, rowOrCol, heightOrWidth) {\n        var numFixed = fixed[rowOrCol + 's'];\n        var fixedRange = [0, numFixed];\n\n        var virtualRange = [range[topOrLeft], range[heightOrWidth]];\n        var fixedIntersection = rangeUtil.intersect(fixedRange, virtualRange);\n        var scrollRange = [numFixed, viewPort[rowOrCol + 's'] - numFixed];\n        virtualRange[0] -= grid.cellScrollModel[rowOrCol];\n        var scrollIntersection = rangeUtil.intersect(scrollRange, virtualRange);\n        var resultRange = rangeUtil.union(fixedIntersection, scrollIntersection);\n        if (!resultRange) {\n            return null;\n        }\n\n        intersection[topOrLeft] = resultRange[0];\n        intersection[heightOrWidth] = resultRange[1];\n        return intersection;\n    }\n\n    viewPort.intersect = function (range) {\n        // assume virtual cells for now\n        var intersection = intersectRowsOrCols({}, range, 'top', 'row', 'height');\n        if (!intersection) {\n            return null;\n        }\n        return intersectRowsOrCols(intersection, range, 'left', 'col', 'width');\n    };\n\n\n    function calculateMaxLengths(totalLength, lengthModel) {\n        var lengthMethod = lengthModel.width && grid.virtualPixelCellModel.width || grid.virtualPixelCellModel.height;\n        var numFixed = lengthModel.numFixed();\n        var windowLength = 0;\n        var maxSize = 0;\n        var fixedLength = 0;\n        var windowStartIndex = numFixed;\n\n        for (var fixed = 0; fixed < numFixed; fixed++) {\n            fixedLength += lengthMethod(fixed);\n        }\n\n        var maxLength = 0;\n        for (var index = numFixed; index < lengthModel.length(true); index++) {\n            var lengthOfIindex = lengthMethod(index);\n            if (lengthOfIindex > maxLength) {\n                maxLength = lengthOfIindex;\n            }\n        }\n        totalLength += maxLength;\n\n        // it might be safer to actually sum the lengths in the virtualPixelCellModel but for now here is ok\n        for (var index = numFixed; index < lengthModel.length(true); index++) {\n            var lengthOfIindex = lengthMethod(index);\n            windowLength += lengthOfIindex;\n            while (windowLength + fixedLength > totalLength && windowStartIndex < index) {\n                windowLength -= lengthMethod(windowStartIndex);\n                windowStartIndex++;\n            }\n            var windowSize = index - windowStartIndex + 1; // add the one because we want the last index that didn't fit\n            if (windowSize > maxSize) {\n                maxSize = windowSize;\n            }\n\n        }\n        return Math.min(maxSize + numFixed + 1, grid.virtual[lengthModel.width ? 'col' : 'row'].count());\n    }\n\n\n    viewPort.iterateCells = function (cellFn, optionalRowFn, optionalMaxRow, optionalMaxCol) {\n        optionalMaxRow = optionalMaxRow || Infinity;\n        optionalMaxCol = optionalMaxCol || Infinity;\n        for (var r = 0; r < Math.min(viewPort.rows, optionalMaxRow); r++) {\n            if (optionalRowFn) {\n                optionalRowFn(r);\n            }\n            if (cellFn) {\n                for (var c = 0; c < Math.min(viewPort.cols, optionalMaxCol); c++) {\n                    cellFn(r, c);\n\n                }\n            }\n        }\n    };\n\n    return viewPort;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/view-port/index.js","var customEvent = require('../custom-event');\nvar util = require('../util');\n\n\nmodule.exports = function (_grid) {\n    var viewLayer = {};\n\n    var grid = _grid;\n    var container;\n    var root;\n    var cellContainerTL;\n    var cellContainerTR;\n    var cellContainerBL;\n    var cellContainerBR;\n    var decoratorContainer;\n    var decoratorContainerTL;\n    var decoratorContainerTR;\n    var decoratorContainerBL;\n    var decoratorContainerBR;\n    var borderWidth;\n    var hoveredFixedRow;\n    var hoveredRow;\n\n    var GRID_CELL_CONTAINER_BASE_CLASS = 'grid-cells';\n    var GRID_VIEW_ROOT_CLASS = 'js-grid-view-root';\n    var CELL_CLASS = 'grid-cell';\n\n    var cells; // matrix of rendered cell elements;\n    var rows = {\n        fixed: [],\n        nonFixed: []\n    }; // array of all rendered rows\n    var builtCols; // map from col index to an array of built elements for the column to update on scroll\n    var builtRows; // map from row index to an array of built elements for the row to update on scroll\n\n    // add the cell classes through the standard method\n    grid.cellClasses.add(grid.cellClasses.create(0, 0, CELL_CLASS, Infinity, Infinity, 'virtual'));\n\n    var rowHeaderClasses = grid.cellClasses.create(0, 0, 'grid-header grid-row-header', Infinity, 0, 'virtual');\n    var colHeaderClasses = grid.cellClasses.create(0, 0, 'grid-header grid-col-header', 0, Infinity, 'virtual');\n    var fixedColClasses = grid.cellClasses.create(0, -1, 'grid-last-fixed-col', Infinity, 1, 'virtual');\n    var fixedRowClasses = grid.cellClasses.create(-1, 0, 'grid-last-fixed-row', 1, Infinity, 'virtual');\n\n    grid.cellClasses.add(rowHeaderClasses);\n    grid.cellClasses.add(colHeaderClasses);\n    grid.cellClasses.add(fixedRowClasses);\n    grid.cellClasses.add(fixedColClasses);\n\n\n    grid.eventLoop.bind('grid-col-change', function () {\n        fixedColClasses.left = grid.colModel.numFixed() - 1;\n        rowHeaderClasses.width = grid.colModel.numHeaders();\n    });\n\n    grid.eventLoop.bind('grid-row-change', function () {\n        fixedRowClasses.top = grid.rowModel.numFixed() - 1;\n        colHeaderClasses.height = grid.rowModel.numHeaders();\n    });\n\n    grid.eventLoop.bind('grid-cell-mouse-move', function (e) {\n        var row = rows.fixed[e.realRow];\n        if (!row || !viewLayer.eventIsOnCells(e)) {\n            return;\n        }\n        row.classList.add('hover');\n        if (hoveredFixedRow && hoveredFixedRow !== row) {\n            hoveredFixedRow.classList.remove('hover');\n        }\n        hoveredFixedRow = row;\n        row = rows.nonFixed[e.realRow];\n        if (row) {\n            row.classList.add('hover');\n        }\n        if (hoveredRow && hoveredRow !== row) {\n            hoveredRow.classList.remove('hover');\n        }\n        hoveredRow = row;\n    });\n\n    function makeCellContainer() {\n        var cellContainer = document.createElement('div');\n        cellContainer.setAttribute('dts', 'grid-cells');\n        cellContainer.setAttribute('class', GRID_CELL_CONTAINER_BASE_CLASS);\n        cellContainer.style.zIndex = '';\n        // cellContainer.style.pointerEvents = 'none';\n        return cellContainer;\n    }\n\n    function makeDecoratorContainer() {\n        var decoratorContainer = document.createElement('div');\n        decoratorContainer.setAttribute('dts', 'grid-decorators');\n        util.position(decoratorContainer, 0, 0, 0, 0);\n        decoratorContainer.style.zIndex = '';\n        decoratorContainer.style.pointerEvents = 'none';\n        return decoratorContainer;\n    }\n\n\n    viewLayer.build = function (elem) {\n        cleanup();\n\n        container = elem;\n\n        cellContainerTL = makeCellContainer();\n        cellContainerTL.style.zIndex = 4;\n        cellContainerTR = makeCellContainer();\n        cellContainerTR.style.zIndex = 3;\n        cellContainerBL = makeCellContainer();\n        cellContainerBL.style.zIndex = 3;\n        cellContainerBR = makeCellContainer();\n        cellContainerBR.style.zIndex = 2;\n\n        decoratorContainerTL = makeDecoratorContainer();\n        decoratorContainerTL.style.zIndex = 4;\n        decoratorContainerTR = makeDecoratorContainer();\n        decoratorContainerTR.style.zIndex = 3;\n        decoratorContainerTR.style.overflow = 'hidden';\n        decoratorContainerBL = makeDecoratorContainer();\n        decoratorContainerBL.style.zIndex = 3;\n        decoratorContainerBL.style.overflow = 'hidden';\n        decoratorContainerBR = makeDecoratorContainer();\n        decoratorContainerBR.style.zIndex = 2;\n\n        root = document.createElement('div');\n        root.setAttribute('class', GRID_VIEW_ROOT_CLASS);\n\n        root.appendChild(cellContainerTL);\n        root.appendChild(cellContainerTR);\n        root.appendChild(cellContainerBL);\n        root.appendChild(cellContainerBR);\n\n        root.appendChild(decoratorContainerTL);\n        root.appendChild(decoratorContainerTR);\n        root.appendChild(decoratorContainerBL);\n        root.appendChild(decoratorContainerBR);\n\n        container.appendChild(root);\n\n    };\n\n    function offsetContainerForPixelScroll() {\n        var modTopPixels = grid.pixelScrollModel.offsetTop;\n        var modLeftPixels = grid.pixelScrollModel.offsetLeft;\n\n        var fixedHeight = grid.virtualPixelCellModel.fixedHeight();\n        var fixedWidth = grid.virtualPixelCellModel.fixedWidth();\n        util.position(cellContainerTL, 0, 0, null, null, fixedHeight, fixedWidth);\n        util.position(cellContainerBR, 0, 0, 0, 0);\n        util.position3D(cellContainerBR, modTopPixels, modLeftPixels);\n        util.position(cellContainerTR, 0, 0, null, 0, fixedHeight);\n        util.position3D(cellContainerTR, 0, modLeftPixels);\n        util.position(cellContainerBL, 0, 0, 0, null, null, fixedWidth);\n        util.position3D(cellContainerBL, modTopPixels, 0);\n\n        util.position(decoratorContainerTL, 0, 0, null, null, fixedHeight, fixedWidth);\n        util.position(decoratorContainerBR, 0, 0, 0, 0);\n        util.position3D(decoratorContainerBR, modTopPixels, modLeftPixels);\n        util.position(decoratorContainerTR, 0, fixedWidth, null, 0, null, null);\n        util.position3D(decoratorContainerTR, 0, 0);\n        util.position(decoratorContainerBL, fixedHeight, 0, 0, null, null, null);\n        util.position3D(decoratorContainerBL, 0, 0);\n        grid.decorators.getAlive().forEach(function (decorator) {\n            var decoratorTopOffset = 0;\n            var decoratorLeftOffset = 0;\n            if (decorator.scrollVert && !decorator.scrollHorz) {\n                decoratorTopOffset = fixedHeight - modTopPixels;\n            } else if (decorator.scrollHorz && !decorator.scrollVert) {\n                decoratorLeftOffset = fixedWidth - modLeftPixels;\n            }\n\n            if (decorator.fixed) {\n                if (decorator.scrollVert) {\n                    decoratorTopOffset += modTopPixels;\n                }\n                if (decorator.scrollHorz) {\n                    decoratorLeftOffset += modLeftPixels;\n                }\n            }\n            if (decorator.boundingBox) {\n                decorator.boundingBox.style.marginTop = -1 * decoratorTopOffset + 'px';\n                decorator.boundingBox.style.marginLeft = -1 * decoratorLeftOffset + 'px';\n            }\n\n        });\n    }\n\n    function measureBorderWidth() {\n        // read the border width, for the rare case of larger than 1px borders, otherwise the draw will default to 1\n        if (borderWidth) {\n            return;\n        }\n        var jsGridCell = cells[0] && cells[0][0];\n        if (jsGridCell) {\n            var oldClass = jsGridCell.className;\n            jsGridCell.className = CELL_CLASS;\n            var computedStyle = getComputedStyle(jsGridCell);\n            var borderWidthProp = computedStyle.getPropertyValue('border-left-width');\n            borderWidth = parseInt(borderWidthProp);\n            jsGridCell.className = oldClass;\n        }\n        borderWidth = isNaN(borderWidth) || !borderWidth ? undefined : borderWidth;\n        return borderWidth;\n    }\n\n    // only draw once per js turn, may need to create a synchronous version\n    // viewLayer.draw = debounce(function () {\n    //     viewLayer._draw();\n    // }, 1);\n    var drawRequestedId = false;\n    viewLayer.draw = function () {\n        if (!drawRequestedId) {\n            drawRequestedId = requestAnimationFrame(viewLayer._draw);\n        }\n    };\n\n    viewLayer._draw = function () {\n        drawRequestedId = undefined;\n        // return if we haven't built yet\n        if (!container || grid.destroyed) {\n            return;\n        }\n\n\n        if (!grid.opts.snapToCell && grid.fps.slowCount > 10) {\n            grid.opts.snapToCell = true;\n        }\n\n        var rebuilt = grid.viewPort.isDirty();\n        if (rebuilt) {\n            viewLayer._buildCells();\n        }\n\n        var builtColsDirty = grid.colModel.areBuildersDirty();\n        if (rebuilt || builtColsDirty) {\n            viewLayer._buildCols();\n        }\n\n        var builtRowsDirty = grid.rowModel.areBuildersDirty();\n        if (rebuilt || builtRowsDirty) {\n            viewLayer._buildRows();\n        }\n\n        var cellsPositionOrSizeChanged = grid.colModel.isDirty() || grid.rowModel.isDirty() || grid.cellScrollModel.isDirty();\n\n        if (grid.cellClasses.isDirty() || rebuilt || cellsPositionOrSizeChanged) {\n            viewLayer._drawCellClasses();\n        }\n\n        var drawingCells = rebuilt || cellsPositionOrSizeChanged || builtColsDirty || builtRowsDirty || grid.dataModel.isDirty();\n        if (drawingCells) {\n            viewLayer._drawCells();\n        }\n\n        var drawingDecorators = grid.decorators.isDirty() || rebuilt || cellsPositionOrSizeChanged;\n        if (drawingDecorators) {\n            viewLayer._drawDecorators(cellsPositionOrSizeChanged || rebuilt);\n        }\n\n        if (grid.pixelScrollModel.isOffsetDirty() || drawingDecorators) {\n            offsetContainerForPixelScroll();\n        }\n\n        grid.eventLoop.fire('grid-draw');\n    };\n\n    /* CELL LOGIC */\n    function getBorderWidth() {\n        return borderWidth || 1;\n    }\n\n    viewLayer.getBorderWidth = getBorderWidth;\n\n    viewLayer._drawCells = function () {\n        measureBorderWidth();\n        var bWidth = getBorderWidth();\n        var headerRows = grid.rowModel.numHeaders();\n        var headerCols = grid.colModel.numHeaders();\n        var totalVisibleCellWidth = 0;\n        var lastVirtualCol;\n        var lastVirtualRow;\n        // these get calculated once per col and are then cached to save a factor of numRows calls per column\n        var widths = [];\n        var lefts = [];\n        var virtualCols = [];\n\n        function positionRow(row, height, top, virtualRow) {\n            if (!row) {\n                return;\n            }\n            // seeing the same virtual row twice means we've been clamped and it's time to hide the row\n            if (height === 0 || lastVirtualRow === virtualRow) {\n                row.style.display = 'none';\n                return;\n            }\n            row.style.display = '';\n            row.style.height = height + bWidth + 'px';\n            row.style.top = top + 'px';\n        }\n\n        grid.viewPort.iterateCells(function drawCell(r, c) {\n            var cell = cells[r][c];\n            // only calculate these once per column since they can't change during draw\n            var width = widths[c] || (widths[c] = grid.viewPort.getColWidth(c));\n            var virtualCol = virtualCols[c] || (virtualCols[c] = grid.viewPort.toVirtualCol(c));\n            // if we got the same vCol we've been clamped and its time to hide this cell\n            // also hide the cell if its width is zero cause ya...\n            if (width === 0 || virtualCol === lastVirtualCol) {\n                cell.style.display = 'none';\n                return;\n            }\n            if (r === 0) {\n                // calculate width for rows later but only do it one time (so on the first row)\n                totalVisibleCellWidth += width;\n            }\n\n            lastVirtualCol = virtualCol;\n            cell.style.display = '';\n            cell.style.width = width + bWidth + 'px';\n            // only calculate these once per column since they can't change during draw\n            var left = lefts[c] || (lefts[c] = grid.viewPort.getColLeft(c));\n\n            cell.style.left = left + 'px';\n\n\n            var virtualRow = grid.viewPort.toVirtualRow(r);\n\n            var data;\n            if (r < headerRows || c < headerCols) {\n                data = grid.dataModel.getHeader(virtualRow, virtualCol);\n            } else {\n                data = grid.dataModel.get(grid.rowModel.toData(virtualRow), grid.colModel.toData(virtualCol));\n            }\n            // artificially only get builders for row headers for now\n            var builder = virtualRow < headerRows && grid.rowModel.get(virtualRow).builder || undefined;\n            var hasRowBuilder = true;\n            if (!builder) {\n                hasRowBuilder = false;\n                builder = grid.colModel.get(virtualCol).builder;\n            }\n\n            var cellChild;\n            if (builder) {\n                var builtElem;\n                if (hasRowBuilder) {\n                    builtElem = builtRows[virtualRow][c];\n                } else {\n                    builtElem = builtCols[virtualCol][r];\n                }\n                cellChild = builder.update(builtElem, {\n                    virtualCol: virtualCol,\n                    virtualRow: virtualRow,\n                    data: data\n                });\n            }\n            // if we didn't get a child from the builder use a regular text node\n            if (!cellChild) {\n                viewLayer.setTextContent(cell, data.formatted);\n            } else {\n                var notSameElem = cell.firstChild !== cellChild;\n                if (cell.firstChild && notSameElem) {\n                    cell.removeChild(cell.firstChild);\n                }\n                if (notSameElem) {\n                    cell.appendChild(cellChild);\n                }\n\n            }\n        }, function drawRow(r) {\n            var height = grid.viewPort.getRowHeight(r);\n            var virtualRow = grid.view.row.toVirtual(r);\n            var top = grid.viewPort.getRowTop(r);\n            positionRow(rows.fixed[r], height, top, virtualRow);\n            positionRow(rows.nonFixed[r], height, top, virtualRow);\n            lastVirtualRow = virtualRow;\n        });\n\n\n        rows.nonFixed.forEach(function (row) {\n            row.style.width = totalVisibleCellWidth + 'px';\n        });\n        rows.fixed.forEach(function (row) {\n            row.style.width = grid.virtualPixelCellModel.fixedWidth() + 'px';\n        });\n\n        if (grid.cellScrollModel.row % 2) {\n            cellContainerBR.className = GRID_CELL_CONTAINER_BASE_CLASS + ' odds';\n            cellContainerBL.className = GRID_CELL_CONTAINER_BASE_CLASS + ' odds';\n        } else {\n            doToAllCellContainers(function (cellContainer) {\n                cellContainer.className = GRID_CELL_CONTAINER_BASE_CLASS;\n            });\n\n        }\n    };\n\n    function clearCellContainer(cellContainer) {\n        while (cellContainer.firstChild) {\n            cellContainer.removeChild(cellContainer.firstChild);\n        }\n    }\n\n    function doToAllCellContainers(fn) {\n        fn(cellContainerTL);\n        fn(cellContainerTR);\n        fn(cellContainerBL);\n        fn(cellContainerBR);\n    }\n\n    function getCellContainer(r, c) {\n        var fixedRow = r < grid.rowModel.numFixed();\n        var fixedCol = c < grid.colModel.numFixed();\n        if (fixedRow && fixedCol) {\n            return cellContainerTL;\n        } else if (fixedRow) {\n            return cellContainerTR;\n        } else if (fixedCol) {\n            return cellContainerBL;\n        }\n        return cellContainerBR;\n    }\n\n    function buildRow(r) {\n        var row = document.createElement('div');\n        row.setAttribute('class', 'grid-row');\n        row.setAttribute('dts', 'grid-row');\n        row.style.position = 'absolute';\n        row.style.left = 0;\n        if (r < grid.rowModel.numHeaders()) {\n            row.classList.add('grid-is-header');\n        }\n        return row;\n    }\n\n    viewLayer._buildCells = function buildCells() {\n\n        doToAllCellContainers(clearCellContainer);\n\n        cells = [];\n        rows.fixed = [];\n        rows.nonFixed = [];\n        var row;\n        grid.viewPort.iterateCells(function (r, c) {\n            if (c === 0) {\n                cells[r] = [];\n            }\n            if (c === grid.colModel.numFixed()) {\n                row = rows.nonFixed[r] = buildRow(r);\n            } else if (c === 0) {\n                row = rows.fixed[r] = buildRow(r);\n            }\n            var cell = buildDivCell();\n            cells[r][c] = cell;\n            row.appendChild(cell);\n            getCellContainer(r, c).appendChild(row);\n        });\n    };\n\n    function buildDivCell() {\n        var cell = document.createElement('div');\n        cell.setAttribute('dts', 'grid-cell');\n        var style = cell.style;\n        style.position = 'absolute';\n        style.boxSizing = 'border-box';\n        style.top = '0px';\n        style.bottom = '0px';\n        return cell;\n    }\n\n    /* END CELL LOGIC */\n\n    /* COL BUILDER LOGIC */\n\n    function destroyRenderedElems(oldElems) {\n        if (!oldElems) {\n            return;\n        }\n        oldElems.forEach(function (oldElem) {\n            if (!oldElem) {\n                return;\n            }\n            var destroyEvent = customEvent('grid-rendered-elem-destroy', true);\n            oldElem.dispatchEvent(destroyEvent);\n        });\n    }\n\n    viewLayer._buildCols = function () {\n        var previouslyBuiltCols = builtCols;\n        builtCols = {};\n        for (var c = 0; c < grid.colModel.length(true); c++) {\n            var builder = grid.colModel.get(c).builder;\n            var oldElems = previouslyBuiltCols && previouslyBuiltCols[c];\n\n            if (builder) {\n                builtCols[c] = [];\n                destroyRenderedElems(oldElems);\n                for (var realRow = 0; realRow < grid.viewPort.rows; realRow++) {\n                    builtCols[c][realRow] = builder.render({\n                        viewRow: realRow,\n                        previousElement: oldElems && oldElems[realRow]\n                    });\n                }\n            }\n        }\n    };\n    /* END COL BUILDER LOGIC */\n\n    /* ROW BUILDER LOGIC\n     *  for now we only build headers\n     * */\n\n    viewLayer._buildRows = function () {\n        var previouslyBuiltRows = builtRows;\n        builtRows = {};\n        for (var r = 0; r < grid.rowModel.numHeaders(); r++) {\n            var builder = grid.rowModel.get(r).builder;\n            var oldElems = previouslyBuiltRows && previouslyBuiltRows[r];\n\n            if (builder) {\n                builtRows[r] = [];\n                destroyRenderedElems(oldElems);\n                for (var realCol = 0; realCol < grid.viewPort.cols; realCol++) {\n                    builtRows[r][realCol] = builder.render({\n                        viewCol: realCol,\n                        previousElement: oldElems && oldElems[realCol]\n                    });\n                }\n            }\n        }\n    };\n    /* END ROW BUILDER LOGIC*/\n\n    /* DECORATOR LOGIC */\n    function setPosition(boundingBox, top, left, height, width) {\n        var style = boundingBox.style;\n        if (height <= 0 || width <= 0) {\n            style.display = 'none';\n            return false;\n        }\n        style.display = ''\n        style.top = top + 'px';\n        style.left = left + 'px';\n        style.height = height + 'px';\n        style.width = width + 'px';\n        style.position = 'absolute';\n    }\n\n    function positionDecorator(bounding, t, l, h, w) {\n        return setPosition(bounding, t, l, util.clamp(h, 0, grid.viewPort.height), util.clamp(w, 0, grid.viewPort.width));\n    }\n\n    function positionCellDecoratorFromViewCellRange(realCellRange, boundingBox) {\n        var realPxRange = grid.viewPort.toPx(realCellRange);\n        return positionDecorator(boundingBox, realPxRange.top, realPxRange.left, realPxRange.height && realPxRange.height + getBorderWidth(), realPxRange.width && realPxRange.width + getBorderWidth());\n    }\n\n    function createRangeForDescriptor(descriptor) {\n        var range = {\n            top: descriptor.top,\n            left: descriptor.left,\n            height: descriptor.height,\n            width: descriptor.width\n        };\n        if (descriptor.space === 'data' && descriptor.units === 'cell') {\n            range.top += grid.rowModel.numHeaders();\n            range.left += grid.colModel.numHeaders();\n        }\n        return range;\n    }\n\n    viewLayer._drawDecorators = function (cellsPositionOrSizeChanged) {\n        var aliveDecorators = grid.decorators.getAlive();\n        aliveDecorators.forEach(function (decorator) {\n\n            var boundingBox = decorator.boundingBox;\n            var hasBeenRendered = !!boundingBox;\n            if (!hasBeenRendered) {\n                boundingBox = document.createElement('div');\n                boundingBox.style.pointerEvents = 'none';\n                decorator.boundingBox = boundingBox;\n                var decElement = decorator.render();\n                if (decElement) {\n                    boundingBox.appendChild(decElement);\n                }\n            }\n\n            if (decorator.isDirty() || cellsPositionOrSizeChanged || !hasBeenRendered) {\n\n                var vCol = decorator.left;\n                var vRow = decorator.top;\n                if (decorator.space === 'real') {\n                    vCol = grid.view.col.toVirtual(vCol);\n                    vRow = grid.view.row.toVirtual(vRow);\n                    switch (decorator.units) {\n                        case 'px':\n                            positionDecorator(boundingBox, decorator.top, decorator.left, decorator.height, decorator.width);\n                            break;\n                        case 'cell':\n                            positionCellDecoratorFromViewCellRange(decorator, boundingBox);\n                            break;\n                    }\n                } else if (decorator.space === 'virtual' || decorator.space === 'data') {\n                    if (decorator.space === 'data') {\n                        vCol = grid.data.col.toVirtual(vCol);\n                        vRow = grid.data.row.toVirtual(vRow);\n                    }\n                    switch (decorator.units) {\n                        case 'px':\n                            break;\n                        case 'cell':\n                            /* jshint -W086 */\n                        default:\n                            var range = createRangeForDescriptor(decorator);\n                            var realCellRange = grid.viewPort.intersect(range);\n                            if (realCellRange) {\n                                positionCellDecoratorFromViewCellRange(realCellRange, boundingBox);\n                            } else {\n                                positionDecorator(boundingBox, -1, -1, -1, -1);\n                            }\n                            break;\n                            /* jshint +W086 */\n                    }\n                }\n\n                var parent = boundingBox.parentElement;\n                if (parent) {\n                    parent.removeChild(boundingBox);\n                }\n                var fixedRow = vRow < grid.rowModel.numFixed();\n                var fixedCol = vCol < grid.colModel.numFixed();\n                if (fixedRow && fixedCol) {\n                    decorator.scrollHorz = false;\n                    decorator.scrollVert = false;\n                    decoratorContainerTL.appendChild(boundingBox);\n                } else if (fixedRow) {\n                    decorator.scrollHorz = true;\n                    decorator.scrollVert = false;\n                    decoratorContainerTR.appendChild(boundingBox);\n                } else if (fixedCol) {\n                    decorator.scrollHorz = false;\n                    decorator.scrollVert = true;\n                    decoratorContainerBL.appendChild(boundingBox);\n                } else {\n                    decorator.scrollHorz = true;\n                    decorator.scrollVert = true;\n                    decoratorContainerBR.appendChild(boundingBox);\n                }\n            }\n        });\n\n        removeDecorators(grid.decorators.popAllDead());\n    };\n\n    function removeDecorators(decorators) {\n        decorators.forEach(function (decorator) {\n            if (!decorator) {\n                return;\n            }\n            var boundingBox = decorator.boundingBox;\n            if (boundingBox) {\n                // if they rendered an element previously we attached it to the bounding box as the only child\n                var renderedElement = boundingBox.firstChild;\n                if (renderedElement) {\n                    // create a destroy dom event that bubbles\n                    var destroyEvent = customEvent('decorator-destroy', true);\n                    renderedElement.dispatchEvent(destroyEvent);\n                }\n                var parent = boundingBox.parentElement;\n                if (parent) {\n                    parent.removeChild(boundingBox);\n                }\n                decorator.boundingBox = undefined;\n            }\n        });\n    }\n\n    /* END DECORATOR LOGIC */\n\n    /* CELL CLASSES LOGIC */\n    viewLayer._drawCellClasses = function () {\n        grid.viewPort.iterateCells(function (r, c) {\n            var classes = grid.cellClasses.getCachedClasses(grid.view.row.toVirtual(r), grid.view.col.toVirtual(c));\n            cells[r][c].className = classes.join(' ');\n        });\n    };\n\n    /* END CELL CLASSES LOGIC*/\n\n    viewLayer.eventIsOnCells = function (e) {\n        var target = e.target;\n\n        if (!target) {\n            return false;\n        }\n        if (target.classList && target.classList.contains('grid-cell') || target === grid.textarea) {\n            // on an actual grid-cell\n            return true;\n        }\n\n        var renderedColElement = builtCols && builtCols[e.realCol];\n        var renderedRowElement = builtRows && builtRows[e.realRow];\n\n        if (renderedColElement && !grid.view.col.get(e.realCol).isBuiltActionable) {\n            var elem = renderedColElement[e.realRow];\n            return isTargetInElem(target, elem);\n        } else if (renderedRowElement && !grid.view.row.get(e.realRow).isBuiltActionable) {\n            var elem = renderedRowElement[e.realCol];\n            return isTargetInElem(target, elem);\n        }\n\n        return false;\n    }\n\n    viewLayer.setTextContent = function (elem, text) {\n        if (elem.firstChild && elem.firstChild.nodeType === 3) {\n            elem.firstChild.nodeValue = text;\n        } else {\n            elem.textContent = text;\n        }\n    };\n\n    function destroyPreviouslyBuilt(built) {\n        if (!built) {\n            return;\n        }\n        Object.keys(built).forEach(function (key) {\n            destroyRenderedElems(built[key]);\n        });\n    }\n\n    function cleanup() {\n        removeDecorators(grid.decorators.getAlive().concat(grid.decorators.popAllDead()));\n        destroyPreviouslyBuilt(builtCols);\n        destroyPreviouslyBuilt(builtRows);\n        if (!container) {\n            return;\n        }\n        var querySelectorAll = container.querySelectorAll('.' + GRID_VIEW_ROOT_CLASS);\n        for (var i = 0; i < querySelectorAll.length; ++i) {\n            var root = querySelectorAll[i];\n            container.removeChild(root);\n        }\n    }\n\n    function isTargetInElem(target, elem) {\n        var t = target;\n        while (t && t.classList && !t.classList.contains('grid-container')) {\n            if (t === elem) {\n                return true;\n            }\n            t = t.parentElement;\n        }\n        return false;\n    }\n\n    grid.eventLoop.bind('grid-destroy', function () {\n        cleanup();\n        if (drawRequestedId) {\n            cancelAnimationFrame(drawRequestedId);\n        }\n        viewLayer.draw = require('../no-op');\n    });\n\n    return viewLayer;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/view-layer/index.js","var elementClass = require('element-class');\nvar util = require('../util');\nvar ctrlOrCmd = require('../ctrl-or-cmd');\nvar key = require('key');\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n    var api = {};\n    var wasSelectedAtMousedown\n\n    function isTargetingColHeader(e) {\n        return e && e.row < 0;\n    }\n\n    api._onMousedown = function (e) {\n        if (!isTargetingColHeader(e)) {\n            return;\n        }\n\n        var colDescriptor = grid.data.col.get(e.col);\n        wasSelectedAtMousedown = colDescriptor && !!colDescriptor.selected;\n        if (wasSelectedAtMousedown && !ctrlOrCmd(e)) {\n            grid.eventLoop.stopBubbling(e);\n        }\n    }\n\n    api._onDragStart = function (e) {\n\n        if (!isTargetingColHeader(e) || e.realCol < grid.colModel.numFixed() || !wasSelectedAtMousedown) {\n            return;\n        }\n\n        var colDescriptor = grid.view.col.get(e.realCol);\n        if (!colDescriptor || colDescriptor.selectable === false) {\n            return;\n        }\n        if (e.enableAutoScroll) {\n            e.enableAutoScroll();\n        }\n        // we want to be the only draggers\n        grid.eventLoop.stopBubbling(e);\n\n        var startCol = e.virtualCol;\n\n        // create the target line\n        api._targetCol = grid.decorators.create(0, undefined, Infinity, 1, 'cell', 'real');\n        api._targetCol.postRender = function (div) {\n            div.setAttribute('class', 'grid-reorder-target');\n            api._targetCol._renderedElem = div;\n        };\n        grid.decorators.add(api._targetCol);\n\n        // create a decorator for each selected col\n        var selected = grid.colModel.getSelected();\n        api._dragRects = selected.map(function (dataCol) {\n            var viewCol = grid.data.col.toView(dataCol);\n            var dragRect = grid.decorators.create(0, undefined, Infinity, undefined, 'px', 'real');\n            dragRect.fixed = true;\n            dragRect.colOffset = e.gridX - grid.viewPort.getColLeft(viewCol);\n            dragRect.postRender = function (div) {\n                div.setAttribute('class', 'grid-drag-rect');\n            };\n            dragRect.width = grid.viewPort.getColWidth(viewCol);\n            return dragRect;\n        });\n\n        grid.decorators.add(api._dragRects);\n\n        api._unbindKeyDown = grid.escapeStack.add(removeDecoratorsAndUnbind);\n\n        api._unbindDrag = grid.eventLoop.bind('grid-drag', function (e) {\n            api._dragRects.forEach(function (dragRect) {\n                dragRect.left = util.clamp(e.gridX - dragRect.colOffset, grid.viewPort.getColLeft(grid.colModel.numFixed()), Infinity);\n            });\n            api._targetCol.left = util.clamp(e.realCol, grid.colModel.numFixed(), Infinity);\n            api._targetCol.moveAfter = e.realCol > startCol;\n            if (api._targetCol.moveAfter) {\n                elementClass(api._targetCol._renderedElem).add('right');\n            } else {\n                elementClass(api._targetCol._renderedElem).remove('right');\n            }\n        });\n\n        api._unbindDragEnd = grid.eventLoop.bind('grid-drag-end', function () {\n            var targetCol = api._targetCol.left;\n\n            grid.colModel.move(selected.map(function (dataCol) {\n                return grid.data.col.toVirtual(dataCol);\n            }), grid.viewPort.toVirtualCol(targetCol), api._targetCol.moveAfter);\n\n            removeDecoratorsAndUnbind();\n        });\n\n        function removeDecoratorsAndUnbind() {\n            var removedDecs = api._dragRects.concat(api._targetCol);\n            grid.decorators.remove(removedDecs);\n            api._unbindDrag();\n            api._unbindDragEnd();\n            api._unbindKeyDown && api._unbindKeyDown();\n            return true; // for the escape stack\n        }\n    };\n\n    grid.eventLoop.bind('grid-drag-start', api._onDragStart);\n    grid.eventLoop.addInterceptor(function (e) {\n        if (e.type === 'mousedown') {\n            api._onMousedown(e);\n        }\n    });\n\n    return api;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/col-reorder/index.js","module.exports = function (e) {\n    return (window.navigator.userAgent.match(/win/i) ? e.ctrlKey : e.metaKey)\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/ctrl-or-cmd/index.js","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var isRef, iterator, key,\n    _this = this,\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    __hasProp = {}.hasOwnProperty;\n\n  isRef = require('./ref').isRef;\n\n  key = {};\n\n  key.code = {\n    special: require('./code/special'),\n    arrow: require('./code/arrow'),\n    punctuation: require('./code/punctuation'),\n    alnum: require('./code/alnum'),\n    brand: require('./code/brand')\n  };\n\n  key.get = function(pressed) {\n    return iterator(key.code, pressed);\n  };\n\n  key.is = function(ref, pressed) {\n    if (!isRef(ref)) {\n      ref = iterator(ref, pressed);\n    }\n    if (isRef(ref)) {\n      if (isRef(pressed)) {\n        return pressed === ref;\n      } else {\n        return pressed === ref.code || __indexOf.call(ref.code, pressed) >= 0;\n      }\n    } else {\n      return pressed === ref;\n    }\n  };\n\n  iterator = function(context, pressed) {\n    var i, out, ref;\n    for (i in context) {\n      if (!__hasProp.call(context, i)) continue;\n      ref = context[i];\n      if (isRef(ref)) {\n        if (key.is(ref, pressed)) {\n          return ref;\n        }\n      } else {\n        out = iterator(ref, pressed);\n        if (isRef(out)) {\n          return out;\n        }\n      }\n    }\n  };\n\n  if (typeof window !== 'undefined') {\n    window.key = key;\n  }\n\n  module.exports = key;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/key/lib/key.js\n// module id = 35\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var Reference, assertRef, isRef, ref;\n\n  Reference = (function() {\n\n    function Reference(name, code) {\n      this.name = name;\n      this.code = code;\n    }\n\n    return Reference;\n\n  })();\n\n  ref = function(name, code) {\n    return new Reference(name, code);\n  };\n\n  isRef = function(ref) {\n    return ref instanceof Reference;\n  };\n\n  assertRef = function(ref) {\n    if (!isRef(ref)) {\n      throw new Error('Invalid reference');\n    }\n    return ref;\n  };\n\n  module.exports = {\n    ref: ref,\n    isRef: isRef,\n    assertRef: assertRef\n  };\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/key/lib/ref.js\n// module id = 36\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var ref, special;\n\n  ref = require('../ref').ref;\n\n  special = {\n    backspace: ref('Backspace', 8),\n    tab: ref('Tab', 9),\n    enter: ref('Enter', 13),\n    shift: ref('Shift', 16),\n    ctrl: ref('Ctrl', 17),\n    alt: ref('Alt', 18),\n    caps: ref('Caps Lock', 20),\n    esc: ref('Escape', 27),\n    space: ref('Space', 32),\n    num: ref('Num Lock', 144)\n  };\n\n  module.exports = special;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/key/lib/code/special.js\n// module id = 37\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var arrow, ref;\n\n  ref = require('../ref').ref;\n\n  arrow = {\n    left: ref('Left', 37),\n    up: ref('Up', 38),\n    right: ref('Right', 39),\n    down: ref('Down', 40)\n  };\n\n  module.exports = arrow;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/key/lib/code/arrow.js\n// module id = 38\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var punctuation, ref;\n\n  ref = require('../ref').ref;\n\n  punctuation = {\n    colon: ref('Colon/Semicolon', [59, 186]),\n    equal: ref('Equal/Plus', [61, 187]),\n    comma: ref('Comma/Less Than', [44, 188]),\n    hyphen: ref('Hyphen/Underscore', [45, 109, 189]),\n    period: ref('Period/Greater Than', [46, 190]),\n    tilde: ref('Tilde/Back Tick', [96, 192]),\n    apostrophe: ref('Apostrophe/Quote', [39, 222]),\n    slash: {\n      forward: ref('Forward Slash/Question Mark', [47, 191]),\n      backward: ref('Backward Slash/Pipe', 220)\n    },\n    brace: {\n      square: {\n        open: ref('Open Square/Curly Brace', 219),\n        close: ref('Close Square/Curly Brace', 221)\n      }\n    }\n  };\n\n  punctuation.semicolon = punctuation.colon;\n\n  punctuation.plus = punctuation.equal;\n\n  punctuation.lessthan = punctuation.comma;\n\n  punctuation.underscore = punctuation.hyphen;\n\n  punctuation.greaterthan = punctuation.period;\n\n  punctuation.question = punctuation.slash.forward;\n\n  punctuation.backtick = punctuation.tilde;\n\n  punctuation.pipe = punctuation.slash.backward;\n\n  punctuation.quote = punctuation.apostrophe;\n\n  punctuation.brace.curly = punctuation.brace.square;\n\n  module.exports = punctuation;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/key/lib/code/punctuation.js\n// module id = 39\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var alnum, ref;\n\n  ref = require('../ref').ref;\n\n  alnum = {\n    '0': ref('0', 48),\n    '1': ref('1', 49),\n    '2': ref('2', 50),\n    '3': ref('3', 51),\n    '4': ref('4', 52),\n    '5': ref('5', 53),\n    '6': ref('6', 54),\n    '7': ref('7', 55),\n    '8': ref('8', 56),\n    '9': ref('9', 57),\n    a: ref('A', 65),\n    b: ref('B', 66),\n    c: ref('C', 67),\n    d: ref('D', 68),\n    e: ref('E', 69),\n    f: ref('F', 70),\n    g: ref('G', 71),\n    h: ref('H', 72),\n    i: ref('I', 73),\n    j: ref('J', 74),\n    k: ref('K', 75),\n    l: ref('L', 76),\n    m: ref('M', 77),\n    n: ref('N', 78),\n    o: ref('O', 79),\n    p: ref('P', 80),\n    q: ref('Q', 81),\n    r: ref('R', 82),\n    s: ref('S', 83),\n    t: ref('T', 84),\n    u: ref('U', 85),\n    v: ref('V', 86),\n    w: ref('W', 87),\n    x: ref('X', 88),\n    y: ref('Y', 89),\n    z: ref('Z', 90)\n  };\n\n  module.exports = alnum;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/key/lib/code/alnum.js\n// module id = 40\n// module chunks = 0","// Generated by CoffeeScript 1.3.3\n(function() {\n  'use strict';\n\n  var brand, ref;\n\n  ref = require('../ref').ref;\n\n  brand = {\n    apple: ref('Apple &#8984;', 224),\n    windows: {\n      start: ref('Windows start', [91, 92]),\n      menu: ref('Windows menu', 93)\n    }\n  };\n\n  module.exports = brand;\n\n}).call(this);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/key/lib/code/brand.js\n// module id = 41\n// module chunks = 0","var key = require('key');\nvar clickOff = require('click-off');\n\nmodule.exports = function (grid) {\n    var editModel = {\n        editing: false,\n        _defaultDecorator: grid.decorators.create(-1, -1, 1, 1)\n    };\n\n    editModel._defaultDecorator.render = function () {\n        var element = document.createElement('textarea');\n        element.style.pointerEvents = 'all';\n        element.style.zIndex = 1;\n        element.style.position = 'relative';\n        grid.eventLoop.bindOnce('grid-draw', function () {\n            element.value = editModel._defaultDecorator.typedText() || grid.dataModel.get(editModel._defaultDecorator.top, editModel._defaultDecorator.left).formatted;\n            element.focus();\n        });\n        editModel._defaultDecorator.renderedElem = element;\n        return element;\n    };\n    editModel._hydrateOpts = function (opts) {\n        opts = opts || {\n            getEditor: function () {\n                return {};\n            }\n        };\n        // yesyes i know modifying supplied args. hush.\n        var isActionMode = !!opts.action;\n        if (!opts.editTriggers) {\n            if (isActionMode) {\n                opts.editTriggers = ['click', 'space', 'enter'];\n            } else {\n                opts.editTriggers = ['dblclick', 'enter', 'typing'];\n            }\n        }\n\n        if (!opts.saveTriggers) {\n            if (isActionMode) {\n                opts.saveTriggers = [];\n            } else {\n                opts.saveTriggers = ['tab', 'enter', 'clickoff'];\n            }\n        }\n\n        if (!opts.cancelTriggers) {\n            if (isActionMode) {\n                opts.cancelTriggers = [];\n            } else {\n                opts.cancelTriggers = ['escape'];\n            }\n        }\n\n        if (isActionMode) {\n            opts.getEditor = function () {\n                return {\n                    decorator: false,\n                    save: undefined,\n                    closePromise: opts.action.apply(opts, arguments)\n                };\n            };\n        } else if (!opts.getEditor) {\n            opts.getEditor = function () {\n                return {};\n            };\n        }\n\n        opts.headers = !!opts.headers; // be explicit, and default to false\n        return opts;\n    };\n\n    function optsHasTrigger(opts, trigger, triggerField) {\n        return opts && opts[triggerField] && opts[triggerField].indexOf(trigger) !== -1;\n    }\n\n    function optsHasEditTrigger(opts, trigger) {\n        return optsHasTrigger(opts, trigger, 'editTriggers');\n    }\n\n    function optsHasCancelTrigger(opts, trigger) {\n        return optsHasTrigger(opts, trigger, 'cancelTriggers');\n    }\n\n    function optsHasSaveTrigger(opts, trigger) {\n        return optsHasTrigger(opts, trigger, 'saveTriggers');\n    }\n\n    function getOptsForCol(col) {\n        var colDescriptor = grid.data.col.get(col);\n        if (!colDescriptor) {\n            return;\n        }\n        return editModel._hydrateOpts(colDescriptor.editOptions);\n    }\n\n    editModel._interceptor = function (e) {\n        var col = e.col;\n        var row = e.row;\n        var opts = getOptsForCol(col);\n        if (!opts) {\n            return;\n        }\n        if (!editModel.editing) {\n            // check editTriggers if not editing\n            switch (e.type) {\n                case 'click':\n                    if (optsHasEditTrigger(opts, 'click') && grid.eventIsOnCells(e)) {\n                        editModel.editCell(row, col, false, e);\n                    }\n                    break;\n                case 'dblclick':\n                    if (optsHasEditTrigger(opts, 'dblclick') && grid.eventIsOnCells(e)) {\n                        editModel.editCell(row, col, false, e);\n                    }\n                    break;\n                case 'keydown':\n                    if (optsHasEditTrigger(opts, 'space') && key.is(key.code.special.space, e.which)) {\n                        editModel.editCell(row, col, false, e);\n                    }\n\n                    if (optsHasEditTrigger(opts, 'enter') && key.is(key.code.special.enter, e.which)) {\n                        editModel.editCell(row, col, false, e);\n                    }\n\n                    // delete trigger can also happen only when not editing\n                    // also have to hardcode 46 until key library merges change\n                    if (key.is(key.code.special.backspace, e.which) || e.which === 46) {\n                        editModel.deleteSelection();\n                    }\n                    break;\n                case 'keypress':\n                    if (optsHasEditTrigger(opts, 'typing') && e.which >= 32 && e.which <= 122 && !e.metaKey && !e.ctrlKey && !e.altKey) {\n                        editModel.editCell(row, col, true, e);\n                    }\n                    break;\n            }\n        } else {\n            // check save triggers if editing\n            switch (e.type) {\n                case 'keydown':\n                    if (optsHasSaveTrigger(opts, 'tab') && key.is(key.code.special.tab, e.which)) {\n                        editModel.saveEdit().then(function () {\n                            grid.navigationModel.handleTabEvent(e);\n                        });\n                        e.preventDefault();\n                    }\n\n                    if (optsHasSaveTrigger(opts, 'enter') && key.is(key.code.special.enter, e.which) && !e.shiftKey) {\n                        editModel.saveEdit().then(function () {\n                            grid.navigationModel.setFocus(grid.data.down(grid.navigationModel.focus.row), grid.navigationModel.focus.col);\n                        });\n                    }\n                    break;\n            }\n        }\n    };\n\n    editModel.deleteSelection = function () {\n        var ranges = grid.navigationModel.getAllSelectedRanges();\n        var dataChanges = [];\n        ranges.forEach(function (range) {\n            grid.data.iterate(range, function (r, c) {\n                dataChanges.push({\n                    row: r,\n                    col: c,\n                    value: undefined\n                });\n            });\n        });\n        grid.dataModel.set(dataChanges);\n    };\n\n    function setEditing(editing) {\n        var prevEditing = editModel.editing;\n        editModel.editing = editing;\n        if (prevEditing !== editing) {\n            grid.eventLoop.fire('grid-edit');\n        }\n\n    }\n\n    editModel.editCell = function (r, c, isTyping, originalEvent) {\n        if (editModel.editing) {\n            editModel.saveEdit();\n        }\n        editModel.savePromise = undefined;\n\n        if (isNaN(r) || isNaN(c)) {\n            return;\n        }\n        var opts = getOptsForCol(c);\n        if (!opts) {\n            return;\n        }\n        if ((r < 0 || c < 0) && !opts.headers) {\n            return;\n        }\n\n        var editor = opts.getEditor(r, originalEvent);\n        // if they have no editor or not closePromise,\n        // it's just a simple action and there's no need to wait on them in edit mode\n        if (!editor || (!editor.closePromise && editor.decorator === false)) {\n            return;\n        }\n        setEditing(true);\n        if (editor.decorator === undefined) {\n            editor.decorator = editModel._defaultDecorator;\n            if (editor.save === undefined) {\n                editor.save = function () {\n                    var text = editor.decorator.renderedElem && editor.decorator.renderedElem.value;\n                    return Promise.resolve({\n                        value: text,\n                        formatted: text\n                    });\n                };\n            }\n        }\n        editModel.currentEditor = editor;\n        if (editor.decorator) {\n            editor.decorator.typedText = function () {\n                return isTyping ? grid.textarea.value && grid.textarea.value.trim() : '';\n            };\n            editor.decorator.top = r;\n            editor.decorator.left = c;\n            grid.decorators.add(editor.decorator);\n            editor.removeEscapeStackHandler = grid.escapeStack.add(function () {\n                if (optsHasCancelTrigger(opts, 'escape')) {\n                    editModel.cancelEdit();\n                } else if (optsHasSaveTrigger(opts, 'escape')) {\n                    editModel.saveEdit();\n                }\n            });\n\n            editor.removeClickOffHandler = clickOff.listen(function getClickOffElement() {\n                return editor.decorator && editor.decorator.boundingBox;\n            }, function onClick(e) {\n                if (editor.isInMe && editor.isInMe(e)) {\n                    return;\n                }\n                if (optsHasCancelTrigger(opts, 'clickoff')) {\n                    editModel.cancelEdit();\n                } else if (optsHasSaveTrigger(opts, 'clickoff')) {\n                    editModel.saveEdit();\n                }\n            }, {});\n        }\n\n        if (editor.closePromise) {\n            editor.closePromise.then(function resolve() {\n                return editModel.saveEdit();\n            }, function reject() {\n                return editModel.cancelEdit();\n            });\n        }\n    };\n\n    editModel._closeEditor = function () {\n        if (!editModel.editing) {\n            return;\n        }\n        setEditing(false);\n        if (editModel.currentEditor.removeEscapeStackHandler) {\n            editModel.currentEditor.removeEscapeStackHandler();\n        }\n        if (editModel.currentEditor.removeClickOffHandler) {\n            editModel.currentEditor.removeClickOffHandler();\n        }\n        if (editModel.currentEditor.decorator) {\n            grid.decorators.remove(editModel.currentEditor.decorator);\n        }\n\n        grid.viewLayer.draw();\n        grid.eventLoop.bindOnce('grid-draw', function () {\n            grid.container.focus();\n        });\n    };\n\n    editModel.cancelEdit = function () {\n        editModel._closeEditor();\n    };\n\n    editModel.saveEdit = function () {\n        if (!editModel.savePromise) {\n            var savePromise = editModel.currentEditor.save && editModel.currentEditor.save() || Promise.resolve(null);\n\n            editModel.savePromise = savePromise.then(function (dataResult) {\n                if (dataResult) {\n                    dataResult.row = editModel.currentEditor.decorator.top;\n                    dataResult.col = editModel.currentEditor.decorator.left;\n                    grid.dataModel.set([dataResult]);\n                }\n                editModel._closeEditor();\n                return dataResult;\n            });\n        }\n        return editModel.savePromise;\n    };\n\n    grid.eventLoop.bind('grid-destroy', function () {\n        editModel.cancelEdit();\n    });\n\n    grid.eventLoop.addInterceptor(editModel._interceptor);\n\n    return editModel;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/edit-model/index.js","module.exports.listen = function listenForClickOff(elem, onClickOff, opts) {\n\tvar parsedOpts = opts || {}\n\t\t// we use mousedown to check the target because the click could cause the element to be removed and it'll look like it's not in us\n\tvar lastMouseDownWasOutside = false;\n\t// check again after timeout\n\tvar eventListenerElement = parsedOpts.eventListenerElement || document;\n\tvar isInMe = parsedOpts.isInMe;\n\n\tfunction mousedownHandler(e) {\n\t\tif (typeof elem === 'function') {\n\t\t\telem = elem();\n\t\t}\n\t\tlastMouseDownWasOutside = !elem || !(elem === e.target || elem.contains(e.target)) && !(isInMe && isInMe(e.target));\n\t}\n\n\tfunction mouseupHandler(e) {\n\t\tif (lastMouseDownWasOutside) {\n\t\t\tonClickOff(e);\n\t\t}\n\t}\n\teventListenerElement.addEventListener('mousedown', mousedownHandler);\n\teventListenerElement.addEventListener('mouseup', mouseupHandler);\n\n\treturn function unbindClickOffListeners() {\n\t\teventListenerElement.removeEventListener('mousedown', mousedownHandler);\n\t\teventListenerElement.removeEventListener('mouseup', mouseupHandler);\n\t};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/click-off/src/index.js\n// module id = 43\n// module chunks = 0","var key = require('key');\nvar arrow = key.code.arrow;\nvar util = require('../util');\nvar rangeUtil = require('../range-util');\nvar ctrlOrCmd = require('../ctrl-or-cmd');\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n\n    var model = {\n        focus: {\n            row: 0,\n            col: 0\n        },\n        checkboxModeFor: {}\n    };\n\n    model.otherSelections = [];\n\n    var focusClass = grid.cellClasses.create(0, 0, 'focus');\n    grid.cellClasses.add(focusClass);\n\n    model.focusDecorator = grid.decorators.create(0, 0, 1, 1);\n    var focusDefaultRender = model.focusDecorator.render;\n    model.focusDecorator.render = function () {\n        var div = focusDefaultRender();\n        div.setAttribute('class', 'grid-focus-decorator');\n        return div;\n    };\n    grid.decorators.add(model.focusDecorator);\n\n    model.setFocus = function setFocus(row, col, dontClearSelection, dontSetSelection) {\n        row = grid.data.row.clamp(row);\n        if (typeof row !== 'number' || isNaN(row)) {\n            row = model.focus.row;\n        }\n        col = grid.data.col.clamp(col);\n        if (typeof col !== 'number' || isNaN(col)) {\n            col = model.focus.col;\n        }\n        var changed = row !== model.focus.row || col !== model.focus.col;\n        model.focus.row = row;\n        model.focus.col = col;\n        focusClass.top = row;\n        focusClass.left = col;\n        model.focusDecorator.top = row;\n        model.focusDecorator.left = col;\n        grid.cellScrollModel.scrollIntoView(row, col);\n        if (!dontClearSelection) {\n            clearOtherSelections();\n        }\n        if (!dontSetSelection) {\n            setSelectionToFocus();\n        }\n        if (changed) {\n            grid.eventLoop.fire('grid-focus-change');\n        }\n    };\n\n    function seekNextEdge(newIndex, startedDefined, isForwardEdge, isBackwardEdge, goForward) {\n\n        var isEdgeToSeek;\n        if (isForwardEdge(newIndex) || !startedDefined) {\n            isEdgeToSeek = isBackwardEdge;\n        } else {\n            isEdgeToSeek = isForwardEdge;\n        }\n\n\n        while (goForward(newIndex) !== undefined && !isEdgeToSeek(newIndex = goForward(newIndex))) /*eslint-disable no-empty*/ {\n            // empty\n        } /*eslint-enable no-empty*/\n\n        return newIndex;\n    }\n\n    function navFrom(row, col, e) {\n        // if nothing changes great we'll stay where we are\n        var newRow = row;\n        var newCol = col;\n        var isSeek = ctrlOrCmd(e);\n        var isLeftwardEdge, isRightwardEdge, isUpwardEdge, isDownwardEdge, cellHasValue, startedDefined;\n        if (isSeek) {\n            cellHasValue = function (r, c) {\n                if (r === undefined || c === undefined) {\n                    return false;\n                }\n\n                return !!grid.dataModel.get(r, c).formatted;\n            };\n            isLeftwardEdge = function (c) {\n                return cellHasValue(newRow, c) && !cellHasValue(newRow, grid.data.left(c));\n            };\n            isRightwardEdge = function (c) {\n                return cellHasValue(newRow, c) && !cellHasValue(newRow, grid.data.right(c));\n            };\n            isUpwardEdge = function (r) {\n                return cellHasValue(r, newCol) && !cellHasValue(grid.data.up(r), newCol);\n            };\n            isDownwardEdge = function (r) {\n                return cellHasValue(r, newCol) && !cellHasValue(grid.data.down(r), newCol);\n            };\n            startedDefined = cellHasValue(newRow, newCol);\n        }\n        switch (e.which) {\n            case arrow.down.code:\n                if (isSeek) {\n                    newRow = seekNextEdge(newRow, startedDefined, isDownwardEdge, isUpwardEdge, grid.data.down);\n                } else {\n                    newRow = grid.data.down(newRow);\n                }\n                break;\n            case arrow.up.code:\n                if (isSeek) {\n                    newRow = seekNextEdge(newRow, startedDefined, isUpwardEdge, isDownwardEdge, grid.data.up);\n                } else {\n                    newRow = grid.data.up(newRow);\n                }\n                break;\n            case arrow.right.code:\n                if (isSeek) {\n                    newCol = seekNextEdge(newCol, startedDefined, isRightwardEdge, isLeftwardEdge, grid.data.right);\n                } else {\n                    newCol = grid.data.right(newCol);\n                }\n                break;\n            case arrow.left.code:\n                if (isSeek) {\n                    newCol = seekNextEdge(newCol, startedDefined, isLeftwardEdge, isRightwardEdge, grid.data.left);\n                } else {\n                    newCol = grid.data.left(newCol);\n                }\n                break;\n        }\n        if (newRow === undefined) {\n            newRow = row;\n        }\n        if (newCol === undefined) {\n            newCol = col;\n        }\n        return {\n            row: newRow,\n            col: newCol\n        };\n    }\n\n    model._navFrom = navFrom;\n\n    model.handleTabEvent = function (e) {\n        var newCol = model.focus.col;\n        var newRow = model.focus.row;\n        if (!e || !e.shiftKey) {\n            if (newCol === grid.data.col.count() - 1) {\n                newRow = grid.data.down(newRow);\n                newCol = 0;\n            } else {\n                newCol = grid.data.right(newCol);\n            }\n        } else {\n            if (newCol === 0) {\n                newRow = grid.data.up(newRow);\n                newCol = grid.data.col.count() - 1;\n            } else {\n                newCol = grid.data.left(newCol);\n            }\n        }\n        model.setFocus(newRow, newCol);\n        e.preventDefault();\n    }\n\n    grid.eventLoop.bind('keydown', function (e) {\n        if (!grid.focused) {\n            return;\n        }\n        // handle tab\n        if (key.is(key.code.special.tab, e.which)) {\n            model.handleTabEvent(e);\n            return;\n        }\n\n        if (!key.is(arrow, e.which)) {\n            return;\n        }\n        // focus logic\n\n        if (!e.shiftKey) {\n            var newFocus = navFrom(model.focus.row, model.focus.col, e);\n            model.setFocus(newFocus.row, newFocus.col, e);\n        } else {\n            // selection logic\n            var newSelection;\n            // stand in for if it's cleared\n            if (model.selection.top === -1) {\n                newSelection = {\n                    top: model.focus.row,\n                    left: model.focus.col,\n                    height: 1,\n                    width: 1\n                };\n            } else {\n                newSelection = {\n                    top: model.selection.top,\n                    left: model.selection.left,\n                    height: model.selection.height,\n                    width: model.selection.width\n                };\n            }\n            var navFromRow;\n            var navFromCol;\n            if (model.focus.row === newSelection.top) {\n                navFromRow = newSelection.top + newSelection.height - 1;\n            } else {\n                navFromRow = newSelection.top;\n            }\n\n            if (model.focus.col === newSelection.left) {\n                navFromCol = newSelection.left + newSelection.width - 1;\n            } else {\n                navFromCol = newSelection.left;\n            }\n            var newRowCol = navFrom(navFromRow, navFromCol, e);\n            setSelectionFromPoints(model.focus.row, model.focus.col, newRowCol.row, newRowCol.col);\n            grid.cellScrollModel.scrollIntoView(newRowCol.row, newRowCol.col);\n        }\n    });\n\n    function isNavableMouseEvent(e) {\n        var target = e.target;\n        // if there's no target let it through because that only happens in unit tests,\n        // or if it happened in real world it wouldn't have a valid row or col and so wouldn't do anything anyway\n        return !target || grid.eventIsOnCells(e) && e.button !== 2;\n    }\n\n    function isCheckboxModeForRowCol(row, col) {\n        return model.checkboxModeFor.rows && col < 0 || (row < 0 && colSelectable(col)) && model.checkboxModeFor.cols\n    }\n\n    grid.eventLoop.bind('mousedown', function (e) {\n        if (!isNavableMouseEvent(e)) {\n            return;\n        }\n        // assume the event has been annotated by the cell mouse model interceptor\n        var row = e.row;\n        var col = e.col;\n\n        // if we're in checkbox mode pretend the user held command for header mousedowns only\n        var isCheckboxMode = isCheckboxModeForRowCol(row, col);\n        var ctrlOrCmdPressed = isCheckboxMode || ctrlOrCmd(e);\n\n        if (e.shiftKey) {\n            var fromRow = model.focus.row;\n            var fromCol = model.focus.col;\n            var toRow = row;\n            var toCol = col;\n            var wasSelected;\n            if (toRow < 0) {\n                var colDescriptor = grid.data.col.get(toCol);\n                if (colDescriptor.selectable !== false) {\n                    wasSelected = colDescriptor.selected;\n                    fromRow = 0;\n                    toRow = Infinity;\n                }\n\n            }\n            if (toCol < 0) {\n                wasSelected = grid.data.row.get(toRow).selected;\n                fromCol = 0;\n                toCol = Infinity;\n            }\n\n            selectFromFocusToCell(fromRow, fromCol, toRow, toCol, ctrlOrCmdPressed, wasSelected);\n        } else {\n\n\n            var focusRow = row;\n            if (focusRow < 0) {\n                focusRow = grid.view.row.toData(grid.rowModel.numHeaders());\n            }\n            var focusCol = col;\n            if (focusCol < 0) {\n                focusCol = grid.view.col.toData(grid.colModel.numHeaders());\n            }\n\n            var headerSelectionRange = createHeaderSelectionRange(row, col);\n            if (headerSelectionRange) {\n                var prevSelections = findFullRowOrColSelections(headerSelectionRange);\n                if (prevSelections.length && isCheckboxMode) {\n                    var selectAll = headerSelectionRange.width === Infinity && headerSelectionRange.height === Infinity && !(grid.rowModel.allSelected() || grid.colModel.allSelected());\n                    prevSelections.forEach(function (prevSelection) {\n                        removeFullRowOrColFromSelection(prevSelection, headerSelectionRange);\n                    });\n                    if (selectAll) {\n                        model.setSelection(headerSelectionRange);\n                    }\n                    model.setFocus(focusRow, focusCol, true, true);\n                } else {\n                    if (ctrlOrCmdPressed && !selectionIsFocus(model.selection)) {\n                        addSelection(model.selection);\n                    } else {\n                        clearOtherSelections();\n                    }\n                    model.setFocus(focusRow, focusCol, ctrlOrCmdPressed);\n                    model.setSelection(headerSelectionRange);\n                }\n\n            } else {\n                if (ctrlOrCmdPressed) {\n                    addSelection(model.selection);\n                }\n                model.setFocus(focusRow, focusCol, ctrlOrCmdPressed);\n            }\n        }\n    });\n\n    function selectFromFocusToCell(fromRow, fromCol, toRow, toCol, ctrlOrCmdPressed, wasSelected) {\n        var isCheckboxMode = (fromRow === 0 && toRow === Infinity && model.checkboxModeFor.cols) ||\n            (fromCol === 0 && toCol === Infinity && model.checkboxModeFor.rows);\n        if (!wasSelected || !isCheckboxMode) {\n            setSelectionFromPoints(fromRow, fromCol, toRow, toCol, ctrlOrCmdPressed);\n        } else {\n            var range = rangeUtil.createFromPoints(fromRow, fromCol, toRow, toCol);\n            var prevSelections = findFullRowOrColSelections(range);\n            if (prevSelections.length) {\n                prevSelections.forEach(function (prevSelection) {\n                    removeFullRowOrColFromSelection(prevSelection, range);\n                });\n            }\n        }\n    }\n\n    function colSelectable(col) {\n        var colDescriptor = grid.data.col.get(col);\n        return colDescriptor && colDescriptor.selectable !== false;\n    }\n\n    function createHeaderSelectionRange(row, col) {\n        var headerSelectionRange;\n        if (row < 0 && col < 0) {\n            headerSelectionRange = rangeUtil.createFromPoints(0, 0, Infinity, Infinity);\n        } else if (row < 0) {\n            if (colSelectable(col)) {\n                headerSelectionRange = rangeUtil.createFromPoints(0, col, Infinity, col);\n            }\n        } else if (col < 0) {\n            headerSelectionRange = rangeUtil.createFromPoints(row, 0, row, Infinity);\n        }\n        return headerSelectionRange;\n    }\n\n    function findSelectionByRange(range) {\n        return model.getAllSelections().filter(function (selection) {\n            return rangeUtil.equal(selection, range);\n        })[0];\n    }\n\n    function addOrSetSelection(selection) {\n        if (!selectionIsFocus(model.selection)) {\n            addSelection(selection);\n        } else {\n            model.setSelection(selection);\n        }\n    }\n\n\n\n    function removeFullRowOrColFromSelection(selection, rowOrCol) {\n\n        if (rowOrCol.width === Infinity) { // row\n            var newSelections = [];\n            if (selection.top < rowOrCol.top) { // we need a selection for the top portion\n                var newSelection = {\n                    top: selection.top,\n                    height: rowOrCol.top - selection.top,\n                    left: selection.left,\n                    width: selection.width\n                };\n                newSelections.push(newSelection);\n            }\n\n            var bottomRow = selection.top + selection.height - 1;\n            if (bottomRow > rowOrCol.top + rowOrCol.height - 1) { // we need a selection for the bottom portion\n                newSelections.push({\n                    top: rowOrCol.top + rowOrCol.height,\n                    height: bottomRow - (rowOrCol.top + rowOrCol.height - 1),\n                    left: selection.left,\n                    width: selection.width\n                });\n            }\n            removeSelection(selection);\n            newSelections.forEach(addOrSetSelection);\n            syncSelectionToHeaders();\n        }\n\n        if (rowOrCol.height === Infinity) { // col\n        }\n    }\n\n    function findFullRowOrColSelections(range) {\n        return model.getAllSelections().filter(function (selection) {\n            return (selection.height === Infinity && selection.top === 0 && rangeUtil.intersect([selection.left, selection.width], [range.left, range.width])) ||\n                (selection.width === Infinity && selection.left === 0 && rangeUtil.intersect([selection.top, selection.height], [range.top, range.height]));\n        });\n    }\n\n    function addSelection(range) {\n        model.otherSelections.push(createAndAddSelectionDecorator(range.top, range.left, range.height, range.width));\n    }\n\n    model._rowSelectionClasses = [];\n    model._colSelectionClasses = [];\n    // row col selection\n    function handleRowColSelectionChange(rowOrCol) {\n        var decoratorsField = ('_' + rowOrCol + 'SelectionClasses');\n        model[decoratorsField].forEach(function (selectionDecorator) {\n            grid.cellClasses.remove(selectionDecorator);\n        });\n        model[decoratorsField] = [];\n\n        if (grid[rowOrCol + 'Model'].allSelected()) {\n            var top = rowOrCol === 'row' ? Infinity : 0;\n            var left = rowOrCol === 'col' ? Infinity : 0;\n            var decorator = grid.cellClasses.create(top, left, 'selected', 1, 1, 'virtual');\n            grid.cellClasses.add(decorator);\n            model[decoratorsField].push(decorator);\n        } else {\n            grid[rowOrCol + 'Model'].getSelected().forEach(function (index) {\n                var virtualIndex = grid[rowOrCol + 'Model'].toVirtual(index);\n                var top = rowOrCol === 'row' ? virtualIndex : 0;\n                var left = rowOrCol === 'col' ? virtualIndex : 0;\n                var decorator = grid.cellClasses.create(top, left, 'selected', 1, 1, 'virtual');\n                grid.cellClasses.add(decorator);\n                model[decoratorsField].push(decorator);\n            });\n        }\n    }\n\n    grid.eventLoop.bind('grid-row-selection-change', function () {\n        handleRowColSelectionChange('row');\n    });\n\n    grid.eventLoop.bind('grid-col-selection-change', function () {\n        handleRowColSelectionChange('col');\n    });\n\n    function createAndAddSelectionDecorator() {\n        var selection = grid.decorators.create.apply(this, arguments);\n        var defaultRender = selection.render;\n        selection.render = function () {\n            var div = defaultRender();\n            div.setAttribute('class', 'grid-selection');\n            return div;\n        };\n        grid.decorators.add(selection);\n        return selection;\n    }\n\n    var selection = createAndAddSelectionDecorator();\n\n    function syncSelectionToHeaders() {\n        grid.colModel.clearSelected(true);\n        grid.rowModel.clearSelected(true);\n        model.getAllSelections().forEach(function (selection) {\n            if (selection) {\n                maybeSelectHeaderFromSelection(selection);\n            }\n        });\n    }\n\n    model.getAllSelections = function () {\n        var selections = [];\n        if (model.selection) {\n            selections.push(model.selection);\n        }\n        return selections.concat(model.otherSelections);\n    };\n\n    function maybeSelectHeaderFromSelection(range, deselect) {\n        var indexes;\n        if (range.top === 0 && range.height === Infinity) {\n            indexes = grid.data.col.indexes({\n                from: range.left,\n                length: range.width\n            });\n            if (deselect) {\n                grid.colModel.deselect(indexes);\n            } else {\n                grid.colModel.select(indexes);\n            }\n        }\n        if (range.left === 0 && range.width === Infinity) {\n            indexes = grid.data.row.indexes({\n                from: range.top,\n                length: range.height\n            });\n            if (deselect) {\n                grid.rowModel.deselect(indexes);\n            } else {\n                grid.rowModel.select(indexes);\n            }\n        }\n    }\n\n    function selectionIsFocus(selection) {\n        return selection.height === 1 && selection.width === 1 && !model.otherSelections.length;\n    }\n\n    model.setSelection = function setSelection(newSelection) {\n        var height = newSelection.height;\n        var width = newSelection.width;\n        if (selectionIsFocus(newSelection)) {\n            height = -1;\n            width = -1;\n        }\n        selection.top = newSelection.top;\n        selection.left = newSelection.left;\n        selection.height = height;\n        selection.width = width;\n        // select the columns to match\n        syncSelectionToHeaders();\n    };\n\n\n    function setSelectionToFocus() {\n        model.setSelection({\n            top: model.focus.row,\n            left: model.focus.col,\n            height: 1,\n            width: 1\n        });\n    }\n\n    function clearOtherSelections() {\n        grid.decorators.remove(model.otherSelections);\n        model.otherSelections = [];\n        syncSelectionToHeaders();\n    }\n\n    function removeSelection(selection) {\n        if (rangeUtil.equal(selection, model.selection)) {\n            if (model.otherSelections.length) {\n                var lastSelection = model.otherSelections.pop();\n                grid.decorators.remove(lastSelection);\n                model.setSelection(lastSelection);\n            } else {\n                setSelectionToFocus();\n            }\n        } else {\n            var index = model.otherSelections.indexOf(selection);\n            if (index !== -1) {\n                model.otherSelections.splice(index, 1);\n                grid.decorators.remove(selection);\n            }\n        }\n        syncSelectionToHeaders();\n    }\n\n    function setSelectionFromPoints(fromRow, fromCol, toRow, toCol, dontClearOthers) {\n        if (!dontClearOthers) {\n            clearOtherSelections();\n        }\n        toRow = util.clamp(toRow, 0, Infinity);\n        toCol = util.clamp(toCol, 0, Infinity);\n        var newSelection = rangeUtil.createFromPoints(fromRow, fromCol, toRow, toCol);\n        model.setSelection(newSelection);\n    }\n\n    selection._onDragStart = function (e) {\n        if (!isNavableMouseEvent(e)) {\n            return;\n        }\n        if (e.enableAutoScroll) {\n            e.enableAutoScroll();\n        }\n        var fromRow = model.focus.row;\n        var fromCol = model.focus.col;\n        var startCol = e.col;\n        var startRow = e.row;\n        var wasSelected;\n        var toRow, toCol;\n        if (startRow < 0) {\n            // these are notted because mousedwon actually inverts the intial selection\n            wasSelected = !grid.data.col.get(startCol).selected;\n            fromRow = 0;\n            toRow = Infinity;\n\n        }\n        if (startCol < 0) {\n            // these are notted because mousedwon actually inverts the intial selection\n            wasSelected = !grid.data.row.get(startRow).selected;\n            fromCol = 0;\n            toCol = Infinity;\n        }\n        var unbindDrag = grid.eventLoop.bind('grid-cell-drag', function (e) {\n            toRow = toRow !== Infinity ? e.row : toRow;\n            toCol = toCol !== Infinity ? e.col : toCol;\n            if (toCol !== Infinity && !colSelectable(toCol)) {\n                return;\n            }\n\n            var fixedRows = grid.rowModel.numFixed(true);\n            if (startRow < fixedRows && toRow > fixedRows && toRow !== Infinity) {\n                startRow = toRow = grid.rowModel.numFixed();\n                grid.cellScrollModel.scrollTo(0, grid.cellScrollModel.col);\n            }\n            var fixedCols = grid.colModel.numFixed(true);\n            if (startCol < fixedCols && toCol > fixedCols && toCol !== Infinity) {\n                startCol = toCol = grid.colModel.numFixed();\n                grid.cellScrollModel.scrollTo(grid.cellScrollModel.row, 0);\n            }\n            if (isNaN(toRow) || isNaN(toCol)) {\n                return; //don't try to select when NaN\n            }\n            selectFromFocusToCell(fromRow, fromCol, toRow, toCol, true, wasSelected); // always pass true because if it was to be cleared mousedown should have handled that\n        });\n        var unbindDragEnd = grid.eventLoop.bind('grid-drag-end', function () {\n            unbindDrag();\n            unbindDragEnd();\n        });\n    };\n\n    grid.eventLoop.bind('grid-drag-start', selection._onDragStart);\n    setSelectionToFocus();\n    model._selectionDecorator = selection;\n\n    Object.defineProperty(model, 'selection', {\n        get: function () {\n            if (selection.height === -1) { // cleared selection default to focus\n                return {\n                    top: model.focus.row,\n                    left: model.focus.col,\n                    height: 1,\n                    width: 1\n                };\n            }\n            return selection;\n        }\n    });\n\n    model.getAllSelectedRanges = function () {\n        var selectionRange = grid.navigationModel.selection;\n        // valid selection range cannot go to -1\n        if (selectionRange.top === -1) {\n            selectionRange = {\n                top: grid.navigationModel.focus.row,\n                left: grid.navigationModel.focus.col,\n                width: 1,\n                height: 1\n            };\n        }\n        return [selectionRange].concat(model.otherSelections);\n    };\n\n    model.clearSelection = function () {\n        clearOtherSelections();\n        setSelectionToFocus();\n    }\n\n    function clearSelectionFromModelChange(e) {\n        if (e.action === 'size') { // don't clear for resize but all other changes for now will clear selection\n            return;\n        }\n        model.clearSelection();\n\n    }\n\n    grid.eventLoop.bind('grid-col-change', clearSelectionFromModelChange);\n    grid.eventLoop.bind('grid-row-change', clearSelectionFromModelChange);\n    return model;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/navigation-model/index.js","var util = require('../util');\nvar debounce = require('../debounce');\nvar capitalize = require('capitalize');\nvar dirtyClean = require('../dirty-clean');\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n    var pixelDirtyClean = dirtyClean(grid);\n    var offsetDirtyClean = dirtyClean(grid);\n    var model = {\n        top: 0,\n        left: 0,\n        offsetTop: 0,\n        offsetLeft: 0,\n        maxScroll: {},\n        maxIsAllTheWayFor: {\n            height: false,\n            width: false\n        },\n        isDirty: pixelDirtyClean.isDirty,\n        isOffsetDirty: offsetDirtyClean.isDirty\n    };\n    var scrollBarWidth = 10;\n    var intentionAngle = 30;\n\n    grid.eventLoop.bind('grid-virtual-pixel-cell-change', function () {\n        var scrollHeight = grid.virtualPixelCellModel.totalHeight() - grid.virtualPixelCellModel.fixedHeight();\n        var scrollWidth = grid.virtualPixelCellModel.totalWidth() - grid.virtualPixelCellModel.fixedWidth();\n        model.setScrollSize(scrollHeight, scrollWidth);\n        cacheMaxScroll();\n        sizeScrollBars();\n        updatePixelOffsets();\n    });\n\n\n    grid.eventLoop.bind('grid-viewport-change', function () {\n        cacheMaxScroll();\n        sizeScrollBars();\n        updatePixelOffsets();\n    });\n\n    function cacheMaxScroll() {\n        model.maxScroll.height = getMaxScroll('height');\n        model.maxScroll.width = getMaxScroll('width');\n    }\n\n    function checkAngle(side1, side2) {\n        var angle = Math.abs(Math.atan(side1 / side2) * 57.29);\n        return angle < intentionAngle;\n    }\n\n    // assumes a standardized wheel event that we create through the mousewheel package\n    grid.eventLoop.bind('mousewheel', function handleMouseWheel(e) {\n        if (e.target !== grid.container && getScrollElementFromTarget(e.target, grid.container) !== grid.container) {\n            return;\n        }\n\n        var deltaY = e.deltaY;\n        var deltaX = e.deltaX;\n        if (checkAngle(deltaY, deltaX)) {\n            deltaY = 0;\n        } else if (checkAngle(deltaX, deltaY)) {\n            deltaX = 0;\n        }\n\n        model.scrollTo(model.top - deltaY, model.left - deltaX, false);\n        e.preventDefault();\n    });\n\n    model.setScrollSize = function (h, w) {\n        model.height = h;\n        model.width = w;\n    };\n\n    function notifyListeners() {\n        // TODO: possibly keep track of delta since last update and send it along. for now, no\n        grid.eventLoop.fire('grid-pixel-scroll');\n\n        // update the cell scroll\n        var scrollTop = model.top;\n        var row = grid.virtualPixelCellModel.getRow(scrollTop + grid.virtualPixelCellModel.fixedHeight()) - grid.rowModel.numFixed();\n\n        var scrollLeft = model.left;\n        var col = grid.virtualPixelCellModel.getCol(scrollLeft + grid.virtualPixelCellModel.fixedWidth()) - grid.colModel.numFixed();\n\n        grid.cellScrollModel.scrollTo(row, col, undefined, true);\n        pixelDirtyClean.setDirty();\n    }\n\n    function updatePixelOffsets() {\n        var modTopPixels = 0;\n        var modLeftPixels = 0;\n        if (!grid.opts.snapToCell) {\n            var fixedHeight = grid.virtualPixelCellModel.fixedHeight();\n            var fixedWidth = grid.virtualPixelCellModel.fixedWidth();\n            var row = grid.virtualPixelCellModel.getRow(grid.pixelScrollModel.top + fixedHeight) - grid.rowModel.numFixed();\n            var top = grid.virtualPixelCellModel.height(grid.rowModel.numFixed(), row + grid.rowModel.numFixed() - 1);\n            var otherTop = grid.pixelScrollModel.top;\n            modTopPixels = top - otherTop;\n            var col = grid.virtualPixelCellModel.getCol(grid.pixelScrollModel.left + fixedWidth) - grid.colModel.numFixed();\n            var left = grid.virtualPixelCellModel.width(grid.colModel.numFixed(), col + grid.colModel.numFixed() - 1);\n\n            modLeftPixels = left - grid.pixelScrollModel.left;\n        }\n        if (model.offsetTop !== modTopPixels || model.offsetLeft !== modLeftPixels) {\n            offsetDirtyClean.setDirty();\n        }\n        model.offsetTop = modTopPixels;\n        model.offsetLeft = modLeftPixels;\n    }\n\n    model.scrollTo = function (top, left, dontNotify) {\n        model.top = util.clamp(top, 0, model.maxScroll.height);\n        model.left = util.clamp(left, 0, model.maxScroll.width);\n        positionScrollBars();\n        updatePixelOffsets();\n\n\n        if (!dontNotify) {\n            notifyListeners();\n        }\n\n\n    };\n\n\n    /* SCROLL BAR LOGIC */\n    function getScrollPositionFromReal(scrollBarRealClickCoord, heightWidth, vertHorz) {\n        var scrollBarTopClick = scrollBarRealClickCoord - grid.virtualPixelCellModel['fixed' + capitalize(heightWidth)]();\n        var scrollRatio = scrollBarTopClick / getMaxScrollBarCoord(heightWidth, vertHorz);\n        var scrollCoord = scrollRatio * model.maxScroll[heightWidth];\n        return scrollCoord;\n    }\n\n    function makeScrollBarDecorator(isHorz) {\n        var decorator = grid.decorators.create();\n        decorator.fixed = true;\n        var xOrY = isHorz ? 'X' : 'Y';\n        var heightWidth = isHorz ? 'width' : 'height';\n        var vertHorz = isHorz ? 'horz' : 'vert';\n        var gridCoordField = 'grid' + xOrY;\n        var layerCoordField = 'layer' + xOrY;\n        var viewPortClampFn = grid.viewPort['clamp' + xOrY];\n\n        decorator.postRender = function (scrollBarElem) {\n            scrollBarElem.setAttribute('class', 'grid-scroll-bar');\n            decorator._onDragStart = function (e) {\n                if (e.target !== scrollBarElem) {\n                    return;\n                }\n                var scrollBarOffset = e[layerCoordField];\n\n                decorator._unbindDrag = grid.eventLoop.bind('grid-drag', function (e) {\n                    grid.eventLoop.stopBubbling(e);\n                    var gridCoord = viewPortClampFn(e[gridCoordField]);\n                    var scrollBarRealClickCoord = gridCoord - scrollBarOffset;\n                    var scrollCoord = getScrollPositionFromReal(scrollBarRealClickCoord, heightWidth, vertHorz);\n                    if (isHorz) {\n                        model.scrollTo(model.top, scrollCoord);\n                    } else {\n                        model.scrollTo(scrollCoord, model.left);\n                    }\n                });\n\n                decorator._unbindDragEnd = grid.eventLoop.bind('grid-drag-end', function () {\n                    decorator._unbindDrag();\n                    decorator._unbindDragEnd();\n                });\n\n                e.stopPropagation();\n            };\n\n            grid.eventLoop.bind('grid-drag-start', scrollBarElem, decorator._onDragStart);\n            grid.eventLoop.bind('mousedown', scrollBarElem, function (e) {\n                grid.eventLoop.stopBubbling(e);\n            });\n\n            return scrollBarElem;\n        };\n\n        decorator.units = 'px';\n        decorator.space = 'real';\n\n        return decorator;\n    }\n\n    model.vertScrollBar = makeScrollBarDecorator();\n    model.horzScrollBar = makeScrollBarDecorator(true);\n    model.vertScrollBar.width = scrollBarWidth;\n    model.horzScrollBar.height = scrollBarWidth;\n\n    function getMaxScroll(heightWidth) {\n        var rowOrCol = heightWidth === 'height' ? 'row' : 'col';\n        if (model.maxIsAllTheWayFor[heightWidth]) {\n            return Math.max(0, model[heightWidth] - grid.virtualPixelCellModel[heightWidth](grid[rowOrCol + 'Model'].length(true) - 1));\n        }\n\n        var scrollLength = model[heightWidth];\n        var viewScrollHeightOrWidth = getViewScrollHeightOrWidth(heightWidth);\n\n        if (scrollLength <= viewScrollHeightOrWidth) {\n            return 0;\n        }\n\n        var firstScrollableCell = grid[rowOrCol + 'Model'].numFixed();\n        while (scrollLength > viewScrollHeightOrWidth - 10 && firstScrollableCell < grid.virtual[rowOrCol].count()) {\n            scrollLength -= grid.virtualPixelCellModel[heightWidth](firstScrollableCell);\n            firstScrollableCell++;\n        }\n        return model[heightWidth] - scrollLength;\n    }\n\n    model._getMaxScroll = getMaxScroll;\n\n    function getScrollRatioFromVirtualScrollCoords(scroll, heightWidth) {\n        var maxScroll = model.maxScroll[heightWidth];\n        var scrollRatio = scroll / maxScroll;\n        return scrollRatio;\n    }\n\n    function getMaxScrollBarCoord(heightWidth, vertHorz) {\n        return getViewScrollHeightOrWidth(heightWidth) - model[vertHorz + 'ScrollBar'][heightWidth];\n    }\n\n    function getRealScrollBarPosition(scroll, heightWidth, vertHorz) {\n        var scrollRatio = getScrollRatioFromVirtualScrollCoords(scroll, heightWidth);\n        var maxScrollBarScroll = getMaxScrollBarCoord(heightWidth, vertHorz);\n        //in scroll bar coords\n        var scrollBarCoord = scrollRatio * maxScrollBarScroll;\n        //add the fixed height to translate back into real coords\n        return scrollBarCoord + grid.virtualPixelCellModel['fixed' + capitalize(heightWidth)]();\n    }\n\n    model._getRealScrollBarPosition = getRealScrollBarPosition;\n    model._getScrollPositionFromReal = getScrollPositionFromReal;\n\n    function calcScrollBarRealTop() {\n        return getRealScrollBarPosition(model.top, 'height', 'vert');\n    }\n\n    function calcScrollBarRealLeft() {\n        return getRealScrollBarPosition(model.left, 'width', 'horz');\n    }\n\n    function positionScrollBars() {\n        model.vertScrollBar.top = calcScrollBarRealTop();\n        model.horzScrollBar.left = calcScrollBarRealLeft();\n    }\n\n    function getViewScrollHeightOrWidth(heightWidth) {\n        return grid.viewPort[heightWidth] - grid.virtualPixelCellModel['fixed' + capitalize(heightWidth)]();\n    }\n\n    function getScrollableViewWidth() {\n        return getViewScrollHeightOrWidth('width');\n    }\n\n    function getScrollableViewHeight() {\n        return getViewScrollHeightOrWidth('height');\n    }\n\n    function sizeScrollBars() {\n        model.vertScrollBar.left = grid.viewPort.width - scrollBarWidth;\n        model.horzScrollBar.top = grid.viewPort.height - scrollBarWidth;\n        var scrollableViewHeight = getScrollableViewHeight();\n        var scrollableViewWidth = getScrollableViewWidth();\n        model.vertScrollBar.height = Math.max(scrollableViewHeight / grid.virtualPixelCellModel.totalHeight() * scrollableViewHeight, 20);\n        model.horzScrollBar.width = Math.max(scrollableViewWidth / grid.virtualPixelCellModel.totalWidth() * scrollableViewWidth, 20);\n        if (model.vertScrollBar.height >= scrollableViewHeight) {\n            model.vertScrollBar.height = -1;\n        }\n\n        if (model.horzScrollBar.width >= scrollableViewWidth) {\n            model.horzScrollBar.width = -1;\n        }\n        positionScrollBars();\n    }\n\n    grid.decorators.add(model.vertScrollBar);\n    grid.decorators.add(model.horzScrollBar);\n    /* END SCROLL BAR LOGIC */\n\n    function getScrollElementFromTarget(elem, stopParent) {\n        stopParent = stopParent || document;\n        if (!elem) {\n            return stopParent;\n        }\n\n        var position = elem.style.position,\n            excludeStaticParent = position === 'absolute',\n            overflowRegex = /(auto|scroll)/,\n            scrollParent = elem;\n\n        while (!!scrollParent && scrollParent !== stopParent) {\n            if (!(excludeStaticParent && scrollParent.style.position === 'static')) {\n                var computedStyle = getComputedStyle(scrollParent);\n\n                if (overflowRegex.test(computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n                    break;\n                }\n            }\n\n            scrollParent = scrollParent.parentElement;\n        }\n\n        return position === 'fixed' || !scrollParent || scrollParent === elem ? elem.ownerDocument || stopParent : scrollParent;\n    }\n\n    return model;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/pixel-scroll-model/index.js","module.exports = function (_grid) {\n    var grid = _grid;\n\n    var api = {\n        _decorators: {}\n    };\n\n    function setColShowing(col) {\n        grid.colModel.get(col).hidden = false;\n    }\n\n    function doWhileHidden(col, fn, inc) {\n        var colDescriptor;\n        while ((colDescriptor = grid.colModel.get(col)) !== undefined && colDescriptor.hidden) {\n            if (fn) {\n                fn(col);\n            }\n            col = col + inc;\n        }\n        return col;\n    }\n\n    function createDecorator(col, right) {\n        var headerDecorator = grid.decorators.create(0, col, 1, 1, 'cell', 'virtual');\n\n        headerDecorator.postRender = function (div) {\n\n            if (right) {\n                div.style.transform = 'translate(50%, -50%)';\n                div.style.webkitTransform = 'translate(50%, -50%)';\n                div.style.removeProperty('left');\n            } else {\n                div.style.transform = 'translate(-50%, -50%)';\n                div.style.webkitTransform = 'translate(-50%, -50%)';\n                div.style.removeProperty('right');\n            }\n            div.style.removeProperty('bottom');\n            div.style.top = '50%';\n            div.setAttribute('class', 'show-hidden-cols');\n            div.setAttribute('dts', 'grid_column_unhide_btn');\n\n            grid.eventLoop.bind('click', div, function () {\n                var inc = right ? 1 : -1;\n                doWhileHidden(col + inc, setColShowing, inc);\n            });\n        };\n        return headerDecorator;\n    }\n\n    function maybeRemoveDecorator(col) {\n        if (api._decorators[col]) {\n            var decorator = api._decorators[col];\n            grid.decorators.remove(decorator);\n            api._decorators[col] = undefined;\n        }\n    }\n\n    grid.eventLoop.bind('grid-col-change', function (e) {\n        if (e.action === 'hide' || e.action === 'add') {\n            e.descriptors.forEach(function (descriptor) {\n                var col = descriptor.index;\n                if (!col && col !== 0) {\n                    return;\n                }\n                if (descriptor.hidden) {\n                    var decCol = col;\n                    var showingCol = doWhileHidden(col, undefined, -1);\n                    var rightSide = showingCol !== -1;\n                    if (!rightSide) {\n                        // we actually have to backtrack to the last showing column\n                        showingCol = doWhileHidden(col, undefined, 1);\n                    }\n                    decCol = showingCol;\n                    maybeRemoveDecorator(col);\n                    var decorator = createDecorator(decCol, rightSide);\n                    grid.decorators.add(decorator);\n                    api._decorators[col] = decorator;\n                } else {\n                    maybeRemoveDecorator(col);\n                }\n            });\n        }\n    });\n\n    return api;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/show-hidden-cols/index.js","var key = require('key');\n\nmodule.exports = function (_grid) {\n    var grid = _grid;\n\n    var api = {\n        annotateDecorator: annotateDecorator\n    };\n\n    function annotateDecorator(headerDecorator) {\n        var col = headerDecorator.left;\n        headerDecorator._dragLine = grid.decorators.create(0, undefined, Infinity, 1, 'px', 'real');\n        headerDecorator._dragLine.fixed = true;\n\n        headerDecorator._dragLine.postRender = function (div) {\n            div.setAttribute('class', 'grid-drag-line');\n        };\n\n        headerDecorator._onMousedown = function (e) {\n            //prevent mousedowns from getting to selection if they hit the dragline\n            grid.eventLoop.stopBubbling(e);\n        };\n\n        headerDecorator._onDragStart = function (e) {\n\n            grid.eventLoop.stopBubbling(e);\n\n            grid.decorators.add(headerDecorator._dragLine);\n\n            headerDecorator._unbindDrag = grid.eventLoop.bind('grid-drag', function (e) {\n                var minX = headerDecorator.getDecoratorLeft() + 22;\n                headerDecorator._dragLine.left = Math.max(e.gridX, minX);\n            });\n\n            headerDecorator._unbindKeyDown = grid.escapeStack.add(removeDecoratorsAndUnbind);\n\n            headerDecorator._unbindDragEnd = grid.eventLoop.bind('grid-drag-end', function (e) {\n                var newWidth = headerDecorator._dragLine.left - headerDecorator.getDecoratorLeft();\n                grid.view.col.get(col).width = newWidth;\n                grid.colModel.getSelected().forEach(function (dataIdx) {\n                    grid.data.col.get(dataIdx).width = newWidth;\n                });\n                removeDecoratorsAndUnbind();\n            });\n\n            function removeDecoratorsAndUnbind() {\n                grid.decorators.remove(headerDecorator._dragLine);\n                headerDecorator._unbindDrag();\n                headerDecorator._unbindDragEnd();\n                headerDecorator._unbindKeyDown && headerDecorator._unbindKeyDown();\n                return true; // for the escape stack\n            }\n        };\n\n        headerDecorator.postRender = function (div) {\n            div.style.transform = 'translateX(50%)';\n            div.style.webkitTransform = 'translateX(50%)';\n\n            div.style.removeProperty('left');\n            div.setAttribute('class', 'col-resize');\n            div.setAttribute('dts', 'grid_header_resize');\n\n            grid.eventLoop.bind('grid-drag-start', div, headerDecorator._onDragStart);\n            grid.eventLoop.bind('mousedown', div, headerDecorator._onMousedown);\n        };\n    }\n\n    require('../header-decorators')(grid, api);\n\n    return api;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/col-resize/index.js","module.exports = function(_grid, model) {\n    var grid = _grid;\n\n    var api = model || {};\n    api._decorators = {};\n\n    function makeDecorator(col) {\n        var decorator = grid.decorators.create(0, col, 1, 1, 'cell', 'real');\n\n        decorator.getDecoratorLeft = function() {\n            var firstRect = decorator.boundingBox && decorator.boundingBox.getClientRects() && decorator.boundingBox.getClientRects()[0] || {};\n            return grid.viewPort.toGridX(firstRect.left) || 0;\n        };\n\n        if (api.annotateDecorator) {\n            api.annotateDecorator(decorator);\n        }\n\n        return decorator;\n    }\n\n    api.makeDecorator = api.makeDecorator || makeDecorator;\n\n    function ensureDecoratorPerCol() {\n        for (var c = 0; c < grid.viewPort.cols; c++) {\n            if (!api._decorators[c]) {\n                if (api.isNeeded && !api.isNeeded(c)) {\n                    continue;\n                }\n                var decorator = api.makeDecorator(c);\n                api._decorators[c] = decorator;\n                grid.decorators.add(decorator);\n            }\n        }\n    }\n\n    grid.eventLoop.bind('grid-viewport-change', function() {\n        ensureDecoratorPerCol();\n    });\n    ensureDecoratorPerCol();\n\n    return api;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/header-decorators/index.js","var tsv = require('../tsv');\nvar debounce = require('../debounce');\nvar innerText = require('inner-text-shim');\n\nmodule.exports = function(_grid) {\n    var grid = _grid;\n    var model = {};\n\n    function getCopyPasteRange() {\n        var selectionRange = grid.navigationModel.selection;\n        //valid selection range cannot go to -1\n        if (selectionRange.top === -1) {\n            selectionRange = {\n                top: grid.navigationModel.focus.row,\n                left: grid.navigationModel.focus.col,\n                width: 1,\n                height: 1\n            };\n        }\n        return selectionRange;\n    }\n\n    grid.eventLoop.bind('copy', function(e) {\n        if (!grid.focused) {\n            if (e.target === grid.textarea) {\n                e.preventDefault();\n            }\n            return;\n        }\n        // prepare for copy\n        var copyTable = document.createElement('table');\n        var tableBody = document.createElement('tbody');\n        copyTable.appendChild(tableBody);\n        var tsvData = [];\n        var selectionRange = getCopyPasteRange();\n        var gotNull = false;\n        grid.data.iterate(selectionRange, function() {\n            var row = document.createElement('tr');\n            tableBody.appendChild(row);\n            var array = [];\n            tsvData.push(array);\n            return {\n                row: row,\n                array: array\n            };\n        }, function(r, c, rowResult) {\n            var data = grid.dataModel.get(r, c, true);\n\n            // intentional == checks null or undefined\n            if (data == null) {\n                return gotNull = true; // this breaks the col loop\n            }\n            var td = document.createElement('td');\n            if (data.value) {\n                td.setAttribute('grid-data', JSON.stringify(data.value));\n            }\n            td.textContent = data.formatted || ' '\n            td.innerHTML = td.innerHTML.replace(/\\n/g, '<br>') || ' ';\n            rowResult.row.appendChild(td);\n            rowResult.array.push(data.formatted);\n        });\n        if (!gotNull) {\n            e.clipboardData.setData('text/plain', tsv.stringify(tsvData));\n            e.clipboardData.setData('text/html', copyTable.outerHTML);\n            e.preventDefault();\n            setTimeout(function() {\n                grid.eventLoop.fire('grid-copy');\n            }, 1);\n        }\n    });\n\n    function makePasteDataChange(r, c, data) {\n        var value, formatted;\n        if (typeof data === 'string') {\n            formatted = data;\n        } else {\n            value = data.value;\n            formatted = data.formatted;\n        }\n        return {\n            row: r,\n            col: c,\n            value: value,\n            formatted: formatted,\n            paste: true\n        };\n    }\n\n    grid.eventLoop.bind('paste', function(e) {\n        if (!grid.focused) {\n            return;\n        }\n        var selectionRange = getCopyPasteRange();\n        if (!e.clipboardData || !e.clipboardData.getData) {\n            console.warn('no clipboard data on paste event');\n            return;\n        }\n        var pasteData = tsv.parse(e.clipboardData.getData('text/plain'));\n        var pasteHtml = e.clipboardData.getData('text/html');\n        e.preventDefault();\n\n        setTimeout(function() {\n            var tempDiv = document.createElement('div');\n            if (pasteHtml.match(/<meta name=ProgId content=Excel.Sheet>/)) {\n                pasteHtml = pasteHtml.replace(/[\\n\\r]+  /g, ' ').replace(/[\\n\\r]+/g, '');\n            }\n            tempDiv.innerHTML = pasteHtml;\n            var table = tempDiv.querySelector('table');\n            if (table) {\n                table.style.whiteSpace = 'pre';\n                pasteData = [];\n                [].forEach.call(tempDiv.querySelectorAll('tr'), function(tr) {\n                    var row = [];\n                    pasteData.push(row);\n                    [].forEach.call(tr.querySelectorAll('td'), function(td) {\n                        var dataResult = {};\n                        var gridData = td.getAttribute('grid-data');\n                        if (gridData) {\n                            try {\n                                dataResult.value = JSON.parse(gridData);\n                            } catch (error) {\n                                console.warn('somehow couldn\\'t parse grid data');\n                            }\n                        }\n                        var text = innerText(td);\n                        dataResult.formatted = text && text.trim();\n                        row.push(dataResult);\n                    });\n                });\n            }\n            var dataChanges = [];\n            var singlePasteValue;\n            if (pasteData.length === 1 && pasteData[0].length === 1) {\n                singlePasteValue = pasteData[0][0];\n            }\n\n            if (singlePasteValue) {\n                // this will do nothing if no other selections as it will be an empty array\n                var ranges = [selectionRange];\n                ranges = ranges.concat(grid.navigationModel.otherSelections);\n                ranges.forEach(function(range) {\n                    grid.data.iterate(range, function(r, c) {\n                        dataChanges.push(makePasteDataChange(r, c, singlePasteValue));\n                    });\n                });\n            } else {\n                var top = selectionRange.top;\n                var left = selectionRange.left;\n\n\n                pasteData.forEach(function(row, r) {\n                    var dataRow = r + top;\n                    if (dataRow > grid.data.row.count() - 1) {\n                        return;\n                    }\n                    row.forEach(function(pasteValue, c) {\n                        var dataCol = c + left;\n                        // intention == to match null and undefined\n                        if (pasteValue == undefined || dataCol > grid.data.col.count() - 1) {\n                            return;\n                        }\n                        dataChanges.push(makePasteDataChange(dataRow, dataCol, pasteValue));\n                    });\n                });\n                var newSelection = {\n                    top: top,\n                    left: left,\n                    height: pasteData.length,\n                    width: pasteData[0].length\n                };\n\n                grid.navigationModel.clearSelection();\n                grid.navigationModel.setSelection(newSelection);\n            }\n\n\n            grid.dataModel.set(dataChanges);\n        }, 1);\n    });\n\n    var maybeSelectText = debounce(function maybeSelectTextInner() {\n        if (!(grid.editModel && grid.editModel.editing) && grid.focused) {\n            grid.textarea.value = grid.dataModel.get(grid.navigationModel.focus.row, grid.navigationModel.focus.col).formatted || '.';\n            grid.textarea.select();\n        }\n    }, 1);\n\n    model._maybeSelectText = maybeSelectText;\n\n    grid.eventLoop.bind('keyup', function(e) {\n        maybeSelectText();\n    });\n    grid.eventLoop.bind('grid-focus', function(e) {\n        maybeSelectText();\n    });\n    grid.eventLoop.bind('mousedown', function(e) {\n        if (e.target !== grid.textarea) {\n            return;\n        }\n        maybeSelectText();\n    });\n    return model;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/copy-paste/index.js","module.exports.stringify = function(data) {\n    var string = '';\n    data.forEach(function(row, r) {\n        row.forEach(function(value, c) {\n            if (value.indexOf('\\n') !== -1 || value.indexOf('\\t') !== -1 || value.indexOf('\"') !== -1) {\n                //replace \" with \"\" to escape and wrap the whole value in quotes\n                value = '\"' + value.replace(/\"/g, '\"\"') + '\"';\n            }\n            string += value;\n            if (c !== row.length - 1) {\n                string += '\\t'\n            }\n        });\n        if (r !== data.length - 1) {\n            string += '\\n';\n        }\n\n    });\n    return string;\n};\n\n// ref: http://stackoverflow.com/a/1293163/2343\n// This will parse a delimited string into an array of\n// arrays. The default delimiter is the comma, but this\n// can be overriden in the second argument.\nfunction DSVToArray(strData, strDelimiter) {\n    // Check to see if the delimiter is defined. If not,\n    // then default to comma.\n    strDelimiter = (strDelimiter || \",\");\n\n    // Create a regular expression to parse the CSV values.\n    var objPattern = new RegExp(\n        (\n            // Delimiters.\n            \"(\\\\\" + strDelimiter + \"|\\\\r?\\\\n|\\\\r|^)\" +\n\n            // Quoted fields.\n            \"(?:\\\"([^\\\"]*(?:\\\"\\\"[^\\\"]*)*)\\\"|\" +\n\n            // Standard fields.\n            \"([^\\\"\\\\\" + strDelimiter + \"\\\\r\\\\n]+))\"\n        ),\n        \"gi\"\n    );\n\n\n    // Create an array to hold our data. Give the array\n    // a default empty first row.\n    var arrData = [\n        []\n    ];\n\n    // Create an array to hold our individual pattern\n    // matching groups.\n    var arrMatches = null;\n\n\n    // Keep looping over the regular expression matches\n    // until we can no longer find a match.\n    while (arrMatches = objPattern.exec(strData)) {\n\n        // Get the delimiter that was found.\n        var strMatchedDelimiter = arrMatches[1];\n\n        // Check to see if the given delimiter has a length\n        // (is not the start of string) and if it matches\n        // field delimiter. If id does not, then we know\n        // that this delimiter is a row delimiter.\n        if (\n            strMatchedDelimiter.length &&\n            strMatchedDelimiter !== strDelimiter\n        ) {\n\n            // Since we have reached a new row of data,\n            // add an empty row to our data array.\n            arrData.push([]);\n\n        }\n\n        var strMatchedValue;\n\n        // Now that we have our delimiter out of the way,\n        // let's check to see which kind of value we\n        // captured (quoted or unquoted).\n        if (arrMatches[2]) {\n\n            // We found a quoted value. When we capture\n            // this value, unescape any double quotes.\n            strMatchedValue = arrMatches[2].replace(\n                new RegExp(\"\\\"\\\"\", \"g\"),\n                \"\\\"\"\n            );\n\n        } else {\n\n            // We found a non-quoted value.\n            strMatchedValue = arrMatches[3];\n\n        }\n\n\n        // Now that we have our value string, let's add\n        // it to the data array.\n        arrData[arrData.length - 1].push(strMatchedValue);\n    }\n\n    // Return the parsed data.\n    return (arrData[0].length || !strData) && (arrData) || [\n        [strData]\n    ];\n}\n\n\nmodule.exports.parse = function(string) {\n    return DSVToArray(string, '\\t');\n};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/tsv/index.js","module.exports = function innerText(el) {\n  if (el.innerText) return el.innerText;\n  if (!window.getSelection) return 'ERROR: UUPS `window.getSelection` is not available.';\n\n  var selection = window.getSelection();\n  var ranges = [];\n  var text;\n\n  // Save existing selections.\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges[i] = selection.getRangeAt(i);\n  }\n\n  // Deselect everything.\n  selection.removeAllRanges();\n\n  // Select `el` and all child nodes.\n  selection.selectAllChildren(el);\n\n  // Get the string representation of the selected nodes.\n  text = selection.toString();\n\n  // Deselect everything. Again.\n  selection.removeAllRanges();\n\n  // Restore all formerly existing selections.\n  for (var i = 0; i < ranges.length; i++) {\n    selection.addRange(ranges[i]);\n  }\n\n  // Oh look, this is what we wanted.\n  // String representation of the element, close to as rendered.\n  return text;\n\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/inner-text-shim/index.js\n// module id = 51\n// module chunks = 0"],"sourceRoot":""}